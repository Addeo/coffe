"use strict";(self.webpackChunkcoffee_admin=self.webpackChunkcoffee_admin||[]).push([[833],{5833:(X,g,t)=>{t.r(g),t.d(g,{LoginComponent:()=>w,MyErrorStateMatcher:()=>P});var o=t(4292),A=t(9351),i=t(7199),c=t(4842),s=t(8598),_=t(6721),f=t(3505),m=t(5320),p=t(91),E=t(8497),I=t(5822),F=t(4755),C=t(878);function R(n,a){1&n&&(o.j41(0,"mat-error"),o.pXf(1,6),o.k0s())}function $(n,a){1&n&&(o.j41(0,"mat-error"),o.PLo(1,7),o.nrm(2,"strong"),o.YFu(),o.k0s())}function v(n,a){1&n&&(o.j41(0,"mat-error"),o.pXf(1,8),o.k0s())}function b(n,a){1&n&&(o.j41(0,"mat-error"),o.PLo(1,9),o.nrm(2,"strong"),o.YFu(),o.k0s())}function D(n,a){1&n&&(o.j41(0,"span"),o.pXf(1,10),o.k0s())}function x(n,a){1&n&&(o.j41(0,"span"),o.nrm(1,"mat-spinner",25),o.j41(2,"span"),o.pXf(3,11),o.k0s()())}class P{isErrorState(a){return!(!a||!a.invalid||!a.dirty&&!a.touched)}}let w=(()=>{class n{constructor(){this.fb=(0,o.WQX)(i.ok),this.authService=(0,o.WQX)(I.u),this.router=(0,o.WQX)(c.Ix),this.route=(0,o.WQX)(c.nX),this.toastService=(0,o.WQX)(F.f),this.cdr=(0,o.WQX)(o.gRc),this.emailFormControl=new i.MJ("",[i.k0.required,i.k0.email]),this.passwordFormControl=new i.MJ("",[i.k0.required,i.k0.minLength(6)]),this.matcher=new P,this.isLoading=(0,o.vPA)(!1),this.hidePassword=(0,o.vPA)(!0),this.appVersion=(0,o.vPA)(C.c.appVersion),this.authService.isAuthenticated()&&this.router.navigate(["/orders"])}ngOnInit(){console.log("\u{1f4f1} \u0422\u0435\u043a\u0443\u0449\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f:",C.c.appVersion)}onSubmit(){if(console.log("\u{1f4dd} Form submission started"),console.log("\u{1f4e7} Email valid:",this.emailFormControl.valid,"Value:",this.emailFormControl.value),console.log("\u{1f512} Password valid:",this.passwordFormControl.valid,"Value length:",this.passwordFormControl.value?.length||0),this.emailFormControl.valid&&this.passwordFormControl.valid){this.isLoading.set(!0),console.log("\u2705 Form is valid, sending login request");const l={email:this.emailFormControl.value||"",password:this.passwordFormControl.value||""};console.log("\u{1f4e4} Sending credentials to auth service:",{email:l.email,passwordLength:l.password.length}),this.authService.login(l).subscribe({next:r=>{console.log("\u{1f389} Login component received success response:",r),this.isLoading.set(!1);const e=this.route.snapshot.queryParams.returnUrl||"/orders";console.log("\u{1f9ed} Navigating to:",e),this.cdr.detectChanges(),this.router.navigate([e]).then(()=>{this.cdr.markForCheck(),console.log("\u{1f3e0} Navigation completed with change detection")}),this.toastService.success("\u0412\u0445\u043e\u0434 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e!")},error:r=>{console.error("\u{1f4a5} Login component received error:",r),this.isLoading.set(!1);let e="Login failed. Please try again.";r.error?.message&&(e=r.error.message),console.log("\u{1f4e2} Showing error message:",e),this.toastService.error(e)}})}else console.log("\u274c Form is invalid, marking fields as touched"),this.emailFormControl.markAsTouched(),this.passwordFormControl.markAsTouched()}togglePasswordVisibility(){this.hidePassword.update(l=>!l)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=o.VBU({type:n,selectors:[["app-login"]],standalone:!0,features:[o.aNF],decls:35,vars:15,consts:()=>{let l,r,e,d,M,h,O,S,N,T,L,G;return l=$localize`:@@login.title:Панель администратора Coffee`,r=$localize`:@@login.subtitle:Пожалуйста, войдите для продолжения`,e=$localize`:@@login.email:Электронная почта`,d=$localize`:@@form.errorsAppearInstantly:Введите email`,M=$localize`:@@login.password:Пароль`,h=$localize`:@@form.passwordMinLength:Требуется минимум 6 символов`,O=$localize`:@@form.emailInvalid:Пожалуйста, введите корректный email адрес`,S=$localize`:@@form.emailRequired:Электронная почта ${"\ufffd#2\ufffd"}:START_TAG_STRONG:обязательна${"\ufffd/#2\ufffd"}:CLOSE_TAG_STRONG:`,N=$localize`:@@form.passwordTooShort:Пароль должен содержать минимум 6 символов`,T=$localize`:@@form.passwordRequired:Пароль ${"\ufffd#2\ufffd"}:START_TAG_STRONG:обязателен${"\ufffd/#2\ufffd"}:CLOSE_TAG_STRONG:`,L=$localize`:@@login.signIn:Войти`,G=$localize`:@@login.signingIn:Вход в систему...`,[l,r,e,d,M,h,O,S,N,T,L,G,[1,"login-container"],[1,"login-card"],[1,"login-title"],[1,"login-subtitle"],[1,"login-form"],[1,"full-width"],["type","email","matInput","","placeholder","\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: admin@coffee.com",3,"formControl","errorStateMatcher"],["matInput","","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0434\u0435\u0436\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",3,"type","formControl","errorStateMatcher"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["mat-raised-button","","color","primary","type","button",1,"login-button",3,"click","disabled"],[1,"version-footer"],[1,"version-info"],[1,"version-text"],["diameter","20",1,"spinner"]]},template:function(r,e){1&r&&(o.j41(0,"div",12)(1,"mat-card",13)(2,"mat-card-header")(3,"mat-card-title",14),o.pXf(4,0),o.k0s(),o.j41(5,"mat-card-subtitle",15),o.pXf(6,1),o.k0s()(),o.j41(7,"mat-card-content")(8,"form",16)(9,"mat-form-field",17)(10,"mat-label"),o.pXf(11,2),o.k0s(),o.nrm(12,"input",18),o.j41(13,"mat-hint"),o.pXf(14,3),o.k0s(),o.DNE(15,R,2,0,"mat-error")(16,$,3,0,"mat-error"),o.k0s(),o.j41(17,"mat-form-field",17)(18,"mat-label"),o.pXf(19,4),o.k0s(),o.nrm(20,"input",19),o.j41(21,"button",20),o.bIt("click",function(){return e.togglePasswordVisibility()}),o.j41(22,"mat-icon"),o.EFF(23),o.k0s()(),o.j41(24,"mat-hint"),o.pXf(25,5),o.k0s(),o.DNE(26,v,2,0,"mat-error")(27,b,3,0,"mat-error"),o.k0s(),o.j41(28,"button",21),o.bIt("click",function(){return e.onSubmit()}),o.DNE(29,D,2,0,"span")(30,x,4,0),o.k0s()()(),o.j41(31,"mat-card-footer",22)(32,"div",23)(33,"span",24),o.EFF(34),o.k0s()()()()()),2&r&&(o.R7$(12),o.Y8G("formControl",e.emailFormControl)("errorStateMatcher",e.matcher),o.R7$(3),o.vxM(15,e.emailFormControl.hasError("email")&&!e.emailFormControl.hasError("required")?15:-1),o.R7$(),o.vxM(16,e.emailFormControl.hasError("required")?16:-1),o.R7$(4),o.Y8G("type",e.hidePassword()?"password":"text")("formControl",e.passwordFormControl)("errorStateMatcher",e.matcher),o.R7$(),o.BMQ("aria-label",e.hidePassword()?"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c":"\u0421\u043a\u0440\u044b\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c")("aria-pressed",!e.hidePassword()),o.R7$(2),o.JRh(e.hidePassword()?"visibility_off":"visibility"),o.R7$(3),o.vxM(26,e.passwordFormControl.hasError("minlength")&&!e.passwordFormControl.hasError("required")?26:-1),o.R7$(),o.vxM(27,e.passwordFormControl.hasError("required")?27:-1),o.R7$(),o.Y8G("disabled",e.isLoading()||e.emailFormControl.invalid||e.passwordFormControl.invalid),o.R7$(),o.vxM(29,e.isLoading()?30:29),o.R7$(5),o.SpI("\u0412\u0435\u0440\u0441\u0438\u044f: ",e.appVersion(),""))},dependencies:[A.MD,i.X1,i.qT,i.me,i.BC,i.cb,i.l_,s.Hu,s.RN,s.m2,s.WQ,s.MM,s.Lc,s.dh,_.RG,_.rl,_.nJ,_.MV,_.TL,_.yw,f.fS,f.fg,m.Hl,m.$z,m.iY,p.m_,p.An,E.D6,E.LG],styles:['.login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2,#f093fb);padding:20px;position:relative}.login-container[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:#0000001a;pointer-events:none}.login-card[_ngcontent-%COMP%]{width:100%;max-width:400px;box-shadow:0 20px 40px #00000026;border-radius:16px;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);background:#fffffffa;border:1px solid rgba(255,255,255,.2);position:relative;z-index:1;animation:_ngcontent-%COMP%_slideIn .6s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.login-title[_ngcontent-%COMP%]{text-align:center;font-size:24px;font-weight:600;color:#333;margin-bottom:8px}.login-subtitle[_ngcontent-%COMP%]{text-align:center;color:#666;margin-bottom:32px}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:8px}.login-button[_ngcontent-%COMP%]{width:100%;height:48px;font-size:16px;font-weight:500;border-radius:8px;margin-top:16px}.login-button[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{margin-right:8px}  .mat-mdc-form-field .mat-mdc-text-field-wrapper{background-color:#fffc;border-radius:8px;padding-top:16px}  .mat-mdc-form-field .mdc-notched-outline .mdc-notched-outline__leading,   .mat-mdc-form-field .mdc-notched-outline .mdc-notched-outline__notch,   .mat-mdc-form-field .mdc-notched-outline .mdc-notched-outline__trailing{border-color:#0000001f;border-width:1px}  .mat-mdc-form-field.mat-focused .mdc-notched-outline .mdc-notched-outline__leading,   .mat-mdc-form-field.mat-focused .mdc-notched-outline .mdc-notched-outline__notch,   .mat-mdc-form-field.mat-focused .mdc-notched-outline .mdc-notched-outline__trailing{border-color:#667eea;border-width:2px}  .mat-mdc-form-field .mdc-notched-outline__notch{border-top:none!important}  .mat-mdc-form-field .mat-mdc-form-field-label{top:16px;left:16px;transform-origin:left top;transition:all .15s cubic-bezier(.4,0,.2,1);pointer-events:none;position:absolute;color:#0009;font-size:16px;line-height:1.125;font-weight:400;z-index:1}  .mat-mdc-form-field.mat-focused .mat-mdc-form-field-label,   .mat-mdc-form-field .mat-mdc-form-field-label.mat-mdc-form-field-label-notched{transform:translateY(-8px) scale(.75);color:#667eea}  .mat-mdc-form-field.mat-form-field-has-label .mat-mdc-text-field-wrapper{padding-top:24px}  .mat-mdc-form-field .mat-mdc-input-element{padding:16px;border-radius:8px;font-size:16px;line-height:1.5}  .mat-mdc-form-field .mdc-notched-outline--notched .mdc-notched-outline__notch{border-top:none}  .mat-mdc-form-field.error .mdc-notched-outline__leading,   .mat-mdc-form-field.error .mdc-notched-outline__notch,   .mat-mdc-form-field.error .mdc-notched-outline__trailing{border-color:#f44336}.version-footer[_ngcontent-%COMP%]{padding:16px 24px;border-top:1px solid rgba(0,0,0,.08);background:#00000005;border-radius:0 0 16px 16px}.version-info[_ngcontent-%COMP%]{text-align:center}.version-text[_ngcontent-%COMP%]{font-size:12px;color:#666;font-weight:400;opacity:.8}@media (max-width: 480px){.login-container[_ngcontent-%COMP%]{padding:16px}.login-card[_ngcontent-%COMP%]{max-width:100%}.login-title[_ngcontent-%COMP%]{font-size:20px}.version-footer[_ngcontent-%COMP%]{padding:12px 16px}}']})}}return n})()}}]);