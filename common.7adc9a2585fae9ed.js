"use strict";(self.webpackChunkcoffee_admin=self.webpackChunkcoffee_admin||[]).push([[76],{2517:(p,d,i)=>{i.d(d,{i:()=>C});var t=i(4292),g=i(9351),s=i(4165),r=i(5320),_=i(91),o=i(8497),c=i(4740),e=i(4755);function n(a,f){if(1&a&&(t.j41(0,"div",12)(1,"strong"),t.EFF(2),t.k0s(),t.nrm(3,"br"),t.j41(4,"small"),t.EFF(5),t.k0s()()),2&a){const l=t.XpG();t.R7$(2),t.Lme("",l.data.user.firstName," ",l.data.user.lastName,""),t.R7$(3),t.JRh(l.data.user.email)}}function m(a,f){1&a&&t.nrm(0,"mat-spinner",13)}function E(a,f){if(1&a&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&a){const l=t.XpG();t.R7$(),t.JRh(l.data.confirmText||"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")}}let C=(()=>{class a{constructor(){this.dialogRef=(0,t.WQX)(s.CP),this.usersService=(0,t.WQX)(c.g),this.toastService=(0,t.WQX)(e.f),this.data=(0,t.WQX)(s.Vh),this.isLoading=(0,t.vPA)(!1)}onConfirm(){console.log("\u{1f5d1}\ufe0f Dialog onConfirm called with data:",this.data),this.data.user&&this.shouldAutoDelete()?(console.log("\u{1f5d1}\ufe0f Auto-deleting user:",this.data.user.id),this.isLoading.set(!0),this.usersService.deleteUser(this.data.user.id).subscribe({next:()=>{this.toastService.showSuccess("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d"),this.dialogRef.close(!0)},error:l=>{console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:",l),this.toastService.showError("\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437."),this.isLoading.set(!1)}})):(console.log("\u{1f5d1}\ufe0f Returning confirmation (no auto-delete)"),this.dialogRef.close(!0))}onCancel(){console.log("\u{1f5d1}\ufe0f Dialog onCancel called"),this.dialogRef.close(!1)}shouldAutoDelete(){return!!this.data.user}static{this.\u0275fac=function(h){return new(h||a)}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-delete-confirmation-dialog"]],standalone:!0,features:[t.aNF],decls:18,vars:7,consts:[[1,"delete-dialog"],[1,"delete-header"],["color","warn"],["mat-dialog-title",""],[1,"delete-message"],["class","user-info",4,"ngIf"],[1,"warning-text"],["align","end"],["mat-button","",3,"click"],["mat-raised-button","","color","warn",3,"click","disabled"],["diameter","20",4,"ngIf"],[4,"ngIf"],[1,"user-info"],["diameter","20"]],template:function(h,u){1&h&&(t.j41(0,"div",0)(1,"div",1)(2,"mat-icon",2),t.EFF(3,"warning"),t.k0s(),t.j41(4,"h2",3),t.EFF(5),t.k0s()(),t.j41(6,"mat-dialog-content")(7,"p",4),t.EFF(8),t.k0s(),t.DNE(9,n,6,3,"div",5),t.j41(10,"p",6),t.EFF(11,"\u042d\u0442\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043d\u0435\u043b\u044c\u0437\u044f \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c."),t.k0s()(),t.j41(12,"mat-dialog-actions",7)(13,"button",8),t.bIt("click",function(){return u.onCancel()}),t.EFF(14),t.k0s(),t.j41(15,"button",9),t.bIt("click",function(){return u.onConfirm()}),t.DNE(16,m,1,0,"mat-spinner",10)(17,E,2,1,"span",11),t.k0s()()()),2&h&&(t.R7$(5),t.JRh(u.data.title||"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435"),t.R7$(3),t.SpI(" ",u.data.message||"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f?"," "),t.R7$(),t.Y8G("ngIf",u.data.user),t.R7$(5),t.JRh(u.data.cancelText||"\u041e\u0442\u043c\u0435\u043d\u0430"),t.R7$(),t.Y8G("disabled",u.isLoading()),t.R7$(),t.Y8G("ngIf",u.isLoading()),t.R7$(),t.Y8G("ngIf",!u.isLoading()))},dependencies:[g.MD,g.bT,s.hM,s.BI,s.E7,s.Yi,r.Hl,r.$z,_.m_,_.An,o.D6,o.LG],styles:[".delete-dialog[_ngcontent-%COMP%]{max-width:400px}.delete-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:16px}.delete-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}.delete-message[_ngcontent-%COMP%]{margin:0 0 16px;line-height:1.5}.user-info[_ngcontent-%COMP%]{background:#f5f5f5;padding:12px;border-radius:4px;margin-bottom:16px}.user-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333}.user-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666}.warning-text[_ngcontent-%COMP%]{color:#d32f2f;font-weight:500;margin:0}mat-dialog-actions[_ngcontent-%COMP%]{padding:16px 0 0}button[_ngcontent-%COMP%]{min-width:80px}"]})}}return a})()},1253:(p,d,i)=>{i.d(d,{n:()=>_});var t=i(4292),g=i(6e3),s=i(6200),r=i(878);let _=(()=>{class o{constructor(){this.http=(0,t.WQX)(g.Qq),this.apiUrl=`${r.c.apiUrl}/engineer-organization-rates`}getRates(e={}){let n=new g.Nl;return e.engineerId&&(n=n.set("engineerId",e.engineerId.toString())),e.organizationId&&(n=n.set("organizationId",e.organizationId.toString())),void 0!==e.isActive&&(n=n.set("isActive",e.isActive.toString())),e.page&&(n=n.set("page",e.page.toString())),e.limit&&(n=n.set("limit",e.limit.toString())),this.http.get(this.apiUrl,{params:n})}getRate(e){return this.http.get(`${this.apiUrl}/${e}`)}getRateByEngineerAndOrganization(e,n){return this.http.get(`${this.apiUrl}/engineer/${e}/organization/${n}`).pipe((0,s.T)(m=>m||null))}createRate(e){return console.log("\u{1f4e4} Creating engineer-organization rate:",e),this.http.post(this.apiUrl,e)}updateRate(e,n){return this.http.patch(`${this.apiUrl}/${e}`,n)}deleteRate(e){return this.http.delete(`${this.apiUrl}/${e}`)}bulkUpdateRates(e){return this.http.patch(`${this.apiUrl}/bulk`,{updates:e})}getActiveRatesForEngineer(e){return this.getRates({engineerId:e})}getActiveRatesForOrganization(e){return this.getRates({organizationId:e,isActive:!0})}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})()},4193:(p,d,i)=>{i.d(d,{B:()=>s});var t=i(4292),g=i(4165);let s=(()=>{class r{constructor(){this.dialog=(0,t.WQX)(g.bZ)}openDialog(o,c,e){return this.dialog.open(o,{data:c,width:"600px",maxWidth:"90vw",disableClose:!1,hasBackdrop:!0,backdropClass:"modal-backdrop",panelClass:"modal-panel",...e}).afterClosed()}closeAll(){this.dialog.closeAll()}static{this.\u0275fac=function(c){return new(c||r)}}static{this.\u0275prov=t.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})()}}]);