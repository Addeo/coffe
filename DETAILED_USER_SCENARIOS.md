# 🎬 Детальные сценарии использования системы заказов

## 📋 **Содержание**
1. [Сценарий 1: Первый запуск системы](#сценарий-1-первый-запуск-системы)
2. [Сценарий 2: Создание и назначение заказа](#сценарий-2-создание-и-назначение-заказа)
3. [Сценарий 3: Инженер принимает и выполняет заказ](#сценарий-3-инженер-принимает-и-выполняет-заказ)
4. [Сценарий 4: Множественные заказы](#сценарий-4-множественные-заказы)
5. [Сценарий 5: Частичное выполнение работы](#сценарий-5-частичное-выполнение-работы)
6. [Сценарий 6: Переназначение инженера](#сценарий-6-переназначение-инженера)
7. [Сценарий 7: Редактирование завершенного заказа](#сценарий-7-редактирование-завершенного-заказа)
8. [Сценарий 8: Работа с файлами](#сценарий-8-работа-с-файлами)
9. [Сценарий 9: Статистика и отчеты](#сценарий-9-статистика-и-отчеты)
10. [Сценарий 10: Ошибки и исключения](#сценарий-10-ошибки-и-исключения)

---

## 🚀 **Сценарий 1: Первый запуск системы**

### **Шаг 1: Регистрация администратора**
**Пользователь:** Системный администратор  
**Действие:** Первый вход в систему

```
🔐 Страница входа
┌─────────────────────────────────────┐
│  ☕ Coffee Management System        │
│                                     │
│  Email: admin@coffee.com            │
│  Пароль: ********                   │
│                                     │
│  [Войти]                            │
└─────────────────────────────────────┘
```

**Результат:** Успешный вход, переход на главную страницу

### **Шаг 2: Создание организаций**
**Пользователь:** ADMIN  
**Действие:** Настройка организаций-заказчиков

```
📊 Страница организаций
┌─────────────────────────────────────┐
│  [Создать организацию]             │
│                                     │
│  Название: ООО Кофейная Компания    │
│  Адрес: Москва, ул. Кофейная, 1    │
│  Телефон: +7-495-123-45-67         │
│  Базовая ставка: 1000 ₽/час        │
│  Переработка: 1.5x                 │
│                                     │
│  [Сохранить]                        │
└─────────────────────────────────────┘
```

**Результат:** Организация создана, ID: 1

### **Шаг 3: Создание инженеров**
**Пользователь:** ADMIN  
**Действие:** Регистрация инженеров

```
👥 Страница пользователей
┌─────────────────────────────────────┐
│  [Создать пользователя]             │
│                                     │
│  Имя: Иван                          │
│  Фамилия: Инженеров                 │
│  Email: engineer1@coffee.com        │
│  Пароль: engineer123                │
│  Роль: Инженер                      │
│                                     │
│  [Создать]                          │
└─────────────────────────────────────┘
```

**Результат:** Инженер создан, ID: 2

### **Шаг 4: Настройка ставок**
**Пользователь:** ADMIN  
**Действие:** Настройка индивидуальных ставок

```
💰 Настройка ставок
┌─────────────────────────────────────┐
│  Инженер: Иван Инженеров            │
│  Организация: ООО Кофейная Компания │
│                                     │
│  Базовая ставка: 700 ₽/час          │
│  Ставка переработки: 1050 ₽/час     │
│  Зона 1 (61-199 км): +200 ₽         │
│  Зона 2 (200-250 км): +400 ₽        │
│  Зона 3 (>250 км): +600 ₽           │
│                                     │
│  [Сохранить]                        │
└─────────────────────────────────────┘
```

**Результат:** Ставки настроены для пары инженер-организация

---

## 📝 **Сценарий 2: Создание и назначение заказа**

### **Шаг 1: Создание заказа (ADMIN)**
**Пользователь:** ADMIN  
**Действие:** Создание нового заказа

```
📋 Страница заказов
┌─────────────────────────────────────┐
│  [Создать заказ] [Скачать XLS]      │
│                                     │
│  Фильтр: [Все статусы ▼]            │
│  Поиск: [________________]         │
│                                     │
│  Статистика:                        │
│  📊 Всего: 0  ⏳ Ожидают: 0          │
│  🔧 В работе: 0  ✅ Завершено: 0     │
└─────────────────────────────────────┘
```

**Клик на "Создать заказ":**

```
📝 Диалог создания заказа
┌─────────────────────────────────────┐
│  ✏️ Создать новый заказ             │
│                                     │
│  Название: [Ремонт кофемашины    ]  │
│  Описание: [Необходимо заменить   ] │
│            [помпу в кофемашине    ]  │
│                                     │
│  Организация: [ООО Кофейная ▼]      │
│  Местоположение: [Москва, ул. Деловая, 15] │
│                                     │
│  Расстояние: [25] км                │
│  Тип территории: [Городская ▼]      │
│  Планируемая дата: [📅 завтра]      │
│                                     │
│  📎 Файлы:                          │
│  [Перетащите файлы сюда или выберите] │
│                                     │
│  [Отмена] [Создать]                 │
└─────────────────────────────────────┘
```

**Заполнение формы:**
- Название: "Ремонт кофемашины в офисе"
- Описание: "Необходимо заменить помпу в кофемашине"
- Организация: "ООО Кофейная Компания"
- Местоположение: "Москва, ул. Деловая, 15"
- Расстояние: 25 км
- Тип территории: "Городская"
- Планируемая дата: завтра

**Результат:** Заказ создан, ID: 1, статус: `WAITING`

### **Шаг 2: Назначение инженера (ADMIN)**
**Пользователь:** ADMIN  
**Действие:** Назначение заказа инженеру

```
📋 Список заказов после создания
┌─────────────────────────────────────┐
│  №  Название              Статус    │
│  1  Ремонт кофемашины     ⏳ Ожидает │
│     Москва, ул. Деловая, 15         │
│     👤 Не назначен                  │
│     [✏️] [👤] [🔄] [🗑️]            │
└─────────────────────────────────────┘
```

**Клик на иконку назначения (👤):**

```
👤 Диалог назначения инженера
┌─────────────────────────────────────┐
│  👤 Назначить инженера на заказ      │
│                                     │
│  📋 Ремонт кофемашины в офисе       │
│  Организация: ООО Кофейная Компания │
│  Статус: Ожидает                    │
│                                     │
│  Выберите инженера:                 │
│  [Иван Инженеров (engineer1@coffee.com) ▼] │
│                                     │
│  [Отмена] [Назначить]               │
└─────────────────────────────────────┘
```

**Выбор инженера и подтверждение:**

```
✅ Успешное назначение
┌─────────────────────────────────────┐
│  ✅ Инженер успешно назначен на заказ │
│                                     │
│  Иван Инженеров получил уведомление  │
│  о новом назначении                  │
└─────────────────────────────────────┘
```

**Результат:** Заказ назначен, статус: `ASSIGNED`

### **Шаг 3: Обновление статистики**
**Пользователь:** ADMIN  
**Действие:** Просмотр обновленной статистики

```
📊 Обновленная статистика
┌─────────────────────────────────────┐
│  📊 Статистика по заказам          │
│                                     │
│  📈 По статусам:                    │
│  ⏳ Ожидают: 0                      │
│  👤 Назначены: 1                    │
│  🔧 В работе: 0                     │
│  ✅ Завершено: 0                    │
│                                     │
│  📊 Всего заказов: 1               │
└─────────────────────────────────────┘
```

---

## 👷 **Сценарий 3: Инженер принимает и выполняет заказ**

### **Шаг 1: Вход инженера**
**Пользователь:** Иван Инженеров  
**Действие:** Вход в систему

```
🔐 Вход инженера
┌─────────────────────────────────────┐
│  Email: engineer1@coffee.com       │
│  Пароль: ********                   │
│                                     │
│  [Войти]                            │
└─────────────────────────────────────┘
```

**Результат:** Успешный вход, переход на страницу заказов

### **Шаг 2: Просмотр назначенных заказов**
**Пользователь:** Иван Инженеров  
**Действие:** Просмотр списка заказов

```
📋 Страница заказов инженера
┌─────────────────────────────────────┐
│  ⚠️ У вас есть непринятые заявки,   │
│     ожидающие подтверждения.        │
│  [Посмотреть]                       │
│                                     │
│  📊 Мои заказы:                     │
│  Всего: 1  ⏳ Ожидают: 0            │
│  👤 Назначены: 1  🔧 В работе: 0    │
│  ✅ Завершено: 0                    │
│                                     │
│  №  Название              Статус    │
│  1  Ремонт кофемашины     👤 Назначен │
│     Москва, ул. Деловая, 15         │
│     👤 Иван Инженеров               │
│     [✅ Подтвердить] [✏️]           │
└─────────────────────────────────────┘
```

### **Шаг 3: Принятие заказа**
**Пользователь:** Иван Инженеров  
**Действие:** Подтверждение заказа

**Клик на "Подтвердить":**

```
✅ Подтверждение заказа
┌─────────────────────────────────────┐
│  ✅ Заявка подтверждена и перешла в работу │
│                                     │
│  Заказ "Ремонт кофемашины"          │
│  Статус: В работе                   │
│  Время начала: 14:30                │
└─────────────────────────────────────┘
```

**Результат:** Статус меняется на `WORKING`, устанавливается `actualStartDate`

### **Шаг 4: Выполнение работы**
**Пользователь:** Иван Инженеров  
**Действие:** Внесение данных о выполненной работе

```
📋 Обновленный список заказов
┌─────────────────────────────────────┐
│  №  Название              Статус    │
│  1  Ремонт кофемашины     🔧 В работе │
│     Москва, ул. Деловая, 15         │
│     👤 Иван Инженеров               │
│     [🔧 Выполнить] [✏️]             │
└─────────────────────────────────────┘
```

**Клик на "Выполнить":**

```
🔧 Диалог выполнения работы
┌─────────────────────────────────────┐
│  🔧 Внести данные о выполненной работе │
│                                     │
│  📋 Ремонт кофемашины в офисе       │
│  Организация: ООО Кофейная Компания │
│  Локация: Москва, ул. Деловая, 15   │
│                                     │
│  ⏱ Время работы:                    │
│  Обычные часы: [4] часов            │
│  Сверхурочные часы: [1] часов       │
│                                     │
│  📍 Территория и расстояние:        │
│  Тип территории: [Городская ▼]      │
│  Расстояние: [25] км                │
│                                     │
│  🚗 Использование автомобиля:       │
│  Оплата за автомобиль: [500] ₽      │
│                                     │
│  📝 Примечания:                     │
│  [Заменена помпа, протестирована    │
│   работа. Все функции работают      │
│   корректно.]                       │
│                                     │
│  ✅ Статус выполнения:              │
│  ○ Работа завершена полностью       │
│  ● Требуется продолжение работ      │
│                                     │
│  [Отмена] [Сохранить]               │
└─────────────────────────────────────┘
```

**Заполнение формы:**
- Обычные часы: 4
- Сверхурочные часы: 1
- Тип территории: Городская
- Расстояние: 25 км
- Оплата за автомобиль: 500 ₽
- Примечания: "Заменена помпа, протестирована работа. Все функции работают корректно."
- Статус: "Работа завершена полностью"

**Результат:** Статус меняется на `COMPLETED`

### **Шаг 5: Автоматические расчеты**
**Система автоматически рассчитывает:**

```
💰 Расчет оплаты
┌─────────────────────────────────────┐
│  📊 Детализация оплаты:             │
│                                     │
│  Инженер:                           │
│  • Обычные часы: 4 × 700 = 2800 ₽   │
│  • Сверхурочные: 1 × 1050 = 1050 ₽  │
│  • Автомобиль: 500 ₽                │
│  • Итого инженеру: 4350 ₽           │
│                                     │
│  Организация:                       │
│  • Обычные часы: 4 × 1000 = 4000 ₽   │
│  • Сверхурочные: 1 × 1500 = 1500 ₽  │
│  • Итого от организации: 5500 ₽     │
│                                     │
│  💰 Прибыль: 5500 - 4350 = 1150 ₽   │
└─────────────────────────────────────┘
```

---

## 📊 **Сценарий 4: Множественные заказы**

### **Шаг 1: Создание нескольких заказов (ADMIN)**
**Пользователь:** ADMIN  
**Действие:** Создание 3 заказов для разных инженеров

```
📋 Создание заказов
┌─────────────────────────────────────┐
│  Заказ 1: "Ремонт кофемашины"       │
│  Организация: ООО Кофейная Компания │
│  Статус: COMPLETED                  │
│  Инженер: Иван Инженеров            │
│  Часы: 6 обычных + 2 сверхурочных   │
│  Оплата: 6300 ₽                     │
│                                     │
│  Заказ 2: "Установка кофемашины"    │
│  Организация: ИП Кофе и Ко          │
│  Статус: WORKING                    │
│  Инженер: Петр Специалистов         │
│  Часы: 3 обычных                    │
│  Оплата: 2400 ₽                     │
│                                     │
│  Заказ 3: "Обслуживание кофемашины" │
│  Организация: ООО Кофейная Компания │
│  Статус: ASSIGNED                   │
│  Инженер: Иван Инженеров            │
│  Ожидает принятия                   │
└─────────────────────────────────────┘
```

### **Шаг 2: Статистика для ADMIN**
**Пользователь:** ADMIN  
**Действие:** Просмотр общей статистики

```
📊 Общая статистика (ADMIN)
┌─────────────────────────────────────┐
│  📊 Статистика по заказам           │
│                                     │
│  📈 По статусам:                    │
│  ⏳ Ожидают: 0                      │
│  👤 Назначены: 1                    │
│  🔧 В работе: 1                     │
│  ✅ Завершено: 1                    │
│                                     │
│  💰 Финансовая статистика:          │
│  • Общая оплата инженерам: 8700 ₽   │
│  • Общая оплата от организаций: 11000 ₽ │
│  • Общая прибыль: 2300 ₽            │
│                                     │
│  👥 По инженерам:                   │
│  • Иван Инженеров: 2 заказа, 6300 ₽ │
│  • Петр Специалистов: 1 заказ, 2400 ₽ │
└─────────────────────────────────────┘
```

### **Шаг 3: Статистика для ИНЖЕНЕРА**
**Пользователь:** Иван Инженеров  
**Действие:** Просмотр личной статистики

```
📊 Личная статистика (Иван Инженеров)
┌─────────────────────────────────────┐
│  📊 Мои заказы                      │
│                                     │
│  📈 По статусам:                    │
│  ⏳ Ожидают: 0                      │
│  👤 Назначены: 1                    │
│  🔧 В работе: 0                     │
│  ✅ Завершено: 1                    │
│                                     │
│  💰 Мой заработок:                  │
│  • Завершено: 6300 ₽                │
│  • В работе: 0 ₽                    │
│  • Всего: 6300 ₽                    │
│                                     │
│  📋 Детализация:                    │
│  • Заказ 1: 6300 ₽ (6+2 часа)       │
│  • Заказ 3: Ожидает принятия        │
└─────────────────────────────────────┘
```

---

## 🔄 **Сценарий 5: Частичное выполнение работы**

### **Шаг 1: Инженер выполняет частичную работу**
**Пользователь:** Петр Специалистов  
**Действие:** Внесение данных о частично выполненной работе

```
🔧 Диалог выполнения работы (частично)
┌─────────────────────────────────────┐
│  🔧 Внести данные о выполненной работе │
│                                     │
│  📋 Установка кофемашины            │
│  Организация: ИП Кофе и Ко          │
│  Локация: СПб, пр. Кофейный, 10     │
│                                     │
│  ⏱ Время работы:                    │
│  Обычные часы: [2] часов            │
│  Сверхурочные часы: [0] часов       │
│                                     │
│  🚗 Использование автомобиля:       │
│  Оплата за автомобиль: [300] ₽      │
│                                     │
│  📝 Примечания:                     │
│  [Установлена кофемашина, подключена │
│   к водопроводу. Требуется настройка │
│   и тестирование.]                  │
│                                     │
│  ✅ Статус выполнения:              │
│  ○ Работа завершена полностью       │
│  ● Требуется продолжение работ      │
│                                     │
│  [Отмена] [Сохранить]               │
└─────────────────────────────────────┘
```

**Выбор:** "Требуется продолжение работ"

**Результат:** Статус остается `WORKING`

### **Шаг 2: Продолжение работы**
**Пользователь:** Петр Специалистов  
**Действие:** Дополнительное выполнение работы

```
🔧 Диалог выполнения работы (продолжение)
┌─────────────────────────────────────┐
│  🔧 Внести данные о выполненной работе │
│                                     │
│  📋 Установка кофемашины            │
│  Организация: ИП Кофе и Ко          │
│  Локация: СПб, пр. Кофейный, 10     │
│                                     │
│  ⏱ Время работы:                    │
│  Обычные часы: [1] часов            │
│  Сверхурочные часы: [0] часов       │
│                                     │
│  🚗 Использование автомобиля:       │
│  Оплата за автомобиль: [0] ₽        │
│                                     │
│  📝 Примечания:                     │
│  [Настроена кофемашина, проведено   │
│   тестирование. Все функции работают │
│   корректно. Работа завершена.]     │
│                                     │
│  ✅ Статус выполнения:              │
│  ● Работа завершена полностью       │
│  ○ Требуется продолжение работ      │
│                                     │
│  [Отмена] [Сохранить]               │
└─────────────────────────────────────┘
```

**Выбор:** "Работа завершена полностью"

**Результат:** Статус меняется на `COMPLETED`

### **Шаг 3: Итоговые расчеты**
**Система суммирует все сессии:**

```
💰 Итоговые расчеты
┌─────────────────────────────────────┐
│  📊 Детализация оплаты:             │
│                                     │
│  Сессия 1:                          │
│  • Обычные часы: 2 × 700 = 1400 ₽   │
│  • Автомобиль: 300 ₽                │
│  • Итого: 1700 ₽                    │
│                                     │
│  Сессия 2:                          │
│  • Обычные часы: 1 × 700 = 700 ₽    │
│  • Автомобиль: 0 ₽                  │
│  • Итого: 700 ₽                     │
│                                     │
│  💰 Общая оплата инженеру: 2400 ₽   │
│  💰 Оплата от организации: 3000 ₽   │
│  💰 Прибыль: 600 ₽                  │
└─────────────────────────────────────┘
```

---

## 🔄 **Сценарий 6: Переназначение инженера**

### **Шаг 1: Переназначение заказа (ADMIN)**
**Пользователь:** ADMIN  
**Действие:** Переназначение заказа другому инженеру

```
📋 Список заказов
┌─────────────────────────────────────┐
│  №  Название              Статус    │
│  3  Обслуживание кофемашины         │
│     👤 Назначен                     │
│     👤 Иван Инженеров               │
│     [🔄 Переназначить] [✏️]         │
└─────────────────────────────────────┘
```

**Клик на "Переназначить":**

```
👤 Диалог переназначения
┌─────────────────────────────────────┐
│  🔄 Переназначить инженера          │
│                                     │
│  📋 Обслуживание кофемашины         │
│  Организация: ООО Кофейная Компания │
│  Статус: Назначен                   │
│                                     │
│  👤 Текущий инженер: Иван Инженеров │
│                                     │
│  Выберите нового инженера:          │
│  [Петр Специалистов (engineer2@coffee.com) ▼] │
│                                     │
│  [Отмена] [Переназначить]           │
└─────────────────────────────────────┘
```

**Результат:** Заказ переназначен Петру Специалистову

### **Шаг 2: Уведомления**
**Пользователь:** Иван Инженеров  
**Действие:** Получение уведомления о переназначении

```
🔔 Уведомление
┌─────────────────────────────────────┐
│  ℹ️ Заказ переназначен              │
│                                     │
│  Заказ "Обслуживание кофемашины"    │
│  был переназначен другому инженеру  │
│                                     │
│  [Закрыть]                          │
└─────────────────────────────────────┘
```

**Пользователь:** Петр Специалистов  
**Действие:** Получение уведомления о новом назначении

```
🔔 Уведомление
┌─────────────────────────────────────┐
│  🎯 Новый заказ назначен            │
│                                     │
│  Заказ "Обслуживание кофемашины"    │
│  назначен на вас                    │
│                                     │
│  [Посмотреть] [Закрыть]             │
└─────────────────────────────────────┘
```

---

## ✏️ **Сценарий 7: Редактирование завершенного заказа**

### **Шаг 1: Редактирование в течение 24 часов**
**Пользователь:** ADMIN  
**Действие:** Редактирование завершенного заказа

```
📋 Список заказов
┌─────────────────────────────────────┐
│  №  Название              Статус    │
│  1  Ремонт кофемашины     ✅ Завершен │
│     Москва, ул. Деловая, 15         │
│     👤 Иван Инженеров               │
│     [✏️ Редактировать (24ч)] [👁️]   │
└─────────────────────────────────────┘
```

**Клик на "Редактировать (24ч)":**

```
✏️ Редактирование завершенного заказа
┌─────────────────────────────────────┐
│  ⚠️ Редактирование завершенного заказа │
│                                     │
│  Заказ завершен: 2 часа назад       │
│  Доступно для редактирования: 22 часа │
│                                     │
│  Название: [Ремонт кофемашины]      │
│  Описание: [Необходимо заменить     ] │
│            [помпу в кофемашине     ] │
│                                     │
│  ⏱ Время работы:                    │
│  Обычные часы: [4] часов            │
│  Сверхурочные часы: [1] часов       │
│                                     │
│  💰 Оплата:                         │
│  Инженеру: 4350 ₽                   │
│  От организации: 5500 ₽             │
│  Прибыль: 1150 ₽                    │
│                                     │
│  [Отмена] [Сохранить]               │
└─────────────────────────────────────┘
```

### **Шаг 2: Изменение времени работы**
**Пользователь:** ADMIN  
**Действие:** Корректировка времени работы

**Изменения:**
- Обычные часы: 4 → 5
- Сверхурочные часы: 1 → 0

**Результат:** Автоматический пересчет оплаты

```
💰 Пересчет оплаты
┌─────────────────────────────────────┐
│  📊 Новые расчеты:                  │
│                                     │
│  Инженер:                           │
│  • Обычные часы: 5 × 700 = 3500 ₽   │
│  • Сверхурочные: 0 × 1050 = 0 ₽     │
│  • Автомобиль: 500 ₽                │
│  • Итого инженеру: 4000 ₽           │
│                                     │
│  Организация:                       │
│  • Обычные часы: 5 × 1000 = 5000 ₽   │
│  • Сверхурочные: 0 × 1500 = 0 ₽     │
│  • Итого от организации: 5000 ₽     │
│                                     │
│  💰 Прибыль: 5000 - 4000 = 1000 ₽   │
│                                     │
│  📉 Изменение прибыли: -150 ₽       │
└─────────────────────────────────────┘
```

### **Шаг 3: После 24 часов**
**Пользователь:** ADMIN  
**Действие:** Попытка редактирования после 24 часов

```
❌ Ошибка редактирования
┌─────────────────────────────────────┐
│  ⚠️ Редактирование недоступно       │
│                                     │
│  Заказ завершен более 24 часов назад │
│  Редактирование заблокировано      │
│                                     │
│  Для изменений обратитесь к        │
│  системному администратору         │
│                                     │
│  [Закрыть]                          │
└─────────────────────────────────────┘
```

---

## 📎 **Сценарий 8: Работа с файлами**

### **Шаг 1: Загрузка файлов при создании заказа**
**Пользователь:** ADMIN  
**Действие:** Создание заказа с файлами

```
📝 Создание заказа с файлами
┌─────────────────────────────────────┐
│  ✏️ Создать новый заказ             │
│                                     │
│  Название: [Диагностика кофемашины] │
│  Описание: [Необходимо провести      ] │
│            [диагностику и ремонт    ] │
│                                     │
│  📎 Файлы:                          │
│  ┌─────────────────────────────────┐ │
│  │ 📄 manual.pdf (2.3 MB)         │ │
│  │ 📷 photo1.jpg (1.1 MB)         │ │
│  │ 📷 photo2.jpg (0.8 MB)         │ │
│  │ [🗑️] [👁️] [⬇️]                │ │
│  └─────────────────────────────────┘ │
│                                     │
│  [Отмена] [Создать]                 │
└─────────────────────────────────────┘
```

### **Шаг 2: Просмотр файлов**
**Пользователь:** ADMIN  
**Действие:** Просмотр прикрепленных файлов

```
📎 Просмотр файлов
┌─────────────────────────────────────┐
│  📎 Прикрепленные файлы             │
│                                     │
│  📄 manual.pdf                     │
│  Размер: 2.3 MB                    │
│  Загружен: 14:30                   │
│  [👁️ Просмотр] [⬇️ Скачать] [🗑️]   │
│                                     │
│  📷 photo1.jpg                     │
│  Размер: 1.1 MB                    │
│  Загружен: 14:30                   │
│  [👁️ Просмотр] [⬇️ Скачать] [🗑️]   │
│                                     │
│  📷 photo2.jpg                     │
│  Размер: 0.8 MB                    │
│  Загружен: 14:30                   │
│  [👁️ Просмотр] [⬇️ Скачать] [🗑️]   │
└─────────────────────────────────────┘
```

### **Шаг 3: Просмотр изображения**
**Пользователь:** ADMIN  
**Действие:** Просмотр изображения в модальном окне

```
🖼️ Просмотр изображения
┌─────────────────────────────────────┐
│  📷 photo1.jpg                    ✕ │
│                                     │
│  ┌─────────────────────────────────┐ │
│  │                                 │ │
│  │        [ИЗОБРАЖЕНИЕ]            │ │
│  │                                 │ │
│  └─────────────────────────────────┘ │
│                                     │
│  Размер: 1.1 MB • JPEG             │
│  [⬇️ Скачать]                        │
└─────────────────────────────────────┘
```

---

## 📊 **Сценарий 9: Статистика и отчеты**

### **Шаг 1: Статистика для ADMIN**
**Пользователь:** ADMIN  
**Действие:** Просмотр детальной статистики

```
📊 Детальная статистика (ADMIN)
┌─────────────────────────────────────┐
│  📊 Статистика по заказам           │
│                                     │
│  📈 По статусам:                    │
│  ⏳ Ожидают: 0                      │
│  👤 Назначены: 1                    │
│  🔧 В работе: 1                     │
│  ✅ Завершено: 2                    │
│                                     │
│  💰 Финансовая статистика:          │
│  • Общая оплата инженерам: 10700 ₽ │
│  • Общая оплата от организаций: 14000 ₽ │
│  • Общая прибыль: 3300 ₽            │
│                                     │
│  👥 По инженерам:                   │
│  • Иван Инженеров: 2 заказа, 6300 ₽ │
│  • Петр Специалистов: 2 заказа, 4400 ₽ │
│                                     │
│  🏢 По организациям:                │
│  • ООО Кофейная Компания: 2 заказа  │
│  • ИП Кофе и Ко: 2 заказа           │
└─────────────────────────────────────┘
```

### **Шаг 2: Экспорт в Excel**
**Пользователь:** ADMIN  
**Действие:** Экспорт данных в Excel

```
📊 Экспорт данных
┌─────────────────────────────────────┐
│  📊 Экспорт заказов                 │
│                                     │
│  Выберите данные для экспорта:     │
│  ☑️ Заказы                          │
│  ☑️ Статистика                      │
│  ☑️ Финансовые данные               │
│                                     │
│  Период:                           │
│  С: [📅 01.01.2024]                │
│  По: [📅 31.12.2024]               │
│                                     │
│  [Отмена] [Экспортировать]         │
└─────────────────────────────────────┘
```

**Результат:** Создан файл `orders_export_2024-01-15.xlsx`

### **Шаг 3: Графики и диаграммы**
**Пользователь:** ADMIN  
**Действие:** Просмотр графиков

```
📊 Графики и диаграммы
┌─────────────────────────────────────┐
│  📊 Распределение по статусам       │
│                                     │
│  🍩 Donut Chart:                   │
│  ┌─────────────────────────────────┐ │
│  │        🟢 Завершено             │ │
│  │           (50%)                 │ │
│  │                                 │ │
│  │  🔵 В работе (25%)              │ │
│  │  🟡 Назначены (25%)             │ │
│  └─────────────────────────────────┘ │
│                                     │
│  📊 Источники заказов               │
│  ┌─────────────────────────────────┐ │
│  │ ████████████████████ Вручную    │ │
│  │ ████████ Автоматически          │ │
│  │ ██ Email                        │ │
│  │ █ API                           │ │
│  └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```

---

## ❌ **Сценарий 10: Ошибки и исключения**

### **Шаг 1: Попытка доступа без прав**
**Пользователь:** Иван Инженеров  
**Действие:** Попытка создать заказ

```
❌ Ошибка доступа
┌─────────────────────────────────────┐
│  ⚠️ Недостаточно прав               │
│                                     │
│  У вас нет прав для создания заказов │
│  Обратитесь к администратору        │
│                                     │
│  [Закрыть]                          │
└─────────────────────────────────────┘
```

### **Шаг 2: Попытка принять чужой заказ**
**Пользователь:** Петр Специалистов  
**Действие:** Попытка принять заказ, назначенный другому инженеру

```
❌ Ошибка доступа
┌─────────────────────────────────────┐
│  ⚠️ Заказ не назначен вам           │
│                                     │
│  Этот заказ назначен другому        │
│  инженеру                           │
│                                     │
│  [Закрыть]                          │
└─────────────────────────────────────┘
```

### **Шаг 3: Попытка удалить заказ в работе**
**Пользователь:** MANAGER  
**Действие:** Попытка удалить заказ в статусе `WORKING`

```
❌ Ошибка удаления
┌─────────────────────────────────────┐
│  ⚠️ Невозможно удалить заказ        │
│                                     │
│  Можно удалять только заказы        │
│  в статусе "Ожидает"                │
│                                     │
│  Текущий статус: "В работе"         │
│                                     │
│  [Закрыть]                          │
└─────────────────────────────────────┘
```

### **Шаг 4: Ошибка валидации**
**Пользователь:** Иван Инженеров  
**Действие:** Попытка сохранить работу с отрицательными часами

```
❌ Ошибка валидации
┌─────────────────────────────────────┐
│  ⚠️ Некорректные данные             │
│                                     │
│  Обычные часы не могут быть         │
│  отрицательными                     │
│                                     │
│  Введите корректное значение        │
│                                     │
│  [Закрыть]                          │
└─────────────────────────────────────┘
```

### **Шаг 5: Ошибка сети**
**Пользователь:** Любой  
**Действие:** Потеря соединения при сохранении

```
❌ Ошибка сети
┌─────────────────────────────────────┐
│  ⚠️ Ошибка соединения               │
│                                     │
│  Не удалось сохранить данные        │
│  Проверьте подключение к интернету  │
│                                     │
│  [Повторить] [Отмена]               │
└─────────────────────────────────────┘
```

---

## 🎯 **Заключение**

Эти сценарии показывают полный цикл работы с системой заказов:

1. **Настройка системы** - создание пользователей, организаций, ставок
2. **Создание заказов** - с файлами и без
3. **Назначение и принятие** - workflow между ролями
4. **Выполнение работы** - полное и частичное
5. **Управление заказами** - редактирование, переназначение
6. **Статистика и отчеты** - для разных ролей
7. **Обработка ошибок** - валидация и права доступа

Система обеспечивает полный контроль над процессом выполнения заказов с детальным отслеживанием времени, оплаты и прибыли.

