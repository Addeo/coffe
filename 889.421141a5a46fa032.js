"use strict";(self.webpackChunkcoffee_admin=self.webpackChunkcoffee_admin||[]).push([[889],{6889:(vt,f,r)=>{r.r(f),r.d(f,{NotificationsComponent:()=>Gt});var t=r(4292),l=r(9351),_=r(7317),C=r(1613),m=r(1488),h=r(9353),E=r(4848),F=r(5822),D=r(4755),p=r(5320),x=r(91),s=r(8598),N=r(8613),d=r(5408),g=r(1084);function b(n,o){1&n&&(t.j41(0,"th",25),t.EFF(1,"\u0422\u0438\u043f"),t.k0s())}function R(n,o){if(1&n&&(t.j41(0,"td",26)(1,"mat-chip",27),t.EFF(2),t.k0s()()),2&n){const i=o.$implicit,e=t.XpG(3);t.R7$(),t.Y8G("color",e.getNotificationTypeColor(i.type)),t.R7$(),t.SpI(" ",e.getNotificationTypeDisplay(i.type)," ")}}function M(n,o){1&n&&(t.qex(0),t.DNE(1,b,2,0,"th",23)(2,R,3,2,"td",24),t.bVm())}function P(n,o){if(1&n&&(t.j41(0,"th",25),t.EFF(1),t.k0s()),2&n){const i=t.XpG(3);t.R7$(),t.SpI(" ",i.columnHeaders.title," ")}}function k(n,o){1&n&&(t.j41(0,"mat-icon",30),t.EFF(1,"fiber_manual_record"),t.k0s())}function T(n,o){if(1&n&&(t.j41(0,"td",26)(1,"div",28)(2,"strong"),t.EFF(3),t.k0s(),t.DNE(4,k,2,0,"mat-icon",29),t.k0s()()),2&n){const i=o.$implicit;t.R7$(3),t.JRh(i.title),t.R7$(),t.Y8G("ngIf","unread"===i.status)}}function O(n,o){1&n&&(t.qex(0),t.DNE(1,P,2,1,"th",23)(2,T,5,2,"td",24),t.bVm())}function $(n,o){if(1&n&&(t.j41(0,"th",32),t.EFF(1),t.k0s()),2&n){const i=t.XpG(3);t.R7$(),t.JRh(i.columnHeaders.message)}}function j(n,o){if(1&n&&(t.j41(0,"td",26)(1,"div",33),t.EFF(2),t.k0s()()),2&n){const i=o.$implicit;t.R7$(2),t.SpI(" ",i.message," ")}}function y(n,o){1&n&&(t.qex(0),t.DNE(1,$,2,1,"th",31)(2,j,3,1,"td",24),t.bVm())}function S(n,o){if(1&n&&(t.j41(0,"th",25),t.EFF(1),t.k0s()),2&n){const i=t.XpG(3);t.R7$(),t.SpI(" ",i.columnHeaders.priority," ")}}function I(n,o){if(1&n&&(t.j41(0,"td",26)(1,"mat-chip",27)(2,"mat-icon"),t.EFF(3),t.k0s(),t.EFF(4),t.k0s()()),2&n){const i=o.$implicit,e=t.XpG(3);t.R7$(),t.Y8G("color",e.getPriorityColor(i.priority)),t.R7$(2),t.JRh(e.getPriorityIcon(i.priority)),t.R7$(),t.SpI(" ",i.priority.toUpperCase()," ")}}function G(n,o){1&n&&(t.qex(0),t.DNE(1,S,2,1,"th",23)(2,I,5,3,"td",24),t.bVm())}function v(n,o){if(1&n&&(t.j41(0,"th",25),t.EFF(1),t.k0s()),2&n){const i=t.XpG(3);t.R7$(),t.SpI(" ",i.columnHeaders.created," ")}}function w(n,o){if(1&n&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&n){const i=o.$implicit,e=t.XpG(3);t.R7$(),t.SpI(" ",e.formatDate(i.createdAt)," ")}}function A(n,o){1&n&&(t.qex(0),t.DNE(1,v,2,1,"th",23)(2,w,2,1,"td",24),t.bVm())}function Y(n,o){if(1&n&&(t.j41(0,"th",32),t.EFF(1),t.k0s()),2&n){const i=t.XpG(3);t.R7$(),t.JRh(i.columnHeaders.actions)}}function B(n,o){if(1&n){const i=t.RV6();t.j41(0,"button",36),t.bIt("click",function(){t.eBV(i);const a=t.XpG().$implicit,c=t.XpG(3);return t.Njj(c.onMarkAsRead(a))}),t.j41(1,"mat-icon"),t.EFF(2,"mark_email_read"),t.k0s(),t.j41(3,"span"),t.EFF(4,"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u043a\u0430\u043a \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u043d\u043d\u043e\u0435"),t.k0s()()}}function V(n,o){if(1&n){const i=t.RV6();t.j41(0,"button",36),t.bIt("click",function(){t.eBV(i);const a=t.XpG().$implicit,c=t.XpG(3);return t.Njj(c.onMarkAsUnread(a))}),t.j41(1,"mat-icon"),t.EFF(2,"mark_email_unread"),t.k0s(),t.j41(3,"span"),t.EFF(4,"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u043a\u0430\u043a \u043d\u0435\u043f\u0440\u043e\u0447\u0438\u0442\u0430\u043d\u043d\u043e\u0435"),t.k0s()()}}function X(n,o){if(1&n){const i=t.RV6();t.j41(0,"td",26)(1,"button",34)(2,"mat-icon"),t.EFF(3,"more_vert"),t.k0s()(),t.j41(4,"mat-menu",null,0),t.DNE(6,B,5,0,"button",35)(7,V,5,0,"button",35),t.j41(8,"button",36),t.bIt("click",function(){const a=t.eBV(i).$implicit,c=t.XpG(3);return t.Njj(c.onDeleteNotification(a))}),t.j41(9,"mat-icon"),t.EFF(10,"delete"),t.k0s(),t.j41(11,"span"),t.EFF(12,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),t.k0s()()()()}if(2&n){const i=o.$implicit,e=t.sdS(5);t.R7$(),t.Y8G("matMenuTriggerFor",e),t.R7$(5),t.Y8G("ngIf","unread"===i.status),t.R7$(),t.Y8G("ngIf","read"===i.status)}}function L(n,o){1&n&&(t.qex(0),t.DNE(1,Y,2,1,"th",31)(2,X,13,3,"td",24),t.bVm())}function U(n,o){if(1&n&&(t.qex(0,21),t.DNE(1,M,3,0,"ng-container",22)(2,O,3,0,"ng-container",22)(3,y,3,0,"ng-container",22)(4,G,3,0,"ng-container",22)(5,A,3,0,"ng-container",22)(6,L,3,0,"ng-container",22),t.bVm()),2&n){const i=o.$implicit;t.Y8G("matColumnDef",i),t.R7$(),t.Y8G("ngIf","type"===i),t.R7$(),t.Y8G("ngIf","title"===i),t.R7$(),t.Y8G("ngIf","message"===i),t.R7$(),t.Y8G("ngIf","priority"===i),t.R7$(),t.Y8G("ngIf","createdAt"===i),t.R7$(),t.Y8G("ngIf","actions"===i)}}function W(n,o){1&n&&t.nrm(0,"tr",37)}function H(n,o){1&n&&t.nrm(0,"tr",38)}function K(n,o){if(1&n&&(t.j41(0,"th",32),t.EFF(1),t.k0s()),2&n){const i=t.XpG(3);t.R7$(),t.JRh(i.columnHeaders.type)}}function J(n,o){if(1&n&&(t.j41(0,"td",26)(1,"mat-chip",27),t.EFF(2),t.k0s()()),2&n){const i=o.$implicit,e=t.XpG(3);t.R7$(),t.Y8G("color",e.getNotificationTypeColor(i.type)),t.R7$(),t.SpI(" ",e.getNotificationTypeDisplay(i.type)," ")}}function Q(n,o){1&n&&(t.qex(0),t.DNE(1,K,2,1,"th",31)(2,J,3,2,"td",24),t.bVm())}function q(n,o){1&n&&(t.j41(0,"th",32),t.EFF(1,"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"),t.k0s())}function z(n,o){if(1&n&&(t.j41(0,"td",26)(1,"div",28)(2,"strong"),t.EFF(3),t.k0s(),t.j41(4,"mat-icon",30),t.EFF(5,"fiber_manual_record"),t.k0s()()()),2&n){const i=o.$implicit;t.R7$(3),t.JRh(i.title)}}function Z(n,o){1&n&&(t.qex(0),t.DNE(1,q,2,0,"th",31)(2,z,6,1,"td",24),t.bVm())}function tt(n,o){1&n&&(t.j41(0,"th",32),t.EFF(1,"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"),t.k0s())}function nt(n,o){if(1&n&&(t.j41(0,"td",26)(1,"div",33),t.EFF(2),t.k0s()()),2&n){const i=o.$implicit;t.R7$(2),t.SpI(" ",i.message," ")}}function it(n,o){1&n&&(t.qex(0),t.DNE(1,tt,2,0,"th",31)(2,nt,3,1,"td",24),t.bVm())}function ot(n,o){1&n&&(t.j41(0,"th",32),t.EFF(1,"\u041f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442"),t.k0s())}function et(n,o){if(1&n&&(t.j41(0,"td",26)(1,"mat-chip",27)(2,"mat-icon"),t.EFF(3),t.k0s(),t.EFF(4),t.k0s()()),2&n){const i=o.$implicit,e=t.XpG(3);t.R7$(),t.Y8G("color",e.getPriorityColor(i.priority)),t.R7$(2),t.JRh(e.getPriorityIcon(i.priority)),t.R7$(),t.SpI(" ",i.priority.toUpperCase()," ")}}function at(n,o){1&n&&(t.qex(0),t.DNE(1,ot,2,0,"th",31)(2,et,5,3,"td",24),t.bVm())}function ct(n,o){1&n&&(t.j41(0,"th",32),t.EFF(1,"\u0421\u043e\u0437\u0434\u0430\u043d\u043e"),t.k0s())}function rt(n,o){if(1&n&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&n){const i=o.$implicit,e=t.XpG(3);t.R7$(),t.SpI(" ",e.formatDate(i.createdAt)," ")}}function _t(n,o){1&n&&(t.qex(0),t.DNE(1,ct,2,0,"th",31)(2,rt,2,1,"td",24),t.bVm())}function ut(n,o){if(1&n&&(t.j41(0,"th",32),t.EFF(1),t.k0s()),2&n){const i=t.XpG(3);t.R7$(),t.JRh(i.columnHeaders.actions)}}function st(n,o){if(1&n){const i=t.RV6();t.j41(0,"td",26)(1,"button",34)(2,"mat-icon"),t.EFF(3,"more_vert"),t.k0s()(),t.j41(4,"mat-menu",null,0)(6,"button",36),t.bIt("click",function(){const a=t.eBV(i).$implicit,c=t.XpG(3);return t.Njj(c.onMarkAsRead(a))}),t.j41(7,"mat-icon"),t.EFF(8,"mark_email_read"),t.k0s(),t.j41(9,"span"),t.EFF(10,"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u043a\u0430\u043a \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u043d\u043d\u043e\u0435"),t.k0s()(),t.j41(11,"button",36),t.bIt("click",function(){const a=t.eBV(i).$implicit,c=t.XpG(3);return t.Njj(c.onDeleteNotification(a))}),t.j41(12,"mat-icon"),t.EFF(13,"delete"),t.k0s(),t.j41(14,"span"),t.EFF(15,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),t.k0s()()()()}if(2&n){const i=t.sdS(5);t.R7$(),t.Y8G("matMenuTriggerFor",i)}}function lt(n,o){1&n&&(t.qex(0),t.DNE(1,ut,2,1,"th",31)(2,st,16,1,"td",24),t.bVm())}function mt(n,o){if(1&n&&(t.qex(0,21),t.DNE(1,Q,3,0,"ng-container",22)(2,Z,3,0,"ng-container",22)(3,it,3,0,"ng-container",22)(4,at,3,0,"ng-container",22)(5,_t,3,0,"ng-container",22)(6,lt,3,0,"ng-container",22),t.bVm()),2&n){const i=o.$implicit;t.Y8G("matColumnDef",i),t.R7$(),t.Y8G("ngIf","type"===i),t.R7$(),t.Y8G("ngIf","title"===i),t.R7$(),t.Y8G("ngIf","message"===i),t.R7$(),t.Y8G("ngIf","priority"===i),t.R7$(),t.Y8G("ngIf","createdAt"===i),t.R7$(),t.Y8G("ngIf","actions"===i)}}function dt(n,o){1&n&&t.nrm(0,"tr",37)}function ft(n,o){1&n&&t.nrm(0,"tr",38)}function pt(n,o){if(1&n&&(t.j41(0,"th",32),t.EFF(1),t.k0s()),2&n){const i=t.XpG(3);t.R7$(),t.JRh(i.columnHeaders.type)}}function gt(n,o){if(1&n&&(t.j41(0,"td",26)(1,"mat-chip",27),t.EFF(2),t.k0s()()),2&n){const i=o.$implicit,e=t.XpG(3);t.R7$(),t.Y8G("color",e.getNotificationTypeColor(i.type)),t.R7$(),t.SpI(" ",e.getNotificationTypeDisplay(i.type)," ")}}function Ct(n,o){1&n&&(t.qex(0),t.DNE(1,pt,2,1,"th",31)(2,gt,3,2,"td",24),t.bVm())}function ht(n,o){1&n&&(t.j41(0,"th",32),t.EFF(1,"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"),t.k0s())}function Et(n,o){if(1&n&&(t.j41(0,"td",26)(1,"strong"),t.EFF(2),t.k0s()()),2&n){const i=o.$implicit;t.R7$(2),t.JRh(i.title)}}function Ft(n,o){1&n&&(t.qex(0),t.DNE(1,ht,2,0,"th",31)(2,Et,3,1,"td",24),t.bVm())}function Dt(n,o){1&n&&(t.j41(0,"th",32),t.EFF(1,"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"),t.k0s())}function xt(n,o){if(1&n&&(t.j41(0,"td",26)(1,"div",33),t.EFF(2),t.k0s()()),2&n){const i=o.$implicit;t.R7$(2),t.SpI(" ",i.message," ")}}function Nt(n,o){1&n&&(t.qex(0),t.DNE(1,Dt,2,0,"th",31)(2,xt,3,1,"td",24),t.bVm())}function bt(n,o){1&n&&(t.j41(0,"th",32),t.EFF(1,"\u041f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442"),t.k0s())}function Rt(n,o){if(1&n&&(t.j41(0,"td",26)(1,"mat-chip",27)(2,"mat-icon"),t.EFF(3),t.k0s(),t.EFF(4),t.k0s()()),2&n){const i=o.$implicit,e=t.XpG(3);t.R7$(),t.Y8G("color",e.getPriorityColor(i.priority)),t.R7$(2),t.JRh(e.getPriorityIcon(i.priority)),t.R7$(),t.SpI(" ",i.priority.toUpperCase()," ")}}function Mt(n,o){1&n&&(t.qex(0),t.DNE(1,bt,2,0,"th",31)(2,Rt,5,3,"td",24),t.bVm())}function Pt(n,o){1&n&&(t.j41(0,"th",32),t.EFF(1,"\u0421\u043e\u0437\u0434\u0430\u043d\u043e"),t.k0s())}function kt(n,o){if(1&n&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&n){const i=o.$implicit,e=t.XpG(3);t.R7$(),t.SpI(" ",e.formatDate(i.createdAt)," ")}}function Tt(n,o){1&n&&(t.qex(0),t.DNE(1,Pt,2,0,"th",31)(2,kt,2,1,"td",24),t.bVm())}function Ot(n,o){if(1&n&&(t.j41(0,"th",32),t.EFF(1),t.k0s()),2&n){const i=t.XpG(3);t.R7$(),t.JRh(i.columnHeaders.actions)}}function $t(n,o){if(1&n){const i=t.RV6();t.j41(0,"td",26)(1,"button",34)(2,"mat-icon"),t.EFF(3,"more_vert"),t.k0s()(),t.j41(4,"mat-menu",null,0)(6,"button",36),t.bIt("click",function(){const a=t.eBV(i).$implicit,c=t.XpG(3);return t.Njj(c.onMarkAsUnread(a))}),t.j41(7,"mat-icon"),t.EFF(8,"mark_email_unread"),t.k0s(),t.j41(9,"span"),t.EFF(10,"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u043a\u0430\u043a \u043d\u0435\u043f\u0440\u043e\u0447\u0438\u0442\u0430\u043d\u043d\u043e\u0435"),t.k0s()(),t.j41(11,"button",36),t.bIt("click",function(){const a=t.eBV(i).$implicit,c=t.XpG(3);return t.Njj(c.onDeleteNotification(a))}),t.j41(12,"mat-icon"),t.EFF(13,"delete"),t.k0s(),t.j41(14,"span"),t.EFF(15,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),t.k0s()()()()}if(2&n){const i=t.sdS(5);t.R7$(),t.Y8G("matMenuTriggerFor",i)}}function jt(n,o){1&n&&(t.qex(0),t.DNE(1,Ot,2,1,"th",31)(2,$t,16,1,"td",24),t.bVm())}function yt(n,o){if(1&n&&(t.qex(0,21),t.DNE(1,Ct,3,0,"ng-container",22)(2,Ft,3,0,"ng-container",22)(3,Nt,3,0,"ng-container",22)(4,Mt,3,0,"ng-container",22)(5,Tt,3,0,"ng-container",22)(6,jt,3,0,"ng-container",22),t.bVm()),2&n){const i=o.$implicit;t.Y8G("matColumnDef",i),t.R7$(),t.Y8G("ngIf","type"===i),t.R7$(),t.Y8G("ngIf","title"===i),t.R7$(),t.Y8G("ngIf","message"===i),t.R7$(),t.Y8G("ngIf","priority"===i),t.R7$(),t.Y8G("ngIf","createdAt"===i),t.R7$(),t.Y8G("ngIf","actions"===i)}}function St(n,o){1&n&&t.nrm(0,"tr",37)}function It(n,o){1&n&&t.nrm(0,"tr",38)}let Gt=(()=>{class n{constructor(){this.notificationsService=(0,t.WQX)(E.I),this.authService=(0,t.WQX)(F.u),this.toastService=(0,t.WQX)(D.f),this.allDataSource=new _.I6,this.unreadDataSource=new _.I6,this.readDataSource=new _.I6,this.isLoading=(0,t.vPA)(!1),this.selectedTabIndex=(0,t.vPA)(0),this.searchQuery=(0,t.vPA)(""),this.displayedColumns=["type","title","message","priority","createdAt","actions"],this.columnHeaders={type:"\u0422\u0438\u043f",title:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",message:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",priority:"\u041f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442",created:"\u0421\u043e\u0437\u0434\u0430\u043d\u043e",actions:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"};const i=(e,a)=>{if(!a)return!0;const c=a.toLowerCase();return e.title.toLowerCase().includes(c)||e.message.toLowerCase().includes(c)||e.type.toLowerCase().includes(c)};this.allDataSource.filterPredicate=i,this.unreadDataSource.filterPredicate=i,this.readDataSource.filterPredicate=i,(0,t.QZP)(()=>{const e=this.searchQuery(),a=this.getCurrentDataSource();a.filter=e.trim().toLowerCase(),a.paginator&&a.paginator.firstPage()})}ngOnInit(){this.loadNotifications()}ngAfterViewInit(){this.onTabChange(this.selectedTabIndex())}loadNotifications(){this.isLoading.set(!0),this.notificationsService.getNotifications(1,100).subscribe({next:i=>{const e=i.notifications,a=e.filter(u=>"unread"===u.status),c=e.filter(u=>"read"===u.status);this.allDataSource.data=e,this.unreadDataSource.data=a,this.readDataSource.data=c,this.isLoading.set(!1)},error:i=>{console.error("Failed to load notifications:",i),this.toastService.showError("Failed to load notifications"),this.isLoading.set(!1)}})}onTabChange(i){this.selectedTabIndex.set(i);const e=this.getCurrentDataSource();this.paginator&&(e.paginator=this.paginator),this.sort&&(e.sort=this.sort)}onSearchChange(i){this.searchQuery.set(i)}getCurrentDataSource(){switch(this.selectedTabIndex()){case 0:default:return this.allDataSource;case 1:return this.unreadDataSource;case 2:return this.readDataSource}}onMarkAsRead(i){"read"!==i.status&&this.notificationsService.markAsRead(i.id).subscribe({next:()=>{this.updateNotificationStatus(i.id,"read"),this.toastService.showSuccess("Notification marked as read")},error:e=>{console.error("Failed to mark notification as read:",e),this.toastService.showError("Failed to mark notification as read")}})}onMarkAsUnread(i){"unread"!==i.status&&this.notificationsService.markAsUnread(i.id).subscribe({next:()=>{this.updateNotificationStatus(i.id,"unread"),this.toastService.showSuccess("Notification marked as unread")},error:e=>{console.error("Failed to mark notification as unread:",e),this.toastService.showError("Failed to mark notification as unread")}})}onMarkAllAsRead(){this.notificationsService.markAllAsRead().subscribe({next:()=>{this.updateAllNotificationsStatus("read"),this.toastService.showSuccess("All notifications marked as read")},error:i=>{console.error("Failed to mark all notifications as read:",i),this.toastService.showError("Failed to mark all notifications as read")}})}onDeleteNotification(i){this.toastService.showInfo("Delete notification functionality will be implemented")}updateNotificationStatus(i,e){const a=c=>c.map(u=>u.id===i?{...u,status:e}:u);this.allDataSource.data=a(this.allDataSource.data),this.unreadDataSource.data=a(this.unreadDataSource.data).filter(c=>"unread"===c.status),this.readDataSource.data=a(this.readDataSource.data).filter(c=>"read"===c.status)}updateAllNotificationsStatus(i){const e=a=>a.map(c=>({...c,status:i}));this.allDataSource.data=e(this.allDataSource.data),this.unreadDataSource.data="unread"===i?e([]):[],this.readDataSource.data="read"===i?e(this.allDataSource.data):[]}getPriorityColor(i){return this.notificationsService.getPriorityColor(i)}getPriorityIcon(i){return this.notificationsService.getPriorityIcon(i)}getNotificationTypeColor(i){switch(i){case"order_created_from_email":case"user_activated":return"primary";case"order_created":return"accent";case"order_status_changed":case"user_deactivated":case"system_alert":return"warn";default:return"basic"}}formatDate(i){return new Date(i).toLocaleString("ru-RU",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}getNotificationTypeDisplay(i){return{order_assigned:"\u0417\u0430\u043a\u0430\u0437 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d",order_completed:"\u0417\u0430\u043a\u0430\u0437 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d",order_updated:"\u0417\u0430\u043a\u0430\u0437 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d",system:"\u0421\u0438\u0441\u0442\u0435\u043c\u0430",user:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",admin:"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440",reminder:"\u041d\u0430\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u0435",alert:"\u041f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435",info:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f",success:"\u0423\u0441\u043f\u0435\u0445",error:"\u041e\u0448\u0438\u0431\u043a\u0430",warning:"\u041f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435"}[i]||i.replace(/_/g," ").replace(/\b\w/g,a=>a.toUpperCase())}getUnreadCount(){return this.unreadDataSource.data.length}getReadCount(){return this.readDataSource.data.length}getTotalCount(){return this.allDataSource.data.length}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-notifications"]],viewQuery:function(e,a){if(1&e&&(t.GBs(C.iy,5),t.GBs(m.B4,5)),2&e){let c;t.mGM(c=t.lsd())&&(a.paginator=c.first),t.mGM(c=t.lsd())&&(a.sort=c.first)}},standalone:!0,features:[t.aNF],decls:70,vars:20,consts:[["menu","matMenu"],[1,"notifications-container"],[1,"header-card"],[1,"actions-row"],[1,"stats"],[3,"color"],[1,"action-buttons"],["mat-raised-button","",3,"click","disabled"],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"table-card"],[3,"selectedTabChange"],["label","\u0412\u0441\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f"],[1,"tab-content"],["mat-table","","matSort","",1,"notifications-table",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["label","\u041d\u0435\u043f\u0440\u043e\u0447\u0438\u0442\u0430\u043d\u043d\u044b\u0435"],["label","\u041f\u0440\u043e\u0447\u0438\u0442\u0430\u043d\u043d\u044b\u0435"],[1,"no-data-container"],[1,"no-data-icon"],[3,"matColumnDef"],[4,"ngIf"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["selected","",3,"color"],[1,"title-cell"],["class","unread-indicator",4,"ngIf"],[1,"unread-indicator"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-cell",""],[1,"message-cell"],["mat-icon-button","","aria-label","\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0441 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435\u043c",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,a){1&e&&(t.j41(0,"div",1)(1,"mat-card",2)(2,"mat-card-header")(3,"mat-card-title")(4,"mat-icon"),t.EFF(5,"notifications"),t.k0s(),t.j41(6,"span"),t.EFF(7,"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f"),t.k0s()(),t.j41(8,"mat-card-subtitle"),t.EFF(9,"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0438 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f\u043c\u0438"),t.k0s()(),t.j41(10,"mat-card-content")(11,"div",3)(12,"div",4)(13,"mat-chip",5)(14,"mat-icon"),t.EFF(15,"notifications"),t.k0s(),t.j41(16,"span"),t.EFF(17,"\u0412\u0441\u0435\u0433\u043e"),t.k0s(),t.EFF(18),t.k0s(),t.j41(19,"mat-chip",5)(20,"mat-icon"),t.EFF(21,"mark_email_unread"),t.k0s(),t.j41(22,"span"),t.EFF(23,"\u041d\u0435\u043f\u0440\u043e\u0447\u0438\u0442\u0430\u043d\u043d\u044b\u0435"),t.k0s(),t.EFF(24),t.k0s(),t.j41(25,"mat-chip",5)(26,"mat-icon"),t.EFF(27,"mark_email_read"),t.k0s(),t.j41(28,"span"),t.EFF(29,"\u041f\u0440\u043e\u0447\u0438\u0442\u0430\u043d\u043d\u044b\u0435"),t.k0s(),t.EFF(30),t.k0s()(),t.j41(31,"div",6)(32,"button",7),t.bIt("click",function(){return a.loadNotifications()}),t.j41(33,"mat-icon"),t.EFF(34,"refresh"),t.k0s(),t.j41(35,"span"),t.EFF(36,"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"),t.k0s()(),t.j41(37,"button",8),t.bIt("click",function(){return a.onMarkAllAsRead()}),t.j41(38,"mat-icon"),t.EFF(39,"mark_email_read"),t.k0s(),t.j41(40,"span"),t.EFF(41,"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u0432\u0441\u0435 \u043a\u0430\u043a \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u043d\u043d\u044b\u0435"),t.k0s()()()()()(),t.j41(42,"mat-card",9)(43,"mat-card-content")(44,"mat-tab-group",10),t.bIt("selectedTabChange",function(u){return a.onTabChange(u.index)}),t.j41(45,"mat-tab",11)(46,"div",12)(47,"table",13),t.DNE(48,U,7,7,"ng-container",14)(49,W,1,0,"tr",15)(50,H,1,0,"tr",16),t.k0s()()(),t.j41(51,"mat-tab",17)(52,"div",12)(53,"table",13),t.DNE(54,mt,7,7,"ng-container",14)(55,dt,1,0,"tr",15)(56,ft,1,0,"tr",16),t.k0s()()(),t.j41(57,"mat-tab",18)(58,"div",12)(59,"table",13),t.DNE(60,yt,7,7,"ng-container",14)(61,St,1,0,"tr",15)(62,It,1,0,"tr",16),t.k0s()()()(),t.j41(63,"div",19)(64,"mat-icon",20),t.EFF(65,"notifications_off"),t.k0s(),t.j41(66,"h3"),t.EFF(67,"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b"),t.k0s(),t.j41(68,"p"),t.EFF(69,"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0439 \u0432 \u044d\u0442\u043e\u0439 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438."),t.k0s()()()()()),2&e&&(t.R7$(13),t.Y8G("color","primary"),t.R7$(5),t.SpI(": ",a.getTotalCount()," "),t.R7$(),t.Y8G("color","warn"),t.R7$(5),t.SpI(": ",a.getUnreadCount()," "),t.R7$(),t.Y8G("color","accent"),t.R7$(5),t.SpI(": ",a.getReadCount()," "),t.R7$(2),t.Y8G("disabled",a.isLoading()),t.R7$(5),t.Y8G("disabled",0===a.getUnreadCount()),t.R7$(10),t.Y8G("dataSource",a.allDataSource),t.R7$(),t.Y8G("ngForOf",a.displayedColumns),t.R7$(),t.Y8G("matHeaderRowDef",a.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",a.displayedColumns),t.R7$(3),t.Y8G("dataSource",a.unreadDataSource),t.R7$(),t.Y8G("ngForOf",a.displayedColumns),t.R7$(),t.Y8G("matHeaderRowDef",a.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",a.displayedColumns),t.R7$(3),t.Y8G("dataSource",a.readDataSource),t.R7$(),t.Y8G("ngForOf",a.displayedColumns),t.R7$(),t.Y8G("matHeaderRowDef",a.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",a.displayedColumns))},dependencies:[l.MD,l.Sq,l.bT,h.G,p.$z,p.iY,x.An,s.RN,s.m2,s.MM,s.Lc,s.dh,N.Jl,d.kk,d.fb,d.Cp,_.Zl,_.tL,_.ji,_.cC,_.YV,_.iL,_.KS,_.$R,_.YZ,_.NB,m.B4,m.aE,g.mq,g.T8],styles:[".notifications-container[_ngcontent-%COMP%]{padding:24px;max-width:1400px;margin:0 auto;display:flex;flex-direction:column;gap:24px}.header-card[_ngcontent-%COMP%]   .mat-card-header[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.header-card[_ngcontent-%COMP%]   .mat-card-header[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px}.header-card[_ngcontent-%COMP%]   .actions-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:16px;margin-top:16px}.header-card[_ngcontent-%COMP%]   .actions-row[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap}.header-card[_ngcontent-%COMP%]   .actions-row[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:12px}.table-card[_ngcontent-%COMP%]{flex:1}.table-card[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{padding:24px 0}.table-card[_ngcontent-%COMP%]   .notifications-table[_ngcontent-%COMP%]{width:100%;min-width:800px}.table-card[_ngcontent-%COMP%]   .notifications-table[_ngcontent-%COMP%]   .title-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;max-width:300px}.table-card[_ngcontent-%COMP%]   .notifications-table[_ngcontent-%COMP%]   .title-cell[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.table-card[_ngcontent-%COMP%]   .notifications-table[_ngcontent-%COMP%]   .title-cell[_ngcontent-%COMP%]   .unread-indicator[_ngcontent-%COMP%]{font-size:12px;width:12px;height:12px;color:#1976d2}.table-card[_ngcontent-%COMP%]   .notifications-table[_ngcontent-%COMP%]   .message-cell[_ngcontent-%COMP%]{max-width:400px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.table-card[_ngcontent-%COMP%]   .notifications-table[_ngcontent-%COMP%]   .mat-column-type[_ngcontent-%COMP%]{width:150px}.table-card[_ngcontent-%COMP%]   .notifications-table[_ngcontent-%COMP%]   .mat-column-priority[_ngcontent-%COMP%]{width:120px}.table-card[_ngcontent-%COMP%]   .notifications-table[_ngcontent-%COMP%]   .mat-column-createdAt[_ngcontent-%COMP%]{width:160px}.table-card[_ngcontent-%COMP%]   .notifications-table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]{width:60px;text-align:center}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;gap:16px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:0}.no-data-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:64px 24px;text-align:center;gap:16px}.no-data-container[_ngcontent-%COMP%]   .no-data-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#9e9e9e}.no-data-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#424242;margin:0}.no-data-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:0;max-width:400px}.order-created-from-email[_ngcontent-%COMP%]{background-color:#e8f5e8!important;color:#2e7d32!important}.order-created[_ngcontent-%COMP%]{background-color:#e3f2fd!important;color:#1976d2!important}.order-status-changed[_ngcontent-%COMP%]{background-color:#fff3e0!important;color:#f57c00!important}.user-activated[_ngcontent-%COMP%]{background-color:#f3e5f5!important;color:#7b1fa2!important}.system-alert[_ngcontent-%COMP%]{background-color:#ffebee!important;color:#d32f2f!important}@media (max-width: 768px){.notifications-container[_ngcontent-%COMP%]{padding:16px}.header-card[_ngcontent-%COMP%]   .actions-row[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.header-card[_ngcontent-%COMP%]   .actions-row[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%], .header-card[_ngcontent-%COMP%]   .actions-row[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{justify-content:center}.notifications-table[_ngcontent-%COMP%]{font-size:14px}.notifications-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .notifications-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 4px}.mat-tab-body-content[_ngcontent-%COMP%]{overflow-x:auto}}@media (max-width: 600px){.notifications-container[_ngcontent-%COMP%]{padding:8px}.stats[_ngcontent-%COMP%]{flex-direction:column;align-items:center}}"]})}}return n})()}}]);