<mat-card class="engineer-summary-card">
  <mat-card-header>
    <mat-card-title>
      <mat-icon>dashboard</mat-icon>
      Обзор заказов
    </mat-card-title>
    <div class="header-actions">
      <button
        mat-icon-button
        (click)="previousMonth()"
        matTooltip="Предыдущий месяц"
        class="month-nav-btn"
        aria-label="Предыдущий месяц"
      >
        <mat-icon>chevron_left</mat-icon>
      </button>
      <span class="current-month" *ngIf="summary as data">
        {{ getMonthName(data.month) }} {{ data.year }}
      </span>
      <button
        mat-icon-button
        (click)="nextMonth()"
        matTooltip="Следующий месяц"
        class="month-nav-btn"
        aria-label="Следующий месяц"
      >
        <mat-icon>chevron_right</mat-icon>
      </button>
    </div>
  </mat-card-header>

  <mat-card-content>
    <div class="engineer-summary-grid">
      <div class="summary-item">
        <div class="item-header">
          <mat-icon color="primary">payments</mat-icon>
          <div>
            <div class="item-label">Заработано</div>
            <div class="item-value">
              {{ summary.earnedAmount | currency:'RUB':'symbol':'1.0-0':'ru-RU' }}
              <span class="item-plan">
                / {{ summary.planEarnings | currency:'RUB':'symbol':'1.0-0':'ru-RU' }}
              </span>
            </div>
            <div class="item-subvalue">
              С учётом автомобиля:
              {{ totalEarned | currency:'RUB':'symbol':'1.0-0':'ru-RU' }}
            </div>
          </div>
        </div>
        <mat-progress-bar mode="determinate" [value]="earningsProgress"></mat-progress-bar>
      </div>

      <div class="summary-item">
        <div class="item-header">
          <mat-icon color="accent">schedule</mat-icon>
          <div>
            <div class="item-label">Отработано часов</div>
            <div class="item-value">
              {{ summary.workedHours | number:'1.0-1' }} / {{ summary.planHours | number:'1.0-1' }}
            </div>
          </div>
        </div>
        <mat-progress-bar mode="determinate" [value]="hoursProgress"></mat-progress-bar>
      </div>

      <div class="summary-item summary-item--compact">
        <div class="item-header">
          <mat-icon color="warn">directions_car</mat-icon>
          <div>
            <div class="item-label">Выплата за автомобиль</div>
            <div class="item-value">
              {{ summary.carPayments | currency:'RUB':'symbol':'1.0-0':'ru-RU' }}
            </div>
            <div class="item-subvalue" *ngIf="summary.plannedCarAmount">
              План: {{ summary.plannedCarAmount | currency:'RUB':'symbol':'1.0-0':'ru-RU' }}
            </div>
          </div>
        </div>
      </div>
    </div>
  </mat-card-content>
</mat-card>
