<div class="login-container">
  <mat-card class="login-card">
    <mat-card-header>
      <mat-card-title class="login-title" i18n="@@login.title"
        >Панель администратора Coffee</mat-card-title
      >
      <mat-card-subtitle class="login-subtitle" i18n="@@login.subtitle"
        >Пожалуйста, войдите для продолжения</mat-card-subtitle
      >
    </mat-card-header>

    <mat-card-content>
      <form class="login-form">
        <!-- Email Field -->
        <mat-form-field class="full-width">
          <mat-label i18n="@@login.email">Электронная почта</mat-label>
          <input
            type="email"
            matInput
            [formControl]="emailFormControl"
            [errorStateMatcher]="matcher"
            placeholder="Например: admin@coffee.com"
          />
          <mat-hint i18n="@@form.errorsAppearInstantly">Введите email</mat-hint>
          @if (emailFormControl.hasError('email') && !emailFormControl.hasError('required')) {
            <mat-error i18n="@@form.emailInvalid"
              >Пожалуйста, введите корректный email адрес</mat-error
            >
          }
          @if (emailFormControl.hasError('required')) {
            <mat-error i18n="@@form.emailRequired"
              >Электронная почта <strong>обязательна</strong></mat-error
            >
          }
        </mat-form-field>

        <!-- Password Field -->
        <mat-form-field class="full-width">
          <mat-label i18n="@@login.password">Пароль</mat-label>
          <input
            [type]="hidePassword() ? 'password' : 'text'"
            matInput
            [formControl]="passwordFormControl"
            [errorStateMatcher]="matcher"
            placeholder="Введите надежный пароль"
          />
          <button
            mat-icon-button
            matSuffix
            type="button"
            (click)="togglePasswordVisibility()"
            [attr.aria-label]="hidePassword() ? 'Показать пароль' : 'Скрыть пароль'"
            [attr.aria-pressed]="!hidePassword()"
          >
            <mat-icon>{{ hidePassword() ? 'visibility_off' : 'visibility' }}</mat-icon>
          </button>
          <mat-hint i18n="@@form.passwordMinLength">Требуется минимум 6 символов</mat-hint>
          @if (
            passwordFormControl.hasError('minlength') && !passwordFormControl.hasError('required')
          ) {
            <mat-error i18n="@@form.passwordTooShort"
              >Пароль должен содержать минимум 6 символов</mat-error
            >
          }
          @if (passwordFormControl.hasError('required')) {
            <mat-error i18n="@@form.passwordRequired">Пароль <strong>обязателен</strong></mat-error>
          }
        </mat-form-field>

        <!-- Submit Button -->
        <button
          mat-raised-button
          color="primary"
          type="button"
          class="login-button"
          (click)="onSubmit()"
          [disabled]="isLoading() || emailFormControl.invalid || passwordFormControl.invalid"
        >
          @if (!isLoading()) {
            <span i18n="@@login.signIn">Войти</span>
          } @else {
            <span>
              <mat-spinner diameter="20" class="spinner"></mat-spinner>
              <span i18n="@@login.signingIn">Вход в систему...</span>
            </span>
          }
        </button>
      </form>
    </mat-card-content>

    <!-- App Version -->
    <mat-card-footer class="version-footer">
      <div class="version-info">
        <span class="version-text">Версия: {{ appVersion() }}</span>
      </div>
    </mat-card-footer>
  </mat-card>
</div>
