<div class="settings-container">
  <div class="header">
    <h1 i18n="@@settings.title">System Settings</h1>
    <p i18n="@@settings.subtitle">Configure system-wide settings and preferences</p>
  </div>

  <form [formGroup]="settingsForm" (ngSubmit)="saveSettings()">
    <div class="settings-grid">
      <!-- General Settings -->
      <mat-card class="settings-section">
        <mat-card-header>
          <mat-card-title i18n="@@settings.generalSettings">General Settings</mat-card-title>
        </mat-card-header>

        <mat-card-content>
          <mat-form-field appearance="outline" class="form-field">
            <mat-label i18n="@@settings.siteName">Site Name</mat-label>
            <input matInput formControlName="siteName" />
          </mat-form-field>

          <mat-form-field appearance="outline" class="form-field">
            <mat-label i18n="@@settings.theme">Theme</mat-label>
            <mat-select formControlName="theme">
              <mat-option *ngFor="let theme of themes" [value]="theme.value">
                {{ theme.label }}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="outline" class="form-field">
            <mat-label i18n="@@settings.language">Language</mat-label>
            <mat-select formControlName="language">
              <mat-option *ngFor="let lang of languages" [value]="lang.value">
                {{ lang.label }}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="outline" class="form-field">
            <mat-label i18n="@@settings.itemsPerPage">Items Per Page</mat-label>
            <input matInput type="number" formControlName="itemsPerPage" />
          </mat-form-field>
        </mat-card-content>
      </mat-card>

      <!-- Notifications -->
      <mat-card class="settings-section">
        <mat-card-header>
          <mat-card-title i18n="@@settings.notifications">Notifications</mat-card-title>
        </mat-card-header>

        <mat-card-content>
          <div class="toggle-setting">
            <span i18n="@@settings.emailNotifications">Email Notifications</span>
            <mat-slide-toggle formControlName="emailNotifications"></mat-slide-toggle>
          </div>

          <div class="toggle-setting">
            <span i18n="@@settings.pushNotifications">Push Notifications</span>
            <mat-slide-toggle formControlName="pushNotifications"></mat-slide-toggle>
          </div>
        </mat-card-content>
      </mat-card>

      <!-- System Settings -->
      <mat-card class="settings-section">
        <mat-card-header>
          <mat-card-title i18n="@@settings.systemPreferences">System Preferences</mat-card-title>
        </mat-card-header>

        <mat-card-content>
          <div class="toggle-setting">
            <span i18n="@@settings.autoSave">Auto Save</span>
            <mat-slide-toggle formControlName="autoSave"></mat-slide-toggle>
          </div>

          <mat-form-field appearance="outline" class="form-field">
            <mat-label i18n="@@settings.timezone">Timezone</mat-label>
            <input matInput formControlName="timezone" />
          </mat-form-field>
        </mat-card-content>
      </mat-card>

      <!-- Actions -->
      <mat-card class="settings-section actions-section">
        <mat-card-header>
          <mat-card-title i18n="@@settings.actions">Actions</mat-card-title>
        </mat-card-header>

        <mat-card-content>
          <div class="action-buttons">
            <button
              mat-raised-button
              color="primary"
              type="submit"
              [disabled]="isLoading() || settingsForm.invalid"
            >
              <mat-icon *ngIf="isLoading()">refresh</mat-icon>
              <mat-icon *ngIf="!isLoading()">save</mat-icon>
              {{ isLoading() ? 'Сохранение...' : 'Сохранить настройки' }}
            </button>

            <button mat-button type="button" (click)="resetToDefaults()">
              <mat-icon>restore</mat-icon>
              <span i18n="@@settings.resetToDefaults">Reset to Defaults</span>
            </button>

            <button mat-button type="button" (click)="exportSettings()">
              <mat-icon>download</mat-icon>
              <span i18n="@@settings.exportSettings">Export Settings</span>
            </button>

            <button mat-button type="button" (click)="importSettings()">
              <mat-icon>upload</mat-icon>
              <span i18n="@@settings.importSettings">Import Settings</span>
            </button>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </form>
</div>
