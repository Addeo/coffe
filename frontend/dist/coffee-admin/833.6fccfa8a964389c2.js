"use strict";(self.webpackChunkcoffee_admin=self.webpackChunkcoffee_admin||[]).push([[833],{5833:(L,c,n)=>{n.r(c),n.d(c,{LoginComponent:()=>x,MyErrorStateMatcher:()=>p});var o=n(4292),_=n(9351),r=n(7199),f=n(1240),s=n(8598),d=n(6721),g=n(3505),m=n(5320),h=n(91),u=n(8497),C=n(5822),E=n(4755);function b(e,i){1&e&&(o.j41(0,"mat-error"),o.EFF(1,"Please enter a valid email address"),o.k0s())}function v(e,i){1&e&&(o.j41(0,"mat-error"),o.EFF(1,"Email is "),o.j41(2,"strong"),o.EFF(3,"required"),o.k0s()())}function M(e,i){1&e&&(o.j41(0,"mat-error"),o.EFF(1,"Password must be at least 6 characters long"),o.k0s())}function P(e,i){1&e&&(o.j41(0,"mat-error"),o.EFF(1,"Password is "),o.j41(2,"strong"),o.EFF(3,"required"),o.k0s()())}function F(e,i){1&e&&(o.j41(0,"span"),o.EFF(1,"Sign In"),o.k0s())}function w(e,i){1&e&&(o.j41(0,"span"),o.nrm(1,"mat-spinner",10),o.EFF(2," Signing in... "),o.k0s())}class p{isErrorState(i){return!(!i||!i.invalid||!i.dirty&&!i.touched)}}let x=(()=>{class e{constructor(){this.fb=(0,o.WQX)(r.ok),this.authService=(0,o.WQX)(C.u),this.router=(0,o.WQX)(f.Ix),this.route=(0,o.WQX)(f.nX),this.toastService=(0,o.WQX)(E.f),this.emailFormControl=new r.MJ("",[r.k0.required,r.k0.email]),this.passwordFormControl=new r.MJ("",[r.k0.required,r.k0.minLength(6)]),this.matcher=new p,this.isLoading=(0,o.vPA)(!1),this.hidePassword=(0,o.vPA)(!0),this.authService.isAuthenticated()&&this.router.navigate(["/dashboard"])}onSubmit(){if(console.log("\u{1f4dd} Form submission started"),console.log("\u{1f4e7} Email valid:",this.emailFormControl.valid,"Value:",this.emailFormControl.value),console.log("\u{1f512} Password valid:",this.passwordFormControl.valid,"Value length:",this.passwordFormControl.value?.length||0),this.emailFormControl.valid&&this.passwordFormControl.valid){this.isLoading.set(!0),console.log("\u2705 Form is valid, sending login request");const l={email:this.emailFormControl.value||"",password:this.passwordFormControl.value||""};console.log("\u{1f4e4} Sending credentials to auth service:",{email:l.email,passwordLength:l.password.length}),this.authService.login(l).subscribe({next:a=>{console.log("\u{1f389} Login component received success response:",a),this.isLoading.set(!1);const t=this.route.snapshot.queryParams.returnUrl||"/dashboard";console.log("\u{1f9ed} Navigating to:",t),this.router.navigate([t]),this.toastService.success("\u0412\u0445\u043e\u0434 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e!")},error:a=>{console.error("\u{1f4a5} Login component received error:",a),this.isLoading.set(!1);let t="Login failed. Please try again.";a.error?.message&&(t=a.error.message),console.log("\u{1f4e2} Showing error message:",t),this.toastService.error(t)}})}else console.log("\u274c Form is invalid, marking fields as touched"),this.emailFormControl.markAsTouched(),this.passwordFormControl.markAsTouched()}togglePasswordVisibility(){this.hidePassword.update(l=>!l)}static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275cmp=o.VBU({type:e,selectors:[["app-login"]],standalone:!0,features:[o.aNF],decls:31,vars:14,consts:[[1,"login-container"],[1,"login-card"],[1,"login-title"],[1,"login-subtitle"],[1,"login-form"],[1,"full-width"],["type","email","matInput","","placeholder","Ex. admin@coffee.com",3,"formControl","errorStateMatcher"],["matInput","","placeholder","Enter your secure password",3,"type","formControl","errorStateMatcher"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["mat-raised-button","","color","primary","type","button",1,"login-button",3,"click","disabled"],["diameter","20",1,"spinner"]],template:function(a,t){1&a&&(o.j41(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title",2),o.EFF(4,"Coffee Admin Panel"),o.k0s(),o.j41(5,"mat-card-subtitle",3),o.EFF(6,"Please sign in to continue"),o.k0s()(),o.j41(7,"mat-card-content")(8,"form",4)(9,"mat-form-field",5)(10,"mat-label"),o.EFF(11,"Email"),o.k0s(),o.nrm(12,"input",6),o.j41(13,"mat-hint"),o.EFF(14,"Errors appear instantly!"),o.k0s(),o.DNE(15,b,2,0,"mat-error")(16,v,4,0,"mat-error"),o.k0s(),o.j41(17,"mat-form-field",5)(18,"mat-label"),o.EFF(19,"Password"),o.k0s(),o.nrm(20,"input",7),o.j41(21,"button",8),o.bIt("click",function(){return t.togglePasswordVisibility()}),o.j41(22,"mat-icon"),o.EFF(23),o.k0s()(),o.j41(24,"mat-hint"),o.EFF(25,"At least 6 characters required"),o.k0s(),o.DNE(26,M,2,0,"mat-error")(27,P,4,0,"mat-error"),o.k0s(),o.j41(28,"button",9),o.bIt("click",function(){return t.onSubmit()}),o.DNE(29,F,2,0,"span")(30,w,3,0),o.k0s()()()()()),2&a&&(o.R7$(12),o.Y8G("formControl",t.emailFormControl)("errorStateMatcher",t.matcher),o.R7$(3),o.vxM(15,t.emailFormControl.hasError("email")&&!t.emailFormControl.hasError("required")?15:-1),o.R7$(),o.vxM(16,t.emailFormControl.hasError("required")?16:-1),o.R7$(4),o.Y8G("type",t.hidePassword()?"password":"text")("formControl",t.passwordFormControl)("errorStateMatcher",t.matcher),o.R7$(),o.BMQ("aria-label",t.hidePassword()?"Show password":"Hide password")("aria-pressed",!t.hidePassword()),o.R7$(2),o.JRh(t.hidePassword()?"visibility_off":"visibility"),o.R7$(3),o.vxM(26,t.passwordFormControl.hasError("minlength")&&!t.passwordFormControl.hasError("required")?26:-1),o.R7$(),o.vxM(27,t.passwordFormControl.hasError("required")?27:-1),o.R7$(),o.Y8G("disabled",t.isLoading()||t.emailFormControl.invalid||t.passwordFormControl.invalid),o.R7$(),o.vxM(29,t.isLoading()?30:29))},dependencies:[_.MD,r.X1,r.qT,r.me,r.BC,r.cb,r.l_,s.Hu,s.RN,s.m2,s.MM,s.Lc,s.dh,d.RG,d.rl,d.nJ,d.MV,d.TL,d.yw,g.fS,g.fg,m.Hl,m.$z,m.iY,h.m_,h.An,u.D6,u.LG],styles:['.login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2,#f093fb);padding:20px;position:relative}.login-container[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:#0000001a;pointer-events:none}.login-card[_ngcontent-%COMP%]{width:100%;max-width:400px;box-shadow:0 20px 40px #00000026;border-radius:16px;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);background:#fffffffa;border:1px solid rgba(255,255,255,.2);position:relative;z-index:1;animation:_ngcontent-%COMP%_slideIn .6s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.login-title[_ngcontent-%COMP%]{text-align:center;font-size:24px;font-weight:600;color:#333;margin-bottom:8px}.login-subtitle[_ngcontent-%COMP%]{text-align:center;color:#666;margin-bottom:32px}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:8px}.login-button[_ngcontent-%COMP%]{width:100%;height:48px;font-size:16px;font-weight:500;border-radius:8px;margin-top:16px}.login-button[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{margin-right:8px}  .mat-mdc-form-field .mat-mdc-text-field-wrapper{background-color:#fffc;border-radius:8px;padding-top:16px}  .mat-mdc-form-field .mdc-notched-outline .mdc-notched-outline__leading,   .mat-mdc-form-field .mdc-notched-outline .mdc-notched-outline__notch,   .mat-mdc-form-field .mdc-notched-outline .mdc-notched-outline__trailing{border-color:#0000001f;border-width:1px}  .mat-mdc-form-field.mat-focused .mdc-notched-outline .mdc-notched-outline__leading,   .mat-mdc-form-field.mat-focused .mdc-notched-outline .mdc-notched-outline__notch,   .mat-mdc-form-field.mat-focused .mdc-notched-outline .mdc-notched-outline__trailing{border-color:#667eea;border-width:2px}  .mat-mdc-form-field .mdc-notched-outline__notch{border-top:none!important}  .mat-mdc-form-field .mat-mdc-form-field-label{top:16px;left:16px;transform-origin:left top;transition:all .15s cubic-bezier(.4,0,.2,1);pointer-events:none;position:absolute;color:#0009;font-size:16px;line-height:1.125;font-weight:400;z-index:1}  .mat-mdc-form-field.mat-focused .mat-mdc-form-field-label,   .mat-mdc-form-field .mat-mdc-form-field-label.mat-mdc-form-field-label-notched{transform:translateY(-8px) scale(.75);color:#667eea}  .mat-mdc-form-field.mat-form-field-has-label .mat-mdc-text-field-wrapper{padding-top:24px}  .mat-mdc-form-field .mat-mdc-input-element{padding:16px;border-radius:8px;font-size:16px;line-height:1.5}  .mat-mdc-form-field .mdc-notched-outline--notched .mdc-notched-outline__notch{border-top:none}  .mat-mdc-form-field.error .mdc-notched-outline__leading,   .mat-mdc-form-field.error .mdc-notched-outline__notch,   .mat-mdc-form-field.error .mdc-notched-outline__trailing{border-color:#f44336}@media (max-width: 480px){.login-container[_ngcontent-%COMP%]{padding:16px}.login-card[_ngcontent-%COMP%]{max-width:100%}.login-title[_ngcontent-%COMP%]{font-size:20px}}']})}}return e})()}}]);