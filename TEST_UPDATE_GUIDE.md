# üß™ –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (1.0.1 ‚Üí 1.0.2)

## üìã –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### –®–∞–≥ 1: –°–æ–±—Ä–∞—Ç—å –æ–±–µ –≤–µ—Ä—Å–∏–∏ APK

```bash
./build-both-versions.sh
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –°–æ–±–∏—Ä–∞–µ—Ç APK –≤–µ—Ä—Å–∏–∏ 1.0.1
- –°–æ–±–∏—Ä–∞–µ—Ç APK –≤–µ—Ä—Å–∏–∏ 1.0.2
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ–±–∞ –≤ `./apk-builds/`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- `./apk-builds/app-debug-1.0.1.apk` - —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è
- `./apk-builds/app-debug-1.0.2.apk` - –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è

---

### –®–∞–≥ 2: –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤–µ—Ä—Å–∏—é 1.0.2 –Ω–∞ —Å–µ—Ä–≤–µ—Ä

```bash
./deploy-apk-v2.sh
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç APK 1.0.2 –Ω–∞ —Å–µ—Ä–≤–µ—Ä –ø–æ –∞–¥—Ä–µ—Å—É `~/coffe/app-debug.apk`
- –û–±–Ω–æ–≤–ª—è–µ—Ç backend –≤–µ—Ä—Å–∏—é –Ω–∞ 1.0.2 (–≤ –∫–æ–¥–µ)

**–í–∞–∂–Ω–æ:** –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å backend!

```bash
# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å backend
cd backend
npm run build

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ docker (–∏–ª–∏ —á–µ—Ä–µ–∑ GitHub Actions)
```

---

### –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤–µ—Ä—Å–∏—é 1.0.1 –Ω–∞ —ç–º—É–ª—è—Ç–æ—Ä

```bash
./install-v1-on-emulator.sh
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–æ–≥–æ —ç–º—É–ª—è—Ç–æ—Ä–∞/—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- –£–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é (–µ—Å–ª–∏ –µ—Å—Ç—å)
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç APK –≤–µ—Ä—Å–∏–∏ 1.0.1

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- Android —ç–º—É–ª—è—Ç–æ—Ä –∑–∞–ø—É—â–µ–Ω –ò–õ–ò
- Android —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ —á–µ—Ä–µ–∑ USB —Å –≤–∫–ª—é—á–µ–Ω–Ω–æ–π –æ—Ç–ª–∞–¥–∫–æ–π

**–î–ª—è –∑–∞–ø—É—Å–∫–∞ —ç–º—É–ª—è—Ç–æ—Ä–∞:**
```bash
# –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —ç–º—É–ª—è—Ç–æ—Ä–æ–≤
emulator -list-avds

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —ç–º—É–ª—è—Ç–æ—Ä
emulator -avd <AVD_NAME>

# –ò–ª–∏ —á–µ—Ä–µ–∑ Android Studio:
# Tools ‚Üí Device Manager ‚Üí Run ‚ñ∂Ô∏è
```

---

### –®–∞–≥ 4: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
./test-update.sh
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å 1.0.1)
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–µ—Ä—Å–∏—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å 1.0.2)
- –ó–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ª–æ–≥–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

---

## üéØ –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

### –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–≤–µ—Ä—Å–∏—è 1.0.1):

1. **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è**
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π:**
   ```
   üì± –¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (native): 1.0.1
   üì° –ü–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞: {version: "1.0.2", ...}
   ‚úÖ –î–æ—Å—Ç—É–ø–Ω–∞ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è: 1.0.2
   ```

3. **–ü–æ—è–≤–ª—è–µ—Ç—Å—è –¥–∏–∞–ª–æ–≥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**
   - –ó–∞–≥–æ–ª–æ–≤–æ–∫: "–î–æ—Å—Ç—É–ø–Ω–∞ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è"
   - –í–µ—Ä—Å–∏—è: "1.0.2"
   - –ö–Ω–æ–ø–∫–∏: "–û–±–Ω–æ–≤–∏—Ç—å" –∏ "–û—Ç–º–µ–Ω–∞"

4. **–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–û–±–Ω–æ–≤–∏—Ç—å":**
   - –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä
   - –°–∫–∞—á–∏–≤–∞–µ—Ç—Å—è APK —Å —Å–µ—Ä–≤–µ—Ä–∞
   - Android –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∏–∞–ª–æ–≥ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é

5. **–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:**
   - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–º–µ–µ—Ç –≤–µ—Ä—Å–∏—é 1.0.2
   - –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ –¥–∏–∞–ª–æ–≥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ù–ï –ø–æ—è–≤–ª—è–µ—Ç—Å—è

---

## üîç –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
```bash
curl http://192.144.12.102:3001/api/app/version
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "version": "1.0.2",
  "downloadUrl": "http://192.144.12.102:3001/app-debug.apk",
  "required": false,
  "releaseNotes": "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∫–ª—é—á–∞–µ—Ç –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫."
}
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å APK:
```bash
curl -I http://192.144.12.102:3001/app-debug.apk
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:** `HTTP 200 OK`

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ:
```bash
adb shell dumpsys package com.coffee.admin | grep versionName
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
- –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ v1.0.1: `versionName=1.0.1`
- –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: `versionName=1.0.2`

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
```bash
# –§–∏–ª—å—Ç—Ä –ø–æ –ª–æ–≥–∞–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
adb logcat | grep -E "Coffee|Update|Version"

# –ò–ª–∏ –≤—Å–µ –ª–æ–≥–∏
adb logcat
```

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "APK file not found"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω
./build-both-versions.sh

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–æ–≤
ls -lh ./apk-builds/
```

### –ü—Ä–æ–±–ª–µ–º–∞: "No devices connected"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
adb devices

# –ï—Å–ª–∏ –ø—É—Å—Ç–æ:
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —ç–º—É–ª—è—Ç–æ—Ä
emulator -avd <AVD_NAME>

# 2. –ò–ª–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏ –≤–∫–ª—é—á–∏—Ç—å USB –æ—Ç–ª–∞–¥–∫—É
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Cannot reach server"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞
ping 192.144.12.102

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å backend
curl http://192.144.12.102:3001/api/health

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API –≤–µ—Ä—Å–∏–∏
curl http://192.144.12.102:3001/api/app/version
```

### –ü—Ä–æ–±–ª–µ–º–∞: "APK not accessible (HTTP 404)"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ó–∞–≥—Ä—É–∑–∏—Ç—å APK –Ω–∞ —Å–µ—Ä–≤–µ—Ä –≤—Ä—É—á–Ω—É—é
scp ./apk-builds/app-debug-1.0.2.apk \
  user1@192.144.12.102:~/coffe/app-debug.apk

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh user1@192.144.12.102 "ls -lh ~/coffe/app-debug.apk"

# –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ nginx –∏–ª–∏ –¥—Ä—É–≥–æ–π —Å–µ—Ä–≤–µ—Ä —Ä–∞–∑–¥–∞–µ—Ç —Ñ–∞–π–ª
```

### –ü—Ä–æ–±–ª–µ–º–∞: –î–∏–∞–ª–æ–≥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –±—ã–ª–∞ –Ω–µ–¥–∞–≤–Ω–æ (–∏–Ω—Ç–µ—Ä–≤–∞–ª 24 —á–∞—Å–∞)
2. –í–µ—Ä—Å–∏–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
3. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –¥–µ–ª–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –ø—Ä–æ–≤–µ—Ä–∫–∏ (—á–µ—Ä–µ–∑ adb)
adb shell pm clear com.coffee.admin

# –ò–ª–∏ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
adb uninstall com.coffee.admin
adb install ./apk-builds/app-debug-1.0.1.apk
```

---

## üìù –ß–µ–∫–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º:
- [ ] –û–±–µ –≤–µ—Ä—Å–∏–∏ —Å–æ–±—Ä–∞–Ω—ã (`./apk-builds/` —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–±–∞ APK)
- [ ] –í–µ—Ä—Å–∏—è 1.0.2 –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- [ ] Backend –æ–±–Ω–æ–≤–ª–µ–Ω –¥–æ –≤–µ—Ä—Å–∏–∏ 1.0.2 –∏ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
- [ ] –≠–º—É–ª—è—Ç–æ—Ä –∑–∞–ø—É—â–µ–Ω –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω

### –í–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
- [ ] –í–µ—Ä—Å–∏—è 1.0.1 —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –Ω–∞ —ç–º—É–ª—è—Ç–æ—Ä–µ
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –î–∏–∞–ª–æ–≥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—è–≤–ª—è–µ—Ç—Å—è
- [ ] –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–û–±–Ω–æ–≤–∏—Ç—å" –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä
- [ ] APK —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è —Å —Å–µ—Ä–≤–µ—Ä–∞
- [ ] Android –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∏–∞–ª–æ–≥ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

### –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–º–µ–µ—Ç –≤–µ—Ä—Å–∏—é 1.0.2
- [ ] –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ –¥–∏–∞–ª–æ–≥ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üé¨ –ü–æ–ª–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π

```bash
# 1. –°–æ–±—Ä–∞—Ç—å –æ–±–µ –≤–µ—Ä—Å–∏–∏
./build-both-versions.sh

# 2. –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
./deploy-apk-v2.sh

# 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å v1.0.1 –Ω–∞ —ç–º—É–ª—è—Ç–æ—Ä
./install-v1-on-emulator.sh

# 4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
./test-update.sh
```

---

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –£—Å–ø–µ—à–Ω—ã–π —Ç–µ—Å—Ç:

```
‚úÖ Installed version: 1.0.1
‚úÖ Server version: 1.0.2
‚úÖ APK accessible
‚úÖ App launched
```

### –í –ª–æ–≥–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```
üì± –¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (native): 1.0.1
üì° –ü–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞: {version: "1.0.2", ...}
‚úÖ –î–æ—Å—Ç—É–ø–Ω–∞ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è: 1.0.2
üì• URL –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è: http://192.144.12.102:3001/app-debug.apk
```

---

–ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é! üöÄ

