"use strict";(self.webpackChunkcoffee_admin=self.webpackChunkcoffee_admin||[]).push([[153],{6573:(M,S,i)=>{i.d(S,{F2:()=>a,Re:()=>e,cD:()=>g,jB:()=>E,kc:()=>d});var e=function(s){return s.WAITING="waiting",s.ASSIGNED="assigned",s.PROCESSING="processing",s.WORKING="working",s.REVIEW="review",s.COMPLETED="completed",s.PAID_TO_ENGINEER="paid_to_engineer",s}(e||{}),E=function(s){return s.WAITING="Waiting",s.ASSIGNED="Assigned",s.PROCESSING="Processing",s.WORKING="In Progress",s.REVIEW="Under Review",s.COMPLETED="Completed",s.PAID_TO_ENGINEER="Paid to Engineer",s}(E||{}),a=function(s){return s.URBAN="urban",s.SUBURBAN="suburban",s.RURAL="rural",s.HOME="home",s.ZONE_1="zone_1",s.ZONE_2="zone_2",s.ZONE_3="zone_3",s}(a||{}),g=function(s){return s.STAFF="staff",s.CONTRACT="contract",s}(g||{}),d=function(s){return s.MANUAL="manual",s.AUTOMATIC="automatic",s.EMAIL="email",s.API="api",s}(d||{})},2153:(M,S,i)=>{i.r(S),i.d(S,{UsersComponent:()=>Ae});var e=i(4292),E=i(9351),a=i(7317),g=i(5320),d=i(91),s=i(1613),r=i(8598),m=i(4165),f=i(1488),p=i(4842),h=i(8613),P=i(6721),U=i(3505),A=i(6093),T=i(8497),k=i(4740),y=i(5822),W=i(4193),w=i(4755),C=i(8200),N=i(6573),O=i(2517);const z=()=>[5,10,20,50];function V(n,_){if(1&n){const t=e.RV6();e.j41(0,"button",27),e.bIt("click",function(){e.eBV(t);const u=e.XpG(2);return e.Njj(u.onCreateUser())}),e.j41(1,"mat-icon"),e.EFF(2,"add"),e.k0s(),e.j41(3,"span"),e.pXf(4,2),e.k0s()()}}function K(n,_){1&n&&(e.j41(0,"div",28)(1,"small"),e.EFF(2,"\u26a0\ufe0f \u041a\u043d\u043e\u043f\u043a\u0430 \u0441\u043a\u0440\u044b\u0442\u0430: \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u043e\u0432"),e.k0s()())}function Y(n,_){if(1&n){const t=e.RV6();e.j41(0,"div",21)(1,"mat-form-field",22)(2,"mat-label"),e.pXf(3,1),e.k0s(),e.j41(4,"input",23),e.bIt("keyup",function(u){e.eBV(t);const c=e.XpG();return e.Njj(c.applyFilter(u))}),e.k0s(),e.j41(5,"mat-icon",24),e.EFF(6,"search"),e.k0s()(),e.DNE(7,V,5,0,"button",25)(8,K,3,0,"div",26),e.k0s()}if(2&n){const t=e.XpG();e.R7$(7),e.Y8G("ngIf",t.canCreateUsers),e.R7$(),e.Y8G("ngIf",!t.canCreateUsers)}}function Q(n,_){1&n&&(e.j41(0,"mat-card")(1,"mat-card-content")(2,"div",29)(3,"mat-icon"),e.EFF(4,"lock"),e.k0s(),e.j41(5,"h3"),e.pXf(6,3),e.k0s(),e.j41(7,"p"),e.pXf(8,4),e.k0s()()()())}function J(n,_){1&n&&(e.j41(0,"div",33),e.nrm(1,"mat-spinner",34),e.j41(2,"p"),e.pXf(3,5),e.k0s()())}function H(n,_){1&n&&(e.j41(0,"th",52),e.pXf(1,6),e.k0s())}function Z(n,_){if(1&n&&(e.j41(0,"td",53),e.EFF(1),e.k0s()),2&n){const t=_.$implicit;e.R7$(),e.JRh(t.id)}}function q(n,_){1&n&&(e.j41(0,"th",52),e.pXf(1,7),e.k0s())}function ee(n,_){if(1&n&&(e.j41(0,"td",53),e.EFF(1),e.k0s()),2&n){const t=_.$implicit;e.R7$(),e.JRh(t.firstName)}}function te(n,_){1&n&&(e.j41(0,"th",52),e.pXf(1,8),e.k0s())}function ne(n,_){if(1&n&&(e.j41(0,"td",53),e.EFF(1),e.k0s()),2&n){const t=_.$implicit;e.R7$(),e.JRh(t.lastName)}}function se(n,_){1&n&&(e.j41(0,"th",52),e.pXf(1,9),e.k0s())}function _e(n,_){if(1&n&&(e.j41(0,"td",53),e.EFF(1),e.k0s()),2&n){const t=_.$implicit;e.R7$(),e.JRh(t.email)}}function oe(n,_){1&n&&(e.j41(0,"th",52),e.pXf(1,10),e.k0s())}function ie(n,_){if(1&n&&(e.j41(0,"td",53)(1,"mat-chip",54),e.EFF(2),e.k0s()()),2&n){const t=_.$implicit,o=e.XpG(3);e.R7$(),e.Y8G("color",o.getStatusColor(!0)),e.R7$(),e.SpI(" ",o.getRoleDisplay(t.role)," ")}}function ue(n,_){1&n&&(e.j41(0,"th",52),e.pXf(1,11),e.k0s())}function ae(n,_){if(1&n&&(e.j41(0,"mat-chip",57),e.EFF(1),e.k0s()),2&n){const t=e.XpG().$implicit,o=e.XpG(3);e.R7$(),e.SpI(" ",o.getEngineerTypeDisplay(t.engineer.type)," ")}}function re(n,_){1&n&&(e.j41(0,"span",58),e.EFF(1,"\u2014"),e.k0s())}function ce(n,_){if(1&n&&(e.j41(0,"td",53),e.DNE(1,ae,2,1,"mat-chip",55)(2,re,2,0,"span",56),e.k0s()),2&n){const t=_.$implicit;e.R7$(),e.Y8G("ngIf",t.engineer),e.R7$(),e.Y8G("ngIf",!t.engineer)}}function le(n,_){1&n&&(e.j41(0,"th",52),e.pXf(1,12),e.k0s())}function de(n,_){if(1&n&&(e.j41(0,"td",53)(1,"mat-chip",54),e.EFF(2),e.k0s()()),2&n){const t=_.$implicit,o=e.XpG(3);e.R7$(),e.Y8G("color",o.getStatusColor(t.isActive)),e.R7$(),e.SpI(" ",o.getStatusDisplay(t.isActive)," ")}}function Ee(n,_){1&n&&(e.j41(0,"th",52),e.pXf(1,13),e.k0s())}function me(n,_){if(1&n&&(e.j41(0,"td",53),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&n){const t=_.$implicit;e.R7$(),e.JRh(e.i5U(2,1,t.createdAt,"short"))}}function ge(n,_){1&n&&(e.j41(0,"th",59),e.pXf(1,14),e.k0s())}function Se(n,_){if(1&n){const t=e.RV6();e.j41(0,"button",63),e.bIt("click",function(){e.eBV(t);const u=e.XpG().$implicit,c=e.XpG(3);return e.Njj(c.onEditUser(u))}),e.j41(1,"mat-icon"),e.EFF(2,"edit"),e.k0s()()}}function fe(n,_){if(1&n){const t=e.RV6();e.j41(0,"button",64),e.bIt("click",function(){e.eBV(t);const u=e.XpG().$implicit,c=e.XpG(3);return e.Njj(c.onToggleUserStatus(u))}),e.j41(1,"mat-icon"),e.EFF(2),e.k0s()()}if(2&n){const t=e.XpG().$implicit;e.Y8G("color",t.isActive?"warn":"primary")("matTooltip",t.isActive?"\u0414\u0435\u0430\u043a\u0442\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f":"\u0410\u043a\u0442\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),e.R7$(2),e.JRh(t.isActive?"block":"check_circle")}}function pe(n,_){if(1&n){const t=e.RV6();e.j41(0,"button",65),e.bIt("click",function(){e.eBV(t);const u=e.XpG().$implicit,c=e.XpG(3);return e.Njj(c.onDeleteUser(u))}),e.j41(1,"mat-icon"),e.EFF(2,"delete"),e.k0s()()}}function Ce(n,_){if(1&n&&(e.j41(0,"td",53),e.DNE(1,Se,3,0,"button",60)(2,fe,3,3,"button",61)(3,pe,3,0,"button",62),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.Y8G("ngIf",t.canEditUsers),e.R7$(),e.Y8G("ngIf",t.canEditUsers),e.R7$(),e.Y8G("ngIf",t.canDeleteUsers)}}function Pe(n,_){1&n&&e.nrm(0,"tr",66)}function Re(n,_){1&n&&e.nrm(0,"tr",67)}function Me(n,_){1&n&&(e.j41(0,"div",68)(1,"mat-icon"),e.EFF(2,"people"),e.k0s(),e.j41(3,"h3"),e.pXf(4,15),e.k0s(),e.j41(5,"p"),e.pXf(6,16),e.k0s()())}function he(n,_){if(1&n&&(e.j41(0,"div",35)(1,"table",36),e.qex(2,37),e.DNE(3,H,2,0,"th",38)(4,Z,2,1,"td",39),e.bVm(),e.qex(5,40),e.DNE(6,q,2,0,"th",38)(7,ee,2,1,"td",39),e.bVm(),e.qex(8,41),e.DNE(9,te,2,0,"th",38)(10,ne,2,1,"td",39),e.bVm(),e.qex(11,42),e.DNE(12,se,2,0,"th",38)(13,_e,2,1,"td",39),e.bVm(),e.qex(14,43),e.DNE(15,oe,2,0,"th",38)(16,ie,3,2,"td",39),e.bVm(),e.qex(17,44),e.DNE(18,ue,2,0,"th",38)(19,ce,3,2,"td",39),e.bVm(),e.qex(20,45),e.DNE(21,le,2,0,"th",38)(22,de,3,2,"td",39),e.bVm(),e.qex(23,46),e.DNE(24,Ee,2,0,"th",38)(25,me,3,4,"td",39),e.bVm(),e.qex(26,47),e.DNE(27,ge,2,0,"th",48)(28,Ce,4,3,"td",39),e.bVm(),e.DNE(29,Pe,1,0,"tr",49)(30,Re,1,0,"tr",50),e.k0s(),e.DNE(31,Me,7,0,"div",51),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("dataSource",t.dataSource),e.R7$(28),e.Y8G("matHeaderRowDef",t.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",t.displayedColumns),e.R7$(),e.Y8G("ngIf",0===t.dataSource.data.length)}}function Ue(n,_){if(1&n&&(e.j41(0,"mat-card")(1,"mat-card-content"),e.DNE(2,J,4,0,"div",30)(3,he,32,4,"div",31),e.nrm(4,"mat-paginator",32),e.k0s()()),2&n){const t=e.XpG();e.R7$(2),e.Y8G("ngIf",t.isLoading()),e.R7$(),e.Y8G("ngIf",!t.isLoading()),e.R7$(),e.Y8G("pageSizeOptions",e.lJ4(3,z))}}let Ae=(()=>{class n{constructor(){this.usersService=(0,e.WQX)(k.g),this.authService=(0,e.WQX)(y.u),this.dialog=(0,e.WQX)(m.bZ),this.modalService=(0,e.WQX)(W.B),this.toastService=(0,e.WQX)(w.f),this.router=(0,e.WQX)(p.Ix),this.displayedColumns=["id","firstName","lastName","email","role","engineerType","isActive","createdAt","actions"],this.dataSource=new a.I6([]),this.isLoading=(0,e.vPA)(!1),this.canViewUsers=this.authService.hasAnyRole([C.gG.ADMIN,C.gG.MANAGER]),this.canCreateUsers=this.authService.isAdmin(),this.canEditUsers=this.authService.isAdmin(),this.canDeleteUsers=this.authService.isAdmin()}ngOnInit(){this.canViewUsers&&this.loadUsers()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}loadUsers(){this.isLoading.set(!0),this.usersService.getUsers().subscribe({next:t=>{this.dataSource.data=t.data,this.isLoading.set(!1)},error:t=>{console.error("Error loading users:",t),this.toastService.error("Error loading users"),this.isLoading.set(!1)}})}getFullName(t){return`${t.firstName} ${t.lastName}`}getRoleDisplay(t){switch(t){case C.gG.ADMIN:return"Administrator";case C.gG.MANAGER:return"Manager";case C.gG.USER:return"User";default:return t}}getEngineerTypeDisplay(t){if(!t)return"\u2014";switch(t){case N.cD.STAFF:return"\u0428\u0442\u0430\u0442\u043d\u044b\u0439";case N.cD.CONTRACT:return"\u041d\u0430\u0435\u043c\u043d\u044b\u0439";default:return t}}getStatusDisplay(t){return t?"Active":"Inactive"}getStatusColor(t){return t?"primary":"warn"}onEditUser(t){this.router.navigate(["/users",t.id,"edit"])}onDeleteUser(t){this.showCascadeDeleteConfirmation(t)}showDeleteConfirmation(t){this.modalService.openDialog(O.i,{user:t,title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",message:`\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f ${t.firstName} ${t.lastName}?`,confirmText:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430"}).subscribe(u=>{u&&this.performDelete(t.id)})}showCascadeDeleteConfirmation(t){this.modalService.openDialog(O.i,{user:t,title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",message:`\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c ${t.firstName} ${t.lastName} \u0431\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043b\u0435\u043d \u0441\u043e \u0432\u0441\u0435\u043c\u0438 \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u043c\u0438 \u0434\u0430\u043d\u043d\u044b\u043c\u0438 (\u043f\u0440\u043e\u0444\u0438\u043b\u044c \u0438\u043d\u0436\u0435\u043d\u0435\u0440\u0430, \u043b\u043e\u0433\u0438 \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438, \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u0438 \u0442.\u0434.).\n\n\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c? \u042d\u0442\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043d\u0435\u043b\u044c\u0437\u044f \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c.`,confirmText:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430"}).subscribe(u=>{u&&this.performCascadeDelete(t.id)})}performDelete(t){this.usersService.deleteUser(t).subscribe({next:()=>{this.toastService.success("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d"),this.loadUsers()},error:o=>{console.error("Error deleting user:",o),this.toastService.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f")}})}performCascadeDelete(t){this.usersService.deleteUser(t).subscribe({next:()=>{this.toastService.success("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0438 \u0432\u0441\u0435 \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u044b"),this.loadUsers()},error:o=>{console.error("Error deleting user:",o),this.usersService.forceDeleteUser(t).subscribe({next:()=>{this.toastService.success("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0438 \u0432\u0441\u0435 \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u044b"),this.loadUsers()},error:u=>{console.error("Error force deleting user:",u),this.toastService.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f")}})}})}onCreateUser(){console.log("\u{1f535} Create User button clicked"),console.log("\u{1f535} canCreateUsers:",this.canCreateUsers),console.log("\u{1f535} isAdmin:",this.authService.isAdmin()),console.log("\u{1f535} currentUser:",this.authService.currentUser()),console.log("\u{1f535} Navigating to /users/create"),this.router.navigate(["/users/create"]).then(t=>{console.log("\u{1f535} Navigation result:",t)}).catch(t=>{console.error("\u274c Navigation error:",t)})}onToggleUserStatus(t){const o=!t.isActive;this.usersService.updateUser(t.id,{isActive:o}).subscribe({next:u=>{const c=this.dataSource.data.findIndex(R=>R.id===t.id);-1!==c&&(this.dataSource.data[c]=u,this.dataSource._updateChangeSubscription()),this.toastService.success(`User ${o?"activated":"deactivated"} successfully`)},error:u=>{console.error("Error updating user status:",u),this.toastService.error("Error updating user status")}})}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-users"]],viewQuery:function(o,u){if(1&o&&(e.GBs(s.iy,5),e.GBs(f.B4,5)),2&o){let c;e.mGM(c=e.lsd())&&(u.paginator=c.first),e.mGM(c=e.lsd())&&(u.sort=c.first)}},standalone:!0,features:[e.aNF],decls:7,vars:3,consts:()=>{let t,o,u,c,R,v,$,D,G,I,x,F,b,B,X,L,j;return t=$localize`:@@users.management:Управление пользователями`,o=$localize`:@@users.search:Поиск пользователей`,u=$localize`:@@users.addUser:Добавить пользователя`,c=$localize`:@@users.accessDenied:Access Denied`,R=$localize`:@@users.noPermission:You don't have permission to view users.`,v=$localize`:@@users.loading:Loading users...`,$=$localize`:@@users.id:ID`,D=$localize`:@@users.firstName:Имя`,G=$localize`:@@users.lastName: Фамилия `,I=$localize`:@@users.email: Электронная почта `,x=$localize`:@@users.role:Роль`,F=$localize`:@@users.engineerType: Тип инженера `,b=$localize`:@@users.status:Статус`,B=$localize`:@@users.created:Создан`,X=$localize`:@@users.actions:Действия`,L=$localize`:@@users.noUsersFound:Пользователи не найдены`,j=$localize`:@@users.noUsersMessage: Нет пользователей, соответствующих критериям поиска, или пользователи еще не были созданы. `,[t,o,u,c,R,v,$,D,G,I,x,F,b,B,X,L,j,[1,"users-container"],[1,"header"],["class","header-actions",4,"ngIf"],[4,"ngIf"],[1,"header-actions"],[1,"search-field"],["matInput","","placeholder","\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0438\u043c\u0435\u043d\u0438, email \u0438\u043b\u0438 \u0440\u043e\u043b\u0438",3,"keyup"],["matSuffix",""],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["style","color: red; padding: 8px; background: #ffebee; border-radius: 4px",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],[2,"color","red","padding","8px","background","#ffebee","border-radius","4px"],[1,"access-denied"],["class","loading-container",4,"ngIf"],["class","table-container",4,"ngIf"],["showFirstLastButtons","","aria-label","\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439",3,"pageSizeOptions"],[1,"loading-container"],["diameter","40"],[1,"table-container"],["mat-table","","matSort","",1,"users-table",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","firstName"],["matColumnDef","lastName"],["matColumnDef","email"],["matColumnDef","role"],["matColumnDef","engineerType"],["matColumnDef","isActive"],["matColumnDef","createdAt"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-data",4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["selected","",3,"color"],["color","accent","selected","",4,"ngIf"],["class","no-engineer-label",4,"ngIf"],["color","accent","selected",""],[1,"no-engineer-label"],["mat-header-cell",""],["mat-icon-button","","color","primary","matTooltip","\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",3,"click",4,"ngIf"],["mat-icon-button","",3,"color","matTooltip","click",4,"ngIf"],["mat-icon-button","","color","warn","matTooltip","\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",3,"click",4,"ngIf"],["mat-icon-button","","color","primary","matTooltip","\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",3,"click"],["mat-icon-button","",3,"click","color","matTooltip"],["mat-icon-button","","color","warn","matTooltip","\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",3,"click"],["mat-header-row",""],["mat-row",""],[1,"no-data"]]},template:function(o,u){1&o&&(e.j41(0,"div",17)(1,"div",18)(2,"h1"),e.pXf(3,0),e.k0s(),e.DNE(4,Y,9,2,"div",19),e.k0s(),e.DNE(5,Q,9,0,"mat-card",20)(6,Ue,5,4,"mat-card",20),e.k0s()),2&o&&(e.R7$(4),e.Y8G("ngIf",u.canViewUsers),e.R7$(),e.Y8G("ngIf",!u.canViewUsers),e.R7$(),e.Y8G("ngIf",u.canViewUsers))},dependencies:[E.MD,E.bT,E.vh,a.tP,a.Zl,a.tL,a.ji,a.cC,a.YV,a.iL,a.KS,a.$R,a.YZ,a.NB,g.Hl,g.$z,g.iY,d.m_,d.An,s.Ou,s.iy,r.Hu,r.RN,r.m2,f.NQ,f.B4,f.aE,h.YN,h.Jl,P.RG,P.rl,P.nJ,P.yw,U.fS,U.fg,A.uc,A.oV,T.D6,T.LG],styles:[".users-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto;display:flex;flex-direction:column;min-height:calc(100vh - 64px)}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:2rem;font-weight:500;color:#333}.header-actions[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center}.header-actions[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{width:300px}mat-card[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.access-denied[_ngcontent-%COMP%]{text-align:center;padding:48px 24px}.access-denied[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:4rem;width:4rem;height:4rem;color:#ccc;margin-bottom:16px}.access-denied[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#666;font-weight:500}.access-denied[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#999}.users-table[_ngcontent-%COMP%]{width:100%}.table-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:auto;max-height:calc(100vh - 200px)}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:4px}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}.mat-mdc-table[_ngcontent-%COMP%]{margin-bottom:16px}mat-paginator[_ngcontent-%COMP%]{margin-top:auto;border-top:1px solid #e0e0e0;background-color:#fafafa}.mat-mdc-header-cell[_ngcontent-%COMP%]{font-weight:600;color:#666}.mat-mdc-cell[_ngcontent-%COMP%]{padding:12px}.no-engineer-label[_ngcontent-%COMP%]{color:#999;font-style:italic;font-size:.9rem}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:#666;font-size:1.1rem}.no-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center;color:#666}.no-data[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;height:48px;width:48px;margin-bottom:16px;opacity:.5}.no-data[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:1.25rem}.no-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem}@media (max-width: 768px){.users-container[_ngcontent-%COMP%]{padding:16px;min-height:calc(100vh - 56px)}.header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:16px}.header-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;width:100%}.header-actions[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{width:100%}.mat-column-engineerType[_ngcontent-%COMP%], .mat-column-createdAt[_ngcontent-%COMP%]{display:none}mat-paginator[_ngcontent-%COMP%]{padding:8px 16px;font-size:.875rem}.table-container[_ngcontent-%COMP%]{max-height:calc(100vh - 150px)}}"]})}}return n})()},4740:(M,S,i)=>{i.d(S,{g:()=>g});var e=i(4292),E=i(6e3),a=i(878);let g=(()=>{class d{constructor(){this.http=(0,e.WQX)(E.Qq)}getUsers(r){let m=new E.Nl;return r&&Object.entries(r).forEach(([f,p])=>{null!=p&&""!==p&&(m=m.set(f,p.toString()))}),this.http.get(`${a.c.apiUrl}/users`,{params:m})}getUser(r){return this.http.get(`${a.c.apiUrl}/users/${r}`)}createUser(r){return this.http.post(`${a.c.apiUrl}/users`,r)}updateUser(r,m){return this.http.patch(`${a.c.apiUrl}/users/${r}`,m)}deleteUser(r){return this.http.delete(`${a.c.apiUrl}/users/${r}`)}checkUserDeletion(r){return this.http.delete(`${a.c.apiUrl}/users/${r}`)}forceDeleteUser(r){return this.http.delete(`${a.c.apiUrl}/users/${r}/force`)}getUserProfile(){return this.http.get(`${a.c.apiUrl}/users/profile`)}updateProfile(r){return this.http.patch(`${a.c.apiUrl}/users/profile`,r)}static{this.\u0275fac=function(m){return new(m||d)}}static{this.\u0275prov=e.jDH({token:d,factory:d.\u0275fac,providedIn:"root"})}}return d})()}}]);