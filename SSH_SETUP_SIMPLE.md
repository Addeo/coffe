# ðŸ”‘ ÐŸÑ€Ð¾ÑÑ‚Ð°Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° SSH Ñ‡ÐµÑ€ÐµÐ· ÐºÐ¾Ð½ÑÐ¾Ð»ÑŒ Cloud.ru

## ðŸ“‹ Ð’Ð°Ñˆ Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ ÐºÐ»ÑŽÑ‡ Ð´Ð»Ñ ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ:

```
ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIJAyaRN1xe8RUSxxIwwm9PBi6z6UBIdsO4U0R7od1+iW deploy@coffe-admin
```

**â˜ï¸ Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ ÑÑ‚Ñƒ ÑÑ‚Ñ€Ð¾ÐºÑƒ Ñ†ÐµÐ»Ð¸ÐºÐ¾Ð¼!**

---

## ðŸ–¥ï¸ Ð¨ÐÐ“ 1: ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ ÐºÐ¾Ð½ÑÐ¾Ð»ÑŒ VPS Ð² Cloud.ru

### Ð’ Ð¿Ð°Ð½ÐµÐ»Ð¸ Cloud.ru:

1. ÐÐ°Ð¹Ð´Ð¸Ñ‚Ðµ Ð²Ð°ÑˆÑƒ VM: **vm-46609d42d**
2. ÐÐ°Ð¹Ð´Ð¸Ñ‚Ðµ ÐºÐ½Ð¾Ð¿ÐºÑƒ **"ÐšÐ¾Ð½ÑÐ¾Ð»ÑŒ"**, **"VNC"** Ð¸Ð»Ð¸ **"Ð¢ÐµÑ€Ð¼Ð¸Ð½Ð°Ð»"**
3. ÐšÐ»Ð¸ÐºÐ½Ð¸Ñ‚Ðµ Ð½Ð° Ð½ÐµÑ‘ - Ð¾Ñ‚ÐºÑ€Ð¾ÐµÑ‚ÑÑ Ñ‚ÐµÑ€Ð¼Ð¸Ð½Ð°Ð»

**Ð”Ð¾Ð»Ð¶Ð½Ð¾ Ð¿Ð¾ÑÐ²Ð¸Ñ‚ÑŒÑÑ Ð¾ÐºÐ½Ð¾ Ñ‚ÐµÑ€Ð¼Ð¸Ð½Ð°Ð»Ð° Ñ Ð¿Ñ€Ð¸Ð³Ð»Ð°ÑˆÐµÐ½Ð¸ÐµÐ¼ Ð´Ð»Ñ Ð²Ñ…Ð¾Ð´Ð°.**

---

## ðŸ” Ð¨ÐÐ“ 2: Ð—Ð°Ð»Ð¾Ð³Ð¸Ð½ÑŒÑ‚ÐµÑÑŒ Ð² ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸

Ð’ Ð¾Ñ‚ÐºÑ€Ñ‹Ð²ÑˆÐµÐ¼ÑÑ Ñ‚ÐµÑ€Ð¼Ð¸Ð½Ð°Ð»Ðµ Ð²Ð²ÐµÐ´Ð¸Ñ‚Ðµ:

```
Login: user1
Password: coffeAdmin123!
```

**ÐŸÐ¾ÑÐ»Ðµ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ð³Ð¾ Ð²Ñ…Ð¾Ð´Ð° Ð²Ñ‹ ÑƒÐ²Ð¸Ð´Ð¸Ñ‚Ðµ Ñ‡Ñ‚Ð¾-Ñ‚Ð¾ Ñ‚Ð¸Ð¿Ð°:**

```
user1@vm-46609d42d:~$
```

---

## ðŸ“ Ð¨ÐÐ“ 3: Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ð¸ Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹

**Ð’ ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸ VPS ÑÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ð¸ Ð²ÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ (Ð²ÑÐµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ ÑÑ€Ð°Ð·Ñƒ):**

```bash
mkdir -p ~/.ssh && chmod 700 ~/.ssh && cat >> ~/.ssh/authorized_keys << 'EOF'
ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIJAyaRN1xe8RUSxxIwwm9PBi6z6UBIdsO4U0R7od1+iW deploy@coffe-admin
EOF
chmod 600 ~/.ssh/authorized_keys && echo "âœ… SSH ÐºÐ»ÑŽÑ‡ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½!"
```

**Ð”Ð¾Ð»Ð¶Ð½Ð¾ Ð²Ñ‹Ð²ÐµÑÑ‚Ð¸:**

```
âœ… SSH ÐºÐ»ÑŽÑ‡ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½!
```

---

## ðŸ§ª Ð¨ÐÐ“ 4: ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ñ Ð²Ð°ÑˆÐµÐ³Ð¾ Mac

Ð’ Ñ‚ÐµÑ€Ð¼Ð¸Ð½Ð°Ð»Ðµ Ð½Ð° Mac:

```bash
ssh user1@192.144.12.102 "echo 'SSH Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚!'"
```

**Ð”Ð¾Ð»Ð¶Ð½Ð¾ Ð²Ñ‹Ð²ÐµÑÑ‚Ð¸:**

```
SSH Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚!
```

**Ð‘Ð•Ð— Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° Ð¿Ð°Ñ€Ð¾Ð»Ñ!**

---

## âœ… Ð¨ÐÐ“ 5: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ Docker Ð½Ð° VPS

Ð’ Ñ‚ÐµÑ€Ð¼Ð¸Ð½Ð°Ð»Ðµ Ð½Ð° Mac Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ:

```bash
ssh user1@192.144.12.102 << 'ENDSSH'
sudo apt update && sudo apt upgrade -y
sudo apt install -y docker.io docker-compose git curl
sudo usermod -aG docker user1
mkdir -p ~/coffe
docker --version
docker-compose --version
echo "âœ… Docker ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½!"
ENDSSH
```

**ÐŸÐ¾ÑÐ»Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð¿ÐµÑ€ÐµÐ¿Ð¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÐµÑÑŒ:**

```bash
ssh user1@192.144.12.102
exit
```

---

## ðŸš€ Ð¨ÐÐ“ 6: Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Ñ„Ð¸Ð½Ð°Ð»ÑŒÐ½ÑƒÑŽ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÑƒ

```bash
bash check-deployment.sh
```

**Ð”Ð¾Ð»Ð¶Ð½Ð¾ Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ:**

```
2ï¸âƒ£  ÐŸÐžÐ”ÐšÐ›Ð®Ð§Ð•ÐÐ˜Ð• Ðš VPS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SSH Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ: âœ… OK

3ï¸âƒ£  ÐŸÐ ÐžÐ’Ð•Ð ÐšÐ VPS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Docker ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½: âœ… Docker version ...
Docker Compose ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½: âœ… Docker Compose version ...
```

---

## ðŸŽ‰ Ð¨ÐÐ“ 7: Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Ð´ÐµÐ¿Ð»Ð¾Ð¹!

Ð•ÑÐ»Ð¸ Ð²ÑÐµ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ âœ…, Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ:

```bash
git commit -m "Deploy to VPS with refactored statistics"
git push origin main
```

Ð—Ð°Ñ‚ÐµÐ¼ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ:

```
https://github.com/Addeo/coffe-deploy/actions
```

---

## ðŸ› Ð•ÑÐ»Ð¸ Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚:

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: "Permission denied (publickey)"

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:** ÐšÐ»ÑŽÑ‡ Ð½Ðµ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½ Ð¸Ð»Ð¸ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½ Ð½ÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾.

ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð² VNC ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸:

```bash
cat ~/.ssh/authorized_keys
```

Ð”Ð¾Ð»Ð¶Ð½Ð° Ð±Ñ‹Ñ‚ÑŒ ÑÑ‚Ñ€Ð¾ÐºÐ°:

```
ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIJAyaRN1xe8RUSxxIwwm9PBi6z6UBIdsO4U0R7od1+iW deploy@coffe-admin
```

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: "Connection refused"

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:** VPS Ð²Ñ‹ÐºÐ»ÑŽÑ‡ÐµÐ½ Ð¸Ð»Ð¸ firewall Ð±Ð»Ð¾ÐºÐ¸Ñ€ÑƒÐµÑ‚.

Ð’ Ð¿Ð°Ð½ÐµÐ»Ð¸ Cloud.ru Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ, Ñ‡Ñ‚Ð¾ VM **Ð—Ð°Ð¿ÑƒÑ‰ÐµÐ½Ð°** (Ð·ÐµÐ»Ñ‘Ð½Ñ‹Ð¹ ÑÑ‚Ð°Ñ‚ÑƒÑ).

---

## ðŸ“ž ÐŸÐ¾Ð¼Ð¾Ñ‰ÑŒ:

Ð•ÑÐ»Ð¸ Ð½Ðµ Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÑ‚ÑÑ:

1. Ð¡Ð´ÐµÐ»Ð°Ð¹Ñ‚Ðµ ÑÐºÑ€Ð¸Ð½ÑˆÐ¾Ñ‚ Ð¿Ð°Ð½ÐµÐ»Ð¸ Cloud.ru (Ð³Ð´Ðµ Ð¸Ñ‰ÐµÑ‚Ðµ SSH ÐºÐ»ÑŽÑ‡Ð¸)
2. ÐŸÐ¾ÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð²Ñ‹Ð²Ð¾Ð´ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹: `ssh -v user1@192.144.12.102`
3. Ð¯ Ð¿Ð¾Ð¼Ð¾Ð³Ñƒ Ð½Ð°Ð¹Ñ‚Ð¸ Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ!
