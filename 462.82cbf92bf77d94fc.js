"use strict";(self.webpackChunkcoffee_admin=self.webpackChunkcoffee_admin||[]).push([[462],{6395:(b,v,r)=>{r.r(v),r.d(v,{FilesComponent:()=>de});var F=r(5841),e=r(4292),c=r(9351),d=r(7317),p=r(5320),x=r(91),l=r(8497),m=r(8613),E=r(3505),f=r(6721),R=r(4536),C=r(8598),M=r(6093),P=r(609),h=r(4165),O=r(7199),T=r(4323),y=r(4755),g=r(2277);function k(n,s){1&n&&(e.j41(0,"div",12),e.nrm(1,"mat-spinner",13),e.k0s())}function I(n,s){1&n&&(e.j41(0,"div",14)(1,"mat-icon"),e.EFF(2,"error_outline"),e.k0s(),e.j41(3,"p"),e.EFF(4,"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"),e.k0s()())}function D(n,s){if(1&n&&(e.j41(0,"div",15)(1,"mat-icon"),e.EFF(2,"info"),e.k0s(),e.j41(3,"span"),e.EFF(4),e.k0s()()),2&n){const t=e.XpG();e.R7$(4),e.JRh(t.data.fileName)}}let $=(()=>{class n{constructor(t){this.data=t,this.dialogRef=(0,e.WQX)(h.CP),this.isLoading=!0,this.hasError=!1}onImageLoad(){this.isLoading=!1,this.hasError=!1}onImageError(){this.isLoading=!1,this.hasError=!0}close(){this.dialogRef.close()}static{this.\u0275fac=function(o){return new(o||n)(e.rXU(h.Vh))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-image-viewer-dialog"]],standalone:!0,features:[e.aNF],decls:20,vars:11,consts:[[1,"image-viewer-dialog"],[1,"dialog-header"],["mat-dialog-title",""],["mat-icon-button","",1,"close-button",3,"click"],[1,"image-container"],["class","loading-spinner",4,"ngIf"],[3,"load","error","src","alt"],["class","error-message",4,"ngIf"],["class","image-info",4,"ngIf"],["align","end"],["mat-button","",3,"click"],["mat-raised-button","","color","primary","download","","target","_blank",3,"href"],[1,"loading-spinner"],["diameter","50"],[1,"error-message"],[1,"image-info"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"h2",2),e.EFF(3),e.k0s(),e.j41(4,"button",3),e.bIt("click",function(){return i.close()}),e.j41(5,"mat-icon"),e.EFF(6,"close"),e.k0s()()(),e.j41(7,"mat-dialog-content")(8,"div",4),e.DNE(9,k,2,0,"div",5),e.j41(10,"img",6),e.bIt("load",function(){return i.onImageLoad()})("error",function(){return i.onImageError()}),e.k0s(),e.DNE(11,I,5,0,"div",7),e.k0s(),e.DNE(12,D,5,1,"div",8),e.k0s(),e.j41(13,"mat-dialog-actions",9)(14,"button",10),e.bIt("click",function(){return i.close()}),e.EFF(15,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),e.k0s(),e.j41(16,"a",11)(17,"mat-icon"),e.EFF(18,"download"),e.k0s(),e.EFF(19," \u0421\u043a\u0430\u0447\u0430\u0442\u044c "),e.k0s()()()),2&o&&(e.R7$(3),e.JRh(i.data.title),e.R7$(6),e.Y8G("ngIf",i.isLoading),e.R7$(),e.AVh("loaded",!i.isLoading)("error",i.hasError),e.Y8G("src",i.data.imageUrl,e.B4B)("alt",i.data.title),e.R7$(),e.Y8G("ngIf",i.hasError),e.R7$(),e.Y8G("ngIf",i.data.fileName),e.R7$(4),e.Y8G("href",i.data.imageUrl,e.B4B))},dependencies:[c.MD,c.bT,h.hM,h.BI,h.E7,h.Yi,p.Hl,p.It,p.$z,p.iY,x.m_,x.An,l.D6,l.LG],styles:[".image-viewer-dialog[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:600px;max-width:90vw;max-height:90vh}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;border-bottom:1px solid #e0e0e0}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:500;color:#1976d2;flex:1}.close-button[_ngcontent-%COMP%]{margin-left:16px}mat-dialog-content[_ngcontent-%COMP%]{padding:0!important;overflow:hidden;display:flex;flex-direction:column}.image-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;min-height:400px;max-height:70vh;background-color:#f5f5f5;overflow:auto}.loading-spinner[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1}img[_ngcontent-%COMP%]{max-width:100%;max-height:70vh;object-fit:contain;opacity:0;transition:opacity .3s ease-in-out}img.loaded[_ngcontent-%COMP%]{opacity:1}img.error[_ngcontent-%COMP%]{display:none}.error-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;padding:40px;color:#666}.error-message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#d32f2f}.error-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px}.image-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 24px;background-color:#f9f9f9;border-top:1px solid #e0e0e0;font-size:14px;color:#666}.image-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}mat-dialog-actions[_ngcontent-%COMP%]{padding:16px 24px;margin:0;border-top:1px solid #e0e0e0;gap:12px}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], mat-dialog-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{min-width:100px}@media (max-width: 768px){.image-viewer-dialog[_ngcontent-%COMP%]{min-width:100%;max-width:100vw}.image-container[_ngcontent-%COMP%]{min-height:300px;max-height:60vh}img[_ngcontent-%COMP%]{max-height:60vh}}"]})}}return n})();var w=r(2517),B=r(7694);function G(n,s){if(1&n&&(e.j41(0,"div",28),e.EFF(1),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.error," ")}}function N(n,s){if(1&n&&(e.j41(0,"div",21)(1,"div",22)(2,"span",23),e.EFF(3),e.k0s(),e.j41(4,"span",24),e.EFF(5),e.k0s(),e.j41(6,"span",25),e.EFF(7),e.k0s()(),e.nrm(8,"mat-progress-bar",26),e.DNE(9,G,2,1,"div",27),e.k0s()),2&n){const t=s.$implicit;e.R7$(3),e.JRh(t.file.name),e.R7$(2),e.SpI("(",(t.file.size/1024/1024).toFixed(2)," MB)"),e.R7$(),e.HbH(t.status),e.R7$(),e.SpI(" ","uploading"===t.status?t.progress+"%":"completed"===t.status?"\u0413\u043e\u0442\u043e\u0432\u043e":"error"===t.status?"\u041e\u0448\u0438\u0431\u043a\u0430":"\u041e\u0436\u0438\u0434\u0430\u043d\u0438\u0435"," "),e.R7$(),e.HbH(t.status),e.Y8G("value",t.progress),e.R7$(),e.Y8G("ngIf",t.error)}}function V(n,s){if(1&n&&(e.j41(0,"div",18)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),e.EFF(4,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0444\u0430\u0439\u043b\u043e\u0432"),e.k0s()(),e.j41(5,"mat-card-content")(6,"div",19),e.DNE(7,N,10,9,"div",20),e.k0s()()()()),2&n){const t=e.XpG();e.R7$(7),e.Y8G("ngForOf",t.uploadProgress())}}function U(n,s){1&n&&(e.j41(0,"div",29),e.nrm(1,"mat-spinner",30),e.k0s())}function Y(n,s){1&n&&(e.j41(0,"th",47),e.EFF(1,"\u041f\u0440\u0435\u0432\u044c\u044e"),e.k0s())}function A(n,s){if(1&n){const t=e.RV6();e.j41(0,"img",52),e.bIt("error",function(i){e.eBV(t);const a=e.XpG(3);return e.Njj(a.onImageError(i))}),e.k0s()}if(2&n){const t=e.XpG().$implicit,o=e.XpG(2);e.Y8G("src",o.getFileUrl(t.id),e.B4B)("alt",t.originalName)}}function S(n,s){if(1&n&&(e.j41(0,"mat-icon",53),e.EFF(1),e.k0s()),2&n){const t=e.XpG().$implicit,o=e.XpG(2);e.R7$(),e.JRh(o.getFileIcon(t.mimetype))}}function L(n,s){if(1&n&&(e.j41(0,"td",48)(1,"div",49),e.DNE(2,A,1,2,"img",50)(3,S,2,1,"mat-icon",51),e.k0s()()),2&n){const t=s.$implicit,o=e.XpG(2);e.R7$(2),e.Y8G("ngIf",o.isImage(t.mimetype)),e.R7$(),e.Y8G("ngIf",!o.isImage(t.mimetype))}}function z(n,s){1&n&&(e.j41(0,"th",47),e.EFF(1,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),e.k0s())}function H(n,s){if(1&n&&(e.j41(0,"td",48)(1,"div",54)(2,"strong"),e.EFF(3),e.k0s(),e.j41(4,"small"),e.EFF(5),e.k0s()()()),2&n){const t=s.$implicit;e.R7$(3),e.JRh(t.originalName),e.R7$(2),e.JRh(t.filename)}}function X(n,s){1&n&&(e.j41(0,"th",47),e.EFF(1,"\u0422\u0438\u043f"),e.k0s())}function W(n,s){if(1&n&&(e.j41(0,"td",48)(1,"mat-chip"),e.EFF(2),e.k0s()()),2&n){const t=s.$implicit,o=e.XpG(2);e.R7$(),e.HbH("type-"+t.type),e.R7$(),e.JRh(o.getFileTypeLabel(t.type))}}function Q(n,s){1&n&&(e.j41(0,"th",47),e.EFF(1,"\u0420\u0430\u0437\u043c\u0435\u0440"),e.k0s())}function J(n,s){if(1&n&&(e.j41(0,"td",48),e.EFF(1),e.k0s()),2&n){const t=s.$implicit;e.R7$(),e.SpI(" ",(t.size/1024/1024).toFixed(2)," MB ")}}function K(n,s){1&n&&(e.j41(0,"th",47),e.EFF(1,"\u0417\u0430\u043a\u0430\u0437"),e.k0s())}function Z(n,s){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(),e.JRh(t.order.title)}}function q(n,s){1&n&&(e.j41(0,"span",57),e.EFF(1,"\u041d\u0435 \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0435\u043d"),e.k0s())}function ee(n,s){if(1&n&&(e.j41(0,"td",48),e.DNE(1,Z,2,1,"span",55)(2,q,2,0,"span",56),e.k0s()),2&n){const t=s.$implicit;e.R7$(),e.Y8G("ngIf",t.order),e.R7$(),e.Y8G("ngIf",!t.order)}}function te(n,s){1&n&&(e.j41(0,"th",47),e.EFF(1,"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u043b"),e.k0s())}function ne(n,s){if(1&n&&(e.j41(0,"td",48),e.EFF(1),e.k0s()),2&n){const t=s.$implicit;e.R7$(),e.SpI(" ",(null==t.uploadedBy?null:t.uploadedBy.name)||"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e"," ")}}function ie(n,s){1&n&&(e.j41(0,"th",47),e.EFF(1,"\u0414\u0430\u0442\u0430"),e.k0s())}function oe(n,s){if(1&n&&(e.j41(0,"td",48),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&n){const t=s.$implicit;e.R7$(),e.SpI(" ",e.i5U(2,1,t.uploadedAt,"dd.MM.yyyy HH:mm")," ")}}function se(n,s){1&n&&(e.j41(0,"th",47),e.EFF(1,"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"),e.k0s())}function ae(n,s){if(1&n){const t=e.RV6();e.j41(0,"td",48)(1,"button",58),e.bIt("click",function(){const i=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.viewFile(i))}),e.j41(2,"mat-icon"),e.EFF(3,"visibility"),e.k0s()(),e.j41(4,"button",58),e.bIt("click",function(){const i=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.downloadFile(i))}),e.j41(5,"mat-icon"),e.EFF(6,"download"),e.k0s()(),e.j41(7,"button",59),e.bIt("click",function(){const i=e.eBV(t).$implicit,a=e.XpG(2);return e.Njj(a.deleteFile(i))}),e.j41(8,"mat-icon"),e.EFF(9,"delete"),e.k0s()()()}2&n&&(e.R7$(),e.Y8G("matTooltip","\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"),e.R7$(3),e.Y8G("matTooltip","\u0421\u043a\u0430\u0447\u0430\u0442\u044c"),e.R7$(3),e.Y8G("matTooltip","\u0423\u0434\u0430\u043b\u0438\u0442\u044c"))}function re(n,s){1&n&&e.nrm(0,"tr",60)}function le(n,s){1&n&&e.nrm(0,"tr",61)}function ue(n,s){1&n&&(e.j41(0,"div",62)(1,"mat-icon"),e.EFF(2,"cloud_off"),e.k0s(),e.j41(3,"p"),e.EFF(4,"\u0424\u0430\u0439\u043b\u044b \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b"),e.k0s()())}function ce(n,s){if(1&n&&(e.j41(0,"div",31)(1,"div",32)(2,"span"),e.EFF(3),e.k0s(),e.j41(4,"span"),e.EFF(5),e.k0s()(),e.j41(6,"table",33),e.qex(7,34),e.DNE(8,Y,2,0,"th",35)(9,L,4,2,"td",36),e.bVm(),e.qex(10,37),e.DNE(11,z,2,0,"th",35)(12,H,6,2,"td",36),e.bVm(),e.qex(13,38),e.DNE(14,X,2,0,"th",35)(15,W,3,3,"td",36),e.bVm(),e.qex(16,39),e.DNE(17,Q,2,0,"th",35)(18,J,2,1,"td",36),e.bVm(),e.qex(19,40),e.DNE(20,K,2,0,"th",35)(21,ee,3,2,"td",36),e.bVm(),e.qex(22,41),e.DNE(23,te,2,0,"th",35)(24,ne,2,1,"td",36),e.bVm(),e.qex(25,42),e.DNE(26,ie,2,0,"th",35)(27,oe,3,4,"td",36),e.bVm(),e.qex(28,43),e.DNE(29,se,2,0,"th",35)(30,ae,10,3,"td",36),e.bVm(),e.DNE(31,re,1,0,"tr",44)(32,le,1,0,"tr",45),e.k0s(),e.DNE(33,ue,5,0,"div",46),e.k0s()),2&n){const t=e.XpG();e.R7$(3),e.SpI("\u0412\u0441\u0435\u0433\u043e \u0444\u0430\u0439\u043b\u043e\u0432: ",t.filteredFiles().length,""),e.R7$(2),e.SpI("\u041e\u0431\u0449\u0438\u0439 \u0440\u0430\u0437\u043c\u0435\u0440: ",(t.getTotalSize()/1024/1024).toFixed(2)," MB"),e.R7$(),e.Y8G("dataSource",t.filteredFiles()),e.R7$(25),e.Y8G("matHeaderRowDef",t.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",t.displayedColumns),e.R7$(),e.Y8G("ngIf",0===t.filteredFiles().length)}}let de=(()=>{class n{constructor(){this.filesService=(0,e.WQX)(T.F),this.toastService=(0,e.WQX)(y.f),this.dialog=(0,e.WQX)(h.bZ),this.files=(0,e.vPA)([]),this.filteredFiles=(0,e.vPA)([]),this.isLoading=(0,e.vPA)(!1),this.uploadProgress=(0,e.vPA)([]),this.selectedType=null,this.searchQuery="",this.FileType=g.p,this.displayedColumns=["preview","name","type","size","order","uploadedBy","date","actions"]}ngOnInit(){this.loadFiles()}loadFiles(){this.isLoading.set(!0),this.filesService.getAllFiles().subscribe({next:t=>{this.files.set(t),this.applyFilters(),this.isLoading.set(!1)},error:t=>{console.error("Error loading files:",t),this.toastService.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u043e\u0432"),this.isLoading.set(!1)}})}onFileSelected(t){const o=t.target.files;o&&o.length>0&&this.uploadFiles(Array.from(o))}uploadFiles(t){var o=this;return(0,F.A)(function*(){for(const i of t)yield o.uploadFile(i)})()}uploadFile(t){var o=this;return(0,F.A)(function*(){const i={file:t,progress:0,status:"uploading"};o.uploadProgress.set([...o.uploadProgress(),i]);try{const u=yield o.filesService.uploadFile(t,g.p.OTHER).toPromise();u&&(i.progress=100,i.status="completed",i.uploadedFileId=u.id,o.toastService.success(`\u0424\u0430\u0439\u043b "${t.name}" \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e`),o.loadFiles())}catch(u){console.error("Error uploading file:",u),i.status="error",i.error="\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438",o.toastService.error(`\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0444\u0430\u0439\u043b\u0430: ${t.name}`)}const a=o.uploadProgress(),_=a.findIndex(u=>u.file===t);-1!==_&&(a[_]=i,o.uploadProgress.set([...a])),setTimeout(()=>{const u=o.uploadProgress().filter(j=>"uploading"===j.status||"pending"===j.status);o.uploadProgress.set(u)},3e3)})()}isUploadingInProgress(){return this.uploadProgress().some(t=>"uploading"===t.status)}applyFilters(){let t=[...this.files()];if(this.selectedType&&(t=t.filter(o=>o.type===this.selectedType)),this.searchQuery){const o=this.searchQuery.toLowerCase();t=t.filter(i=>i.originalName.toLowerCase().includes(o)||i.filename.toLowerCase().includes(o))}this.filteredFiles.set(t)}onSearchChange(){this.applyFilters()}getTotalSize(){return this.filteredFiles().reduce((t,o)=>t+o.size,0)}isImage(t){return t.startsWith("image/")}getFileUrl(t){return`http://localhost:3001/api/files/view/${t}`}onImageError(t){t.target.style.display="none"}getFileIcon(t){return t.includes("pdf")?"picture_as_pdf":t.includes("word")?"description":t.includes("excel")||t.includes("spreadsheet")?"table_chart":t.includes("text")?"article":"insert_drive_file"}getFileTypeLabel(t){return{[g.p.ORDER_PHOTO]:"\u0424\u043e\u0442\u043e \u0437\u0430\u043a\u0430\u0437\u0430",[g.p.ORDER_BEFORE]:"\u0424\u043e\u0442\u043e \u0434\u043e \u0440\u0430\u0431\u043e\u0442\u044b",[g.p.ORDER_AFTER]:"\u0424\u043e\u0442\u043e \u043f\u043e\u0441\u043b\u0435 \u0440\u0430\u0431\u043e\u0442\u044b",[g.p.WORK_REPORT]:"\u041e\u0442\u0447\u0435\u0442",[g.p.AVATAR]:"\u0410\u0432\u0430\u0442\u0430\u0440",[g.p.DOCUMENT]:"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442",[g.p.IMAGE]:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",[g.p.OTHER]:"\u0414\u0440\u0443\u0433\u043e\u0435"}[t]||t}viewFile(t){if(this.isImage(t.mimetype)){const o={imageUrl:this.getFileUrl(t.id),title:t.originalName,fileName:t.originalName};this.dialog.open($,{data:o,maxWidth:"90vw",maxHeight:"90vh",panelClass:"image-viewer-dialog-container"})}else window.open(this.getFileUrl(t.id),"_blank")}downloadFile(t){this.filesService.downloadFile(t.id).subscribe({next:o=>{const i=window.URL.createObjectURL(o),a=document.createElement("a");a.href=i,a.download=t.originalName,a.click(),window.URL.revokeObjectURL(i),this.toastService.success("\u0424\u0430\u0439\u043b \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d")},error:o=>{console.error("Error downloading file:",o),this.toastService.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043a\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u044f \u0444\u0430\u0439\u043b\u0430")}})}deleteFile(t){this.dialog.open(w.i,{width:"400px",data:{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0444\u0430\u0439\u043b",message:`\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0444\u0430\u0439\u043b "${t.originalName}"?`,confirmText:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",cancelText:"\u041e\u0442\u043c\u0435\u043d\u0430"}}).afterClosed().subscribe(i=>{i&&this.filesService.deleteFile(t.id).subscribe({next:()=>{this.toastService.success("\u0424\u0430\u0439\u043b \u0443\u0434\u0430\u043b\u0435\u043d"),this.loadFiles()},error:a=>{console.error("Error deleting file:",a),this.toastService.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0444\u0430\u0439\u043b\u0430")}})})}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-files"]],standalone:!0,features:[e.aNF],decls:45,vars:12,consts:[["fileInput",""],[1,"files-page"],[1,"page-header"],[1,"header-actions"],["type","file","multiple","","accept","image/*,.pdf,.doc,.docx,.txt,.xlsx,.xls",2,"display","none",3,"change"],["mat-raised-button","","color","primary",3,"click","disabled"],["mat-raised-button","",3,"click"],["class","upload-section",4,"ngIf"],[1,"filters-card"],[1,"filters"],["appearance","outline"],[3,"ngModelChange","ngModel"],[3,"value"],["matInput","","placeholder","\u0418\u043c\u044f \u0444\u0430\u0439\u043b\u0430...",3,"ngModelChange","ngModel"],["matSuffix",""],[1,"files-card"],["class","loading-container",4,"ngIf"],["class","files-table",4,"ngIf"],[1,"upload-section"],[1,"progress-list"],["class","progress-item",4,"ngFor","ngForOf"],[1,"progress-item"],[1,"progress-header"],[1,"file-name"],[1,"file-size"],[1,"progress-status"],["mode","determinate",3,"value"],["class","error-message",4,"ngIf"],[1,"error-message"],[1,"loading-container"],["diameter","40"],[1,"files-table"],[1,"stats"],["mat-table","",1,"files-table-element",3,"dataSource"],["matColumnDef","preview"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","type"],["matColumnDef","size"],["matColumnDef","order"],["matColumnDef","uploadedBy"],["matColumnDef","date"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-files",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[1,"file-preview"],["class","preview-image",3,"src","alt","error",4,"ngIf"],["class","file-icon",4,"ngIf"],[1,"preview-image",3,"error","src","alt"],[1,"file-icon"],[1,"file-info"],[4,"ngIf"],["class","no-order",4,"ngIf"],[1,"no-order"],["mat-icon-button","",3,"click","matTooltip"],["mat-icon-button","","color","warn",3,"click","matTooltip"],["mat-header-row",""],["mat-row",""],[1,"no-files"]],template:function(o,i){if(1&o){const a=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"h1"),e.EFF(3,"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430\u043c\u0438"),e.k0s(),e.j41(4,"div",3)(5,"input",4,0),e.bIt("change",function(u){return e.eBV(a),e.Njj(i.onFileSelected(u))}),e.k0s(),e.j41(7,"button",5),e.bIt("click",function(){e.eBV(a);const u=e.sdS(6);return e.Njj(u.click())}),e.j41(8,"mat-icon"),e.EFF(9,"add"),e.k0s(),e.EFF(10," \u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u0430\u0439\u043b\u044b "),e.k0s(),e.j41(11,"button",6),e.bIt("click",function(){return e.eBV(a),e.Njj(i.loadFiles())}),e.j41(12,"mat-icon"),e.EFF(13,"refresh"),e.k0s(),e.EFF(14," \u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c "),e.k0s()()(),e.DNE(15,V,8,1,"div",7),e.j41(16,"mat-card",8)(17,"mat-card-content")(18,"div",9)(19,"mat-form-field",10)(20,"mat-label"),e.EFF(21,"\u0422\u0438\u043f \u0444\u0430\u0439\u043b\u0430"),e.k0s(),e.j41(22,"mat-select",11),e.mxI("ngModelChange",function(u){return e.eBV(a),e.DH7(i.selectedType,u)||(i.selectedType=u),e.Njj(u)}),e.bIt("ngModelChange",function(){return e.eBV(a),e.Njj(i.loadFiles())}),e.j41(23,"mat-option",12),e.EFF(24,"\u0412\u0441\u0435 \u0442\u0438\u043f\u044b"),e.k0s(),e.j41(25,"mat-option",12),e.EFF(26,"\u0424\u043e\u0442\u043e \u0437\u0430\u043a\u0430\u0437\u0430"),e.k0s(),e.j41(27,"mat-option",12),e.EFF(28,"\u041e\u0442\u0447\u0435\u0442 \u043e \u0440\u0430\u0431\u043e\u0442\u0435"),e.k0s(),e.j41(29,"mat-option",12),e.EFF(30,"\u0410\u0432\u0430\u0442\u0430\u0440"),e.k0s(),e.j41(31,"mat-option",12),e.EFF(32,"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442"),e.k0s(),e.j41(33,"mat-option",12),e.EFF(34,"\u0414\u0440\u0443\u0433\u043e\u0435"),e.k0s()()(),e.j41(35,"mat-form-field",10)(36,"mat-label"),e.EFF(37,"\u041f\u043e\u0438\u0441\u043a"),e.k0s(),e.j41(38,"input",13),e.mxI("ngModelChange",function(u){return e.eBV(a),e.DH7(i.searchQuery,u)||(i.searchQuery=u),e.Njj(u)}),e.bIt("ngModelChange",function(){return e.eBV(a),e.Njj(i.onSearchChange())}),e.k0s(),e.j41(39,"mat-icon",14),e.EFF(40,"search"),e.k0s()()()()(),e.j41(41,"mat-card",15)(42,"mat-card-content"),e.DNE(43,U,2,0,"div",16)(44,ce,34,6,"div",17),e.k0s()()()}2&o&&(e.R7$(7),e.Y8G("disabled",i.isUploadingInProgress()),e.R7$(8),e.Y8G("ngIf",i.uploadProgress().length>0),e.R7$(7),e.R50("ngModel",i.selectedType),e.R7$(),e.Y8G("value",null),e.R7$(2),e.Y8G("value",i.FileType.ORDER_PHOTO),e.R7$(2),e.Y8G("value",i.FileType.WORK_REPORT),e.R7$(2),e.Y8G("value",i.FileType.AVATAR),e.R7$(2),e.Y8G("value",i.FileType.DOCUMENT),e.R7$(2),e.Y8G("value",i.FileType.OTHER),e.R7$(5),e.R50("ngModel",i.searchQuery),e.R7$(5),e.Y8G("ngIf",i.isLoading()),e.R7$(),e.Y8G("ngIf",!i.isLoading()))},dependencies:[c.MD,c.Sq,c.bT,c.vh,d.tP,d.Zl,d.tL,d.ji,d.cC,d.YV,d.iL,d.KS,d.$R,d.YZ,d.NB,p.Hl,p.$z,p.iY,x.m_,x.An,l.D6,l.LG,m.YN,m.Jl,E.fS,E.fg,f.rl,f.nJ,f.yw,f.RG,R.Ve,R.VO,B.wT,C.Hu,C.RN,C.m2,C.MM,C.dh,M.uc,M.oV,P.PO,P.HM,O.YN,O.me,O.BC,O.vS],styles:[".files-page[_ngcontent-%COMP%]{padding:24px;max-width:1400px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px;font-weight:500;color:#1976d2}.header-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.upload-section[_ngcontent-%COMP%]{margin-bottom:24px}.progress-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.progress-item[_ngcontent-%COMP%]{padding:12px;background-color:#f5f5f5;border-radius:8px}.progress-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:8px}.file-name[_ngcontent-%COMP%]{flex:1;font-weight:500}.file-size[_ngcontent-%COMP%]{font-size:12px;color:#666}.progress-status[_ngcontent-%COMP%]{font-size:12px;font-weight:500;padding:2px 8px;border-radius:12px;text-transform:uppercase}.progress-status.pending[_ngcontent-%COMP%]{background-color:#fff3e0;color:#f57c00}.progress-status.uploading[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2}.progress-status.completed[_ngcontent-%COMP%]{background-color:#e8f5e8;color:#388e3c}.progress-status.error[_ngcontent-%COMP%]{background-color:#ffebee;color:#d32f2f}.error-message[_ngcontent-%COMP%]{color:#d32f2f;font-size:12px;margin-top:4px}.filters-card[_ngcontent-%COMP%]{margin-bottom:24px}.filters[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:wrap}.filters[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1;min-width:200px}.files-card[_ngcontent-%COMP%]{min-height:400px}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:400px}.stats[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:16px;padding:12px;background-color:#f5f5f5;border-radius:8px;font-size:14px;font-weight:500}.files-table-element[_ngcontent-%COMP%]{width:100%}.file-preview[_ngcontent-%COMP%]{width:60px;height:60px;display:flex;align-items:center;justify-content:center;background-color:#f5f5f5;border-radius:8px;overflow:hidden}.preview-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.file-icon[_ngcontent-%COMP%]{font-size:36px;width:36px;height:36px;color:#666}.file-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.file-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666;font-size:12px}.no-order[_ngcontent-%COMP%]{color:#999;font-style:italic}mat-chip[_ngcontent-%COMP%]{font-size:12px!important}.type-ORDER_PHOTO[_ngcontent-%COMP%]{background-color:#e3f2fd!important;color:#1976d2!important}.type-WORK_REPORT[_ngcontent-%COMP%]{background-color:#f3e5f5!important;color:#7b1fa2!important}.type-AVATAR[_ngcontent-%COMP%]{background-color:#fff3e0!important;color:#f57c00!important}.type-DOCUMENT[_ngcontent-%COMP%]{background-color:#e8f5e9!important;color:#388e3c!important}.type-OTHER[_ngcontent-%COMP%]{background-color:#f5f5f5!important;color:#666!important}.no-files[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;color:#999}.no-files[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:16px}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:16px}.header-actions[_ngcontent-%COMP%]{width:100%;flex-direction:column}.header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"]})}}return n})()},4740:(b,v,r)=>{r.d(v,{g:()=>d});var F=r(4292),e=r(6e3),c=r(878);let d=(()=>{class p{constructor(){this.http=(0,F.WQX)(e.Qq)}getUsers(l){let m=new e.Nl;return l&&Object.entries(l).forEach(([E,f])=>{null!=f&&""!==f&&(m=m.set(E,f.toString()))}),this.http.get(`${c.c.apiUrl}/users`,{params:m})}getUser(l){return this.http.get(`${c.c.apiUrl}/users/${l}`)}createUser(l){return this.http.post(`${c.c.apiUrl}/users`,l)}updateUser(l,m){return this.http.patch(`${c.c.apiUrl}/users/${l}`,m)}deleteUser(l){return this.http.delete(`${c.c.apiUrl}/users/${l}`)}checkUserDeletion(l){return this.http.delete(`${c.c.apiUrl}/users/${l}`)}forceDeleteUser(l){return this.http.delete(`${c.c.apiUrl}/users/${l}/force`)}getUserProfile(){return this.http.get(`${c.c.apiUrl}/users/profile`)}updateProfile(l){return this.http.patch(`${c.c.apiUrl}/users/profile`,l)}static{this.\u0275fac=function(m){return new(m||p)}}static{this.\u0275prov=F.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}}return p})()}}]);