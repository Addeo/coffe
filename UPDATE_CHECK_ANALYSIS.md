# üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ

**–ö–æ–¥:**
```119:121:frontend/src/app/app.component.ts
  ngOnInit(): void {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    this.startupService.checkForUpdates();
```

**‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –í–´–ó–´–í–ê–ï–¢ –ø—Ä–æ–≤–µ—Ä–∫—É –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ!**

### 2. –ü–æ–ª–Ω–∞—è —Ü–µ–ø–æ—á–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:

```
–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  ‚Üì
AppComponent.ngOnInit()
  ‚Üì
StartupService.checkForUpdates()
  ‚Üì
AppUpdateService.checkForUpdates()
  ‚Üì
HTTP GET /api/app/version
  ‚Üì
–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π
  ‚Üì
–ü–æ–∫–∞–∑ –¥–∏–∞–ª–æ–≥–∞ (–µ—Å–ª–∏ –≤–µ—Ä—Å–∏–∏ —Ä–∞–∑–Ω—ã–µ)
```

## ‚ö†Ô∏è –í–∞–∂–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ:

### –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏: 24 —á–∞—Å–∞

**–ö–æ–¥:**
```22:22:frontend/src/app/services/app-update.service.ts
  private readonly CHECK_INTERVAL = 24 * 60 * 60 * 1000; // 24 —á–∞—Å–∞
```

**–õ–æ–≥–∏–∫–∞:**
```65:73:frontend/src/app/services/app-update.service.ts
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª–∏ –ª–∏ –º—ã –Ω–µ–¥–∞–≤–Ω–æ
      const lastCheck = this.getLastCheckTime();
      const now = Date.now();

      if (lastCheck && now - lastCheck < this.CHECK_INTERVAL) {
        const hoursSinceCheck = Math.floor((now - lastCheck) / (60 * 60 * 1000));
        console.log(`‚è∞ –ü–æ—Å–ª–µ–¥–Ω—è—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –±—ã–ª–∞ ${hoursSinceCheck} —á–∞—Å–æ–≤ –Ω–∞–∑–∞–¥. –ü—Ä–æ–ø—É—Å–∫–∞–µ–º.`);
        return null;
      }
```

### ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤–µ—Ä—Å–∏—é 1.0.1
2. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ—Ç ‚Üí –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –Ω–µ—Ç ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Ä–µ–º—è –≤ localStorage
3. –ß–µ—Ä–µ–∑ 1 —á–∞—Å –≤—ã –≤—ã–ø—É—Å–∫–∞–µ—Ç–µ –≤–µ—Ä—Å–∏—é 1.0.2
4. ‚ùå –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ù–ï —É–∑–Ω–∞–µ—Ç –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –¥–Ω—è!

**–ü–æ—á–µ–º—É:** localStorage —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Ä–µ–º—è –ø—Ä–æ–≤–µ—Ä–∫–∏, –∏ —Å–ª–µ–¥—É—é—â–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –±—É–¥–µ—Ç —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ 24 —á–∞—Å–∞.

## ‚úÖ –î–ª—è –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:

**–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
- localStorage –ø—É—Å—Ç–æ–π
- `getLastCheckTime()` –≤–µ—Ä–Ω–µ—Ç `null`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è ‚úÖ

**–ö–æ–¥ –ø—Ä–æ–≤–µ—Ä–∫–∏:**
```69:73:frontend/src/app/services/app-update.service.ts
      if (lastCheck && now - lastCheck < this.CHECK_INTERVAL) {
        const hoursSinceCheck = Math.floor((now - lastCheck) / (60 * 60 * 1000));
        console.log(`‚è∞ –ü–æ—Å–ª–µ–¥–Ω—è—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –±—ã–ª–∞ ${hoursSinceCheck} —á–∞—Å–æ–≤ –Ω–∞–∑–∞–¥. –ü—Ä–æ–ø—É—Å–∫–∞–µ–º.`);
        return null;
      }
```

–ï—Å–ª–∏ `lastCheck === null`, —É—Å–ª–æ–≤–∏–µ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—Å—è ‚úÖ

## üß™ –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –û—á–∏—Å—Ç–∏—Ç—å localStorage
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –∏–ª–∏ –ø–µ—Ä–µ–¥ —Ç–µ—Å—Ç–æ–º
localStorage.removeItem('app_update_last_check');
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ forceCheckForUpdates()
```typescript
// –í –∫–æ–¥–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É
await appUpdateService.forceCheckForUpdates();
```

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞:

1. **–¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥ (24 —á–∞—Å–∞)** - —Ö–æ—Ä–æ—à –¥–ª—è:
   - –°–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
   - –ò–∑–±–µ–∂–∞–Ω–∏—è –Ω–∞–∑–æ–π–ª–∏–≤–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
   
2. **–î–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π:**
   - –ú–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `required: true` –≤ –æ—Ç–≤–µ—Ç–µ `/api/app/version`
   - –¢–æ–≥–¥–∞ –¥–∏–∞–ª–æ–≥ –Ω–µ–ª—å–∑—è –±—É–¥–µ—Ç –∑–∞–∫—Ä—ã—Ç—å

### –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. –û—á–∏—Å—Ç–∏—Ç—å localStorage –ø–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π —Ç–µ—Å—Ç–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏
2. –ò–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å `CHECK_INTERVAL` –¥–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–∏–Ω—É—Ç

## ‚úÖ –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç–≤–µ—Ç:

**–í–æ–ø—Ä–æ—Å:** –ë—É–¥–µ—Ç –ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ?

**–û—Ç–≤–µ—Ç:** 
- ‚úÖ **–î–ê, –ø—Ä–∏ –ü–ï–†–í–û–ú –∑–∞–ø—É—Å–∫–µ** –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- ‚úÖ **–î–ê, –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ**, –µ—Å–ª–∏ –ø—Ä–æ—à–ª–æ 24+ —á–∞—Å–∞ —Å –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
- ‚ö†Ô∏è **–ù–ï–¢, –µ—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä—è–ª–∏ –º–µ–Ω–µ–µ 24 —á–∞—Å–æ–≤ –Ω–∞–∑–∞–¥**

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—á–∏—Å—Ç–∏—Ç–µ localStorage –ø–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π —Ç–µ—Å—Ç–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏.

