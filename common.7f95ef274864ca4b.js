"use strict";(self.webpackChunkcoffee_admin=self.webpackChunkcoffee_admin||[]).push([[76],{2517:(m,h,i)=>{i.d(h,{i:()=>C});var t=i(4292),d=i(9351),o=i(4165),r=i(5320),c=i(91),l=i(8497),s=i(4740),e=i(4755);function n(u,E){if(1&u&&(t.j41(0,"div",12)(1,"strong"),t.EFF(2),t.k0s(),t.nrm(3,"br"),t.j41(4,"small"),t.EFF(5),t.k0s()()),2&u){const g=t.XpG();t.R7$(2),t.Lme("",g.data.user.firstName," ",g.data.user.lastName,""),t.R7$(3),t.JRh(g.data.user.email)}}function a(u,E){1&u&&t.nrm(0,"mat-spinner",13)}function f(u,E){if(1&u&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&u){const g=t.XpG();t.R7$(),t.JRh(g.data.confirmText||"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")}}let C=(()=>{class u{constructor(){this.dialogRef=(0,t.WQX)(o.CP),this.usersService=(0,t.WQX)(s.g),this.toastService=(0,t.WQX)(e.f),this.data=(0,t.WQX)(o.Vh),this.isLoading=(0,t.vPA)(!1)}onConfirm(){console.log("\u{1f5d1}\ufe0f Dialog onConfirm called with data:",this.data),this.data.user&&this.shouldAutoDelete()?(console.log("\u{1f5d1}\ufe0f Auto-deleting user:",this.data.user.id),this.isLoading.set(!0),this.usersService.deleteUser(this.data.user.id).subscribe({next:()=>{this.toastService.showSuccess("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d"),this.dialogRef.close(!0)},error:g=>{console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:",g),this.toastService.showError("\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437."),this.isLoading.set(!1)}})):(console.log("\u{1f5d1}\ufe0f Returning confirmation (no auto-delete)"),this.dialogRef.close(!0))}onCancel(){console.log("\u{1f5d1}\ufe0f Dialog onCancel called"),this.dialogRef.close(!1)}shouldAutoDelete(){return!!this.data.user}static{this.\u0275fac=function(p){return new(p||u)}}static{this.\u0275cmp=t.VBU({type:u,selectors:[["app-delete-confirmation-dialog"]],standalone:!0,features:[t.aNF],decls:18,vars:7,consts:[[1,"delete-dialog"],[1,"delete-header"],["color","warn"],["mat-dialog-title",""],[1,"delete-message"],["class","user-info",4,"ngIf"],[1,"warning-text"],["align","end"],["mat-button","",3,"click"],["mat-raised-button","","color","warn",3,"click","disabled"],["diameter","20",4,"ngIf"],[4,"ngIf"],[1,"user-info"],["diameter","20"]],template:function(p,_){1&p&&(t.j41(0,"div",0)(1,"div",1)(2,"mat-icon",2),t.EFF(3,"warning"),t.k0s(),t.j41(4,"h2",3),t.EFF(5),t.k0s()(),t.j41(6,"mat-dialog-content")(7,"p",4),t.EFF(8),t.k0s(),t.DNE(9,n,6,3,"div",5),t.j41(10,"p",6),t.EFF(11,"\u042d\u0442\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043d\u0435\u043b\u044c\u0437\u044f \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c."),t.k0s()(),t.j41(12,"mat-dialog-actions",7)(13,"button",8),t.bIt("click",function(){return _.onCancel()}),t.EFF(14),t.k0s(),t.j41(15,"button",9),t.bIt("click",function(){return _.onConfirm()}),t.DNE(16,a,1,0,"mat-spinner",10)(17,f,2,1,"span",11),t.k0s()()()),2&p&&(t.R7$(5),t.JRh(_.data.title||"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435"),t.R7$(3),t.SpI(" ",_.data.message||"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f?"," "),t.R7$(),t.Y8G("ngIf",_.data.user),t.R7$(5),t.JRh(_.data.cancelText||"\u041e\u0442\u043c\u0435\u043d\u0430"),t.R7$(),t.Y8G("disabled",_.isLoading()),t.R7$(),t.Y8G("ngIf",_.isLoading()),t.R7$(),t.Y8G("ngIf",!_.isLoading()))},dependencies:[d.MD,d.bT,o.hM,o.BI,o.E7,o.Yi,r.Hl,r.$z,c.m_,c.An,l.D6,l.LG],styles:[".delete-dialog[_ngcontent-%COMP%]{max-width:400px}.delete-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:16px}.delete-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}.delete-message[_ngcontent-%COMP%]{margin:0 0 16px;line-height:1.5}.user-info[_ngcontent-%COMP%]{background:#f5f5f5;padding:12px;border-radius:4px;margin-bottom:16px}.user-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333}.user-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666}.warning-text[_ngcontent-%COMP%]{color:#d32f2f;font-weight:500;margin:0}mat-dialog-actions[_ngcontent-%COMP%]{padding:16px 0 0}button[_ngcontent-%COMP%]{min-width:80px}"]})}}return u})()},1253:(m,h,i)=>{i.d(h,{n:()=>c});var t=i(4292),d=i(6e3),o=i(6200),r=i(878);let c=(()=>{class l{constructor(){this.http=(0,t.WQX)(d.Qq),this.apiUrl=`${r.c.apiUrl}/engineer-organization-rates`}getRates(e={}){let n=new d.Nl;return e.engineerId&&(n=n.set("engineerId",e.engineerId.toString())),e.organizationId&&(n=n.set("organizationId",e.organizationId.toString())),void 0!==e.isActive&&(n=n.set("isActive",e.isActive.toString())),e.page&&(n=n.set("page",e.page.toString())),e.limit&&(n=n.set("limit",e.limit.toString())),this.http.get(this.apiUrl,{params:n})}getRate(e){return this.http.get(`${this.apiUrl}/${e}`)}getRateByEngineerAndOrganization(e,n){return this.http.get(`${this.apiUrl}/engineer/${e}/organization/${n}`).pipe((0,o.T)(a=>a||null))}createRate(e){return console.log("\u{1f4e4} Creating engineer-organization rate:",e),this.http.post(this.apiUrl,e)}updateRate(e,n){return this.http.patch(`${this.apiUrl}/${e}`,n)}deleteRate(e){return this.http.delete(`${this.apiUrl}/${e}`)}bulkUpdateRates(e){return this.http.patch(`${this.apiUrl}/bulk`,{updates:e})}getActiveRatesForEngineer(e){return this.getRates({engineerId:e})}getActiveRatesForOrganization(e){return this.getRates({organizationId:e,isActive:!0})}static{this.\u0275fac=function(n){return new(n||l)}}static{this.\u0275prov=t.jDH({token:l,factory:l.\u0275fac,providedIn:"root"})}}return l})()},4193:(m,h,i)=>{i.d(h,{B:()=>o});var t=i(4292),d=i(4165);let o=(()=>{class r{constructor(){this.dialog=(0,t.WQX)(d.bZ)}openDialog(l,s,e){return this.dialog.open(l,{data:s,width:"600px",maxWidth:"90vw",disableClose:!1,hasBackdrop:!0,backdropClass:"modal-backdrop",panelClass:"modal-panel",...e}).afterClosed()}closeAll(){this.dialog.closeAll()}static{this.\u0275fac=function(s){return new(s||r)}}static{this.\u0275prov=t.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})()},8055:(m,h,i)=>{i.d(h,{r:()=>r});var t=i(4292),d=i(6e3),o=i(878);let r=(()=>{class c{constructor(){this.http=(0,t.WQX)(d.Qq)}getEarningsComparison(){return this.http.get(`${o.c.apiUrl}/statistics/earnings/comparison`)}getMonthlyStatistics(s,e){let n="";if(s||e){const a=[];s&&a.push(`year=${s}`),e&&a.push(`month=${e}`),n="?"+a.join("&")}return this.http.get(`${o.c.apiUrl}/statistics/monthly${n}`)}getComprehensiveStatistics(s,e,n){let a=[];s&&a.push(`year=${s}`),e&&a.push(`month=${e}`),void 0!==n?.includeTimeBased&&a.push(`includeTimeBased=${n.includeTimeBased}`),void 0!==n?.includeFinancial&&a.push(`includeFinancial=${n.includeFinancial}`),void 0!==n?.includeRankings&&a.push(`includeRankings=${n.includeRankings}`),void 0!==n?.includeForecast&&a.push(`includeForecast=${n.includeForecast}`);const f=a.length>0?"?"+a.join("&"):"";return this.http.get(`${o.c.apiUrl}/statistics/comprehensive${f}`)}getEngineerDetailedStats(s,e){let n="";if(s||e){const a=[];s&&a.push(`year=${s}`),e&&a.push(`month=${e}`),n="?"+a.join("&")}return this.http.get(`${o.c.apiUrl}/statistics/engineer/detailed${n}`)}getAdminEngineerStatistics(s,e){let n="";if(s||e){const a=[];s&&a.push(`year=${s}`),e&&a.push(`month=${e}`),n="?"+a.join("&")}return this.http.get(`${o.c.apiUrl}/statistics/admin/engineers${n}`)}getCarPaymentStatus(s,e){return this.http.get(`${o.c.apiUrl}/statistics/car-payment-status`,{params:{year:s.toString(),month:e.toString()}})}static{this.\u0275fac=function(e){return new(e||c)}}static{this.\u0275prov=t.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})()}}]);