"use strict";(self.webpackChunkcoffee_admin=self.webpackChunkcoffee_admin||[]).push([[423],{1423:(N,d,o)=>{o.r(d),o.d(d,{UnauthorizedComponent:()=>f});var e=o(4292),u=o(9351),g=o(4842),O=o(9353),M=o(5822),_=o(8200),C=o(5320),h=o(91),c=o(8598),R=o(8613);function p(n,a){if(1&n&&(e.j41(0,"mat-chip",23),e.EFF(1),e.k0s()),2&n){const t=a.$implicit,s=e.XpG(2);e.R7$(),e.SpI(" ",s.getRoleDisplay(t)," ")}}function A(n,a){if(1&n&&(e.j41(0,"div",20)(1,"h3"),e.pXf(2,4),e.k0s(),e.j41(3,"div",21),e.DNE(4,p,2,1,"mat-chip",22),e.k0s()()),2&n){const t=e.XpG();e.R7$(4),e.Y8G("ngForOf",t.requiredRoles)}}function U(n,a){if(1&n&&(e.j41(0,"div",24)(1,"p",25)(2,"strong"),e.pXf(3,5),e.k0s(),e.EFF(4),e.k0s()()),2&n){const t=e.XpG();e.R7$(4),e.SpI(" ",t.attemptedUrl," ")}}function T(n,a){if(1&n){const t=e.RV6();e.j41(0,"button",26),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.goToLogin())}),e.j41(1,"mat-icon"),e.EFF(2,"login"),e.k0s(),e.j41(3,"span"),e.pXf(4,6),e.k0s()()}}let f=(()=>{class n{constructor(){this.route=(0,e.WQX)(g.nX),this.router=(0,e.WQX)(g.Ix),this.authService=(0,e.WQX)(M.u),this.requiredRoles=[],this.attemptedUrl="",this.currentUserRole=null}ngOnInit(){this.route.queryParams.subscribe(t=>{this.requiredRoles=t.requiredRoles?.split(",")||[],this.attemptedUrl=t.attemptedUrl||""}),this.currentUserRole=this.authService.currentUser()?.role||null}goBack(){this.router.navigate(["/dashboard"])}goToLogin(){this.authService.logout()}getRoleDisplay(t){switch(t){case _.gG.ADMIN:return"Administrator";case _.gG.MANAGER:return"Manager";case _.gG.USER:return"User";default:return t}}getCurrentRoleDisplay(){return this.currentUserRole?this.getRoleDisplay(this.currentUserRole):"None"}canRequestAccess(){return this.currentUserRole===_.gG.USER}requestAccess(){console.log("Requesting access elevation")}static{this.\u0275fac=function(s){return new(s||n)}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-unauthorized"]],standalone:!0,features:[e.aNF],decls:26,vars:5,consts:()=>{let t,s,i,l,P,m,E;return t=$localize`:@@unauthorized.accessDenied:Access Denied`,s=$localize`:@@unauthorized.noPermission: You don't have permission to access this page. `,i=$localize`:@@unauthorized.yourCurrentRole:Your Current Role:`,l=$localize`:@@unauthorized.goToDashboard:Перейти к главной`,P=$localize`:@@unauthorized.requiredPermissions:Required Permissions:`,m=$localize`:@@unauthorized.attemptedUrl:Attempted URL:`,E=$localize`:@@unauthorized.requestAccess:Request Access`,[t,s,i,l,P,m,E,[1,"unauthorized-container"],[1,"unauthorized-card"],[1,"header-content"],[1,"error-icon"],[1,"message-section"],[1,"main-message"],["class","details-section",4,"ngIf"],[1,"current-role-section"],["selected","",3,"color"],["class","attempted-url-section",4,"ngIf"],[1,"actions-section"],["mat-raised-button","","color","primary",3,"click"],["mat-button","",3,"click",4,"ngIf"],[1,"details-section"],[1,"roles-list"],["color","warn","selected","",4,"ngFor","ngForOf"],["color","warn","selected",""],[1,"attempted-url-section"],[1,"attempted-url"],["mat-button","",3,"click"]]},template:function(s,i){1&s&&(e.j41(0,"div",7)(1,"mat-card",8)(2,"mat-card-header")(3,"div",9)(4,"mat-icon",10),e.EFF(5,"block"),e.k0s(),e.j41(6,"h1"),e.pXf(7,0),e.k0s()()(),e.j41(8,"mat-card-content")(9,"div",11)(10,"p",12),e.pXf(11,1),e.k0s(),e.DNE(12,A,5,1,"div",13),e.j41(13,"div",14)(14,"h3"),e.pXf(15,2),e.k0s(),e.j41(16,"mat-chip",15),e.EFF(17),e.k0s()(),e.DNE(18,U,5,1,"div",16),e.k0s()(),e.j41(19,"mat-card-actions",17)(20,"button",18),e.bIt("click",function(){return i.goBack()}),e.j41(21,"mat-icon"),e.EFF(22,"home"),e.k0s(),e.j41(23,"span"),e.pXf(24,3),e.k0s()(),e.DNE(25,T,5,0,"button",19),e.k0s()()()),2&s&&(e.R7$(12),e.Y8G("ngIf",i.requiredRoles.length>0),e.R7$(4),e.Y8G("color",i.currentUserRole?"primary":"accent"),e.R7$(),e.SpI(" ",i.getCurrentRoleDisplay()," "),e.R7$(),e.Y8G("ngIf",i.attemptedUrl),e.R7$(7),e.Y8G("ngIf",i.canRequestAccess()))},dependencies:[u.MD,u.Sq,u.bT,O.G,C.$z,h.An,c.RN,c.YY,c.m2,c.MM,R.Jl],styles:[".unauthorized-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:80vh;padding:20px}.unauthorized-card[_ngcontent-%COMP%]{max-width:600px;width:100%}.unauthorized-card[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center}.unauthorized-card[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:4rem;width:4rem;height:4rem;color:#f44336;margin-bottom:16px}.unauthorized-card[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;color:#333;font-weight:500}.message-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:24px}.message-section[_ngcontent-%COMP%]   .main-message[_ngcontent-%COMP%]{font-size:1.2rem;color:#666;margin-bottom:24px;line-height:1.5}.message-section[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%], .message-section[_ngcontent-%COMP%]   .current-role-section[_ngcontent-%COMP%]{margin-bottom:20px;text-align:left}.message-section[_ngcontent-%COMP%]   .details-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .message-section[_ngcontent-%COMP%]   .current-role-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 12px;color:#333;font-size:1rem;font-weight:500}.message-section[_ngcontent-%COMP%]   .roles-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.message-section[_ngcontent-%COMP%]   .attempted-url-section[_ngcontent-%COMP%]{margin-top:20px;padding-top:16px;border-top:1px solid #e0e0e0}.message-section[_ngcontent-%COMP%]   .attempted-url-section[_ngcontent-%COMP%]   .attempted-url[_ngcontent-%COMP%]{margin:0;color:#666;font-size:.9rem}.message-section[_ngcontent-%COMP%]   .attempted-url-section[_ngcontent-%COMP%]   .attempted-url[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333}.actions-section[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:16px;padding:16px 0}.actions-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:140px}@media (max-width: 600px){.unauthorized-container[_ngcontent-%COMP%]{padding:16px}.unauthorized-card[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:3rem;width:3rem;height:3rem}.unauthorized-card[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.message-section[_ngcontent-%COMP%]   .main-message[_ngcontent-%COMP%]{font-size:1rem}.actions-section[_ngcontent-%COMP%]{flex-direction:column}.actions-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;min-width:unset}}"]})}}return n})()}}]);