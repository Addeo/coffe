# –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

## üéØ –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —Ä–µ—à–µ–Ω—ã

### 1. –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞ Android
**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ –≤–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –≤–µ—Ä—Å–∏–µ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –¥–∏–∞–ª–æ–≥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ.

**–†–µ—à–µ–Ω–∏–µ:** 
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–µ —á–∞—â–µ **—Ä–∞–∑ –≤ 24 —á–∞—Å–∞**
- –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `localStorage`
- –ï—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä—è–ª–∏ –Ω–µ–¥–∞–≤–Ω–æ - –¥–∏–∞–ª–æ–≥ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä–Ω–æ–π –≤–µ—Ä—Å–∏–∏
**–ü—Ä–æ–±–ª–µ–º–∞:** –ë—Ä–∞—É–∑–µ—Ä–Ω–∞—è –≤–µ—Ä—Å–∏—è –Ω–µ –¥–æ–ª–∂–Ω–∞ –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç **—Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–∞—Ç–∏–≤–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º** (Android/iOS)
- –í–µ–±-–≤–µ—Ä—Å–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

## üîß –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ö–æ–¥ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

```typescript
async checkForUpdates(): Promise<VersionResponse | null> {
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–∞—Ç–∏–≤–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º (Android/iOS)
  if (!Capacitor.isNativePlatform()) {
    console.log('üåê –í–µ–±-–≤–µ—Ä—Å–∏—è: –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –æ—Ç–∫–ª—é—á–µ–Ω–∞');
    return null;
  }
  
  // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
}
```

### –ö–æ–¥ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞

```typescript
// –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª–∏ –ª–∏ –º—ã –Ω–µ–¥–∞–≤–Ω–æ
const lastCheck = this.getLastCheckTime();
const now = Date.now();

if (lastCheck && (now - lastCheck) < this.CHECK_INTERVAL) {
  const hoursSinceCheck = Math.floor((now - lastCheck) / (60 * 60 * 1000));
  console.log(`‚è∞ –ü–æ—Å–ª–µ–¥–Ω—è—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –±—ã–ª–∞ ${hoursSinceCheck} —á–∞—Å–æ–≤ –Ω–∞–∑–∞–¥. –ü—Ä–æ–ø—É—Å–∫–∞–µ–º.`);
  return null;
}

// –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Ä–µ–º—è –ø—Ä–æ–≤–µ—Ä–∫–∏
this.saveLastCheckTime();
```

## üìä –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –í–µ–±-–≤–µ—Ä—Å–∏—è (–±—Ä–∞—É–∑–µ—Ä)
```
–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  ‚Üì
Capacitor.isNativePlatform() = false
  ‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –æ—Ç–∫–ª—é—á–µ–Ω–∞ ‚úÖ
  ‚Üì
–î–∏–∞–ª–æ–≥ –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
```

### Android (–ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫)
```
–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  ‚Üì
Capacitor.isNativePlatform() = true
  ‚Üì
localStorage –ø—É—Å—Ç–æ–π (–Ω–µ—Ç –∑–∞–ø–∏—Å–∏ –æ –ø—Ä–æ–≤–µ—Ä–∫–µ)
  ‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
  ‚Üì
–ï—Å–ª–∏ –≤–µ—Ä—Å–∏—è –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å –¥–∏–∞–ª–æ–≥
  ‚Üì
–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Ä–µ–º—è –ø—Ä–æ–≤–µ—Ä–∫–∏ (current timestamp)
```

### Android (–ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—É—Å–∫–∏)
```
–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  ‚Üì
Capacitor.isNativePlatform() = true
  ‚Üì
–ü–æ—Å–ª–µ–¥–Ω—è—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –±—ã–ª–∞ 5 —á–∞—Å–æ–≤ –Ω–∞–∑–∞–¥ (–∏–∑ localStorage)
  ‚Üì
5 —á–∞—Å–æ–≤ < 24 —á–∞—Å–æ–≤
  ‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–ø—É—â–µ–Ω–∞ ‚úÖ
  ‚Üì
–î–∏–∞–ª–æ–≥ –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
```

### Android (—á–µ—Ä–µ–∑ 24 —á–∞—Å–∞)
```
–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  ‚Üì
Capacitor.isNativePlatform() = true
  ‚Üì
–ü–æ—Å–ª–µ–¥–Ω—è—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –±—ã–ª–∞ 25 —á–∞—Å–æ–≤ –Ω–∞–∑–∞–¥
  ‚Üì
25 —á–∞—Å–æ–≤ >= 24 —á–∞—Å–æ–≤
  ‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
  ‚Üì
–ï—Å–ª–∏ –≤–µ—Ä—Å–∏—è –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å –¥–∏–∞–ª–æ–≥
  ‚Üì
–û–±–Ω–æ–≤–∏—Ç—å –≤—Ä–µ–º—è –ø—Ä–æ–≤–µ—Ä–∫–∏
```

## üéÆ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: –í–µ–±-–≤–µ—Ä—Å–∏—è –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
ng serve

# 2. –û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
# –û–∂–∏–¥–∞–µ–º—ã–π –ª–æ–≥:
üåê –í–µ–±-–≤–µ—Ä—Å–∏—è: –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –æ—Ç–∫–ª—é—á–µ–Ω–∞
```

### –¢–µ—Å—Ç 2: Android –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —á–∞—Å—Ç–æ
```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Android
# 2. –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ - –ø–æ–∫–∞–∑–∞—Ç—å –¥–∏–∞–ª–æ–≥
# 3. –ó–∞–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
# 4. –û—Ç–∫—Ä—ã—Ç—å —Å–Ω–æ–≤–∞ —Å—Ä–∞–∑—É
# –û–∂–∏–¥–∞–µ–º—ã–π –ª–æ–≥:
‚è∞ –ü–æ—Å–ª–µ–¥–Ω—è—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –±—ã–ª–∞ 0 —á–∞—Å–æ–≤ –Ω–∞–∑–∞–¥. –ü—Ä–æ–ø—É—Å–∫–∞–µ–º.
```

### –¢–µ—Å—Ç 3: –ò–∑–º–µ–Ω–∏—Ç—å –≤—Ä–µ–º—è –≤ localStorage
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞/Android
localStorage.setItem('app_update_last_check', 
  (Date.now() - 25 * 60 * 60 * 1000).toString() // 25 —á–∞—Å–æ–≤ –Ω–∞–∑–∞–¥
);

// –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
// –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –ø–æ–∫–∞–∑–∞—Ç—å –¥–∏–∞–ª–æ–≥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞

–ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ `app-update.service.ts`:

```typescript
private readonly CHECK_INTERVAL = 24 * 60 * 60 * 1000; // 24 —á–∞—Å–∞

// –ò–ª–∏ –¥–ª—è –¥—Ä—É–≥–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞:
private readonly CHECK_INTERVAL = 7 * 24 * 60 * 60 * 1000; // 7 –¥–Ω–µ–π
private readonly CHECK_INTERVAL = 12 * 60 * 60 * 1000; // 12 —á–∞—Å–æ–≤
```

## ‚úÖ –ò—Ç–æ–≥

‚úÖ –í–µ–±-–≤–µ—Ä—Å–∏—è –ù–ï –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è  
‚úÖ Android –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —á–∞—â–µ —Ä–∞–∑–∞ –≤ 24 —á–∞—Å–∞  
‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –¥–∏–∞–ª–æ–≥–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è  
‚úÖ –í—Ä–µ–º—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage  

