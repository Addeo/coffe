# ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã —Ä–∞–±–æ—á–∏—Ö —Å–µ—Å—Å–∏–π - –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á—ë—Ç

## üéØ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

–£—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —É—á—ë—Ç–∞ —Ä–∞–±–æ—á–∏—Ö —Å–µ—Å—Å–∏–π (–≤—ã–µ–∑–¥–æ–≤), –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- **–ü—Ä–∏–≤—è–∑—ã–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤—ã–µ–∑–¥–æ–≤ –∫ –æ–¥–Ω–æ–º—É –∑–∞–∫–∞–∑—É**
- **–£—á–∏—Ç—ã–≤–∞—Ç—å —Ä–∞–±–æ—Ç—ã –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—è—Ü–∞—Ö** (–ø–æ –¥–∞—Ç–µ –≤—ã–µ–∑–¥–∞, –∞ –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞)
- **–î–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—É—é —Ä–∞–±–æ—á—É—é —Å–µ—Å—Å–∏—é** —Å —Ä–∞—Å—á—ë—Ç–∞–º–∏ –∏ —Å—Ç–∞–≤–∫–∞–º–∏
- **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å –∑–∞—Ä–ø–ª–∞—Ç—É** –ø–æ –º–µ—Å—è—Ü–∞–º

---

## üìã –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### ‚úÖ Backend

#### 1. **Entity WorkSession** (`backend/src/entities/work-session.entity.ts`)

- –ù–æ–≤–∞—è —Å—É—â–Ω–æ—Å—Ç—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –∫–∞–∂–¥–æ–º –≤—ã–µ–∑–¥–µ
- –ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è:
  - `workDate` - –¥–∞—Ç–∞ —Ä–∞–±–æ—Ç—ã (–¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–µ—Å—è—Ü–∞ –æ–ø–ª–∞—Ç—ã) ‚≠ê
  - `regularHours`, `overtimeHours` - —á–∞—Å—ã —Ä–∞–±–æ—Ç—ã
  - `calculatedAmount`, `carUsageAmount` - –æ–ø–ª–∞—Ç—ã
  - –í—Å–µ —Å—Ç–∞–≤–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–ª—è –∞—É–¥–∏—Ç–∞
  - –î–µ—Ç–∞–ª—å–Ω–∞—è —Ä–∞–∑–±–∏–≤–∫–∞ –æ–ø–ª–∞—Ç
  - `canBeInvoiced` - —Ñ–ª–∞–≥ –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∏–∑ –æ–ø–ª–∞—Ç—ã

#### 2. **Order Entity** (–æ–±–Ω–æ–≤–ª–µ–Ω–∞)

- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–≤—è–∑—å `OneToMany` —Å `WorkSession`
- –°—Ç–∞—Ä—ã–µ –ø–æ–ª—è (`regularHours`, `overtimeHours`) –æ—Å—Ç–∞–ª–∏—Å—å –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

#### 3. **WorkSessionsService** (`backend/src/modules/work-sessions/`)

- `createWorkSession()` - —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–±–æ—á–µ–π —Å–µ—Å—Å–∏–∏ —Å —Ä–∞—Å—á—ë—Ç–∞–º–∏
- `getOrderWorkSessions()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π –ø–æ –∑–∞–∫–∞–∑—É
- `getEngineerWorkSessions()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π –∏–Ω–∂–µ–Ω–µ—Ä–∞ –∑–∞ –ø–µ—Ä–∏–æ–¥
- `updateWorkSession()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å –ø–µ—Ä–µ—Å—á—ë—Ç–æ–º
- `deleteWorkSession()` - —É–¥–∞–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏
- `getWorkSessionsForSalaryCalculation()` - –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –∑–∞—Ä–ø–ª–∞—Ç—ã

#### 4. **WorkSessionsController** (`backend/src/modules/work-sessions/`)

- `GET /work-sessions/:id` - –ø–æ–ª—É—á–∏—Ç—å —Å–µ—Å—Å–∏—é
- `GET /work-sessions/my/sessions` - –º–æ–∏ —Å–µ—Å—Å–∏–∏
- `PATCH /work-sessions/:id` - –æ–±–Ω–æ–≤–∏—Ç—å
- `DELETE /work-sessions/:id` - —É–¥–∞–ª–∏—Ç—å

#### 5. **OrdersService & Controller** (–æ–±–Ω–æ–≤–ª–µ–Ω—ã)

- `POST /orders/:id/work-sessions` - —Å–æ–∑–¥–∞—Ç—å —Å–µ—Å—Å–∏—é –¥–ª—è –∑–∞–∫–∞–∑–∞
- `GET /orders/:id/work-sessions` - –ø–æ–ª—É—á–∏—Ç—å —Å–µ—Å—Å–∏–∏ –∑–∞–∫–∞–∑–∞
- `POST /orders/:id/complete` - –∑–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–∫–∞–∑ (–Ω–æ–≤—ã–π –º–µ—Ç–æ–¥)
- `completeOrder()` - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –≤—Å–µ—Ö —Å–µ—Å—Å–∏–π

#### 6. **SalaryCalculationService** (–æ–±–Ω–æ–≤–ª—ë–Ω)

- –¢–µ–ø–µ—Ä—å –±–µ—Ä—ë—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ `work_sessions` –ø–æ `workDate`
- –§–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ `canBeInvoiced = true`
- –°—É–º–º–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –≤—Å–µ—Ö —Å–µ—Å—Å–∏–π –∑–∞ –º–µ—Å—è—Ü

#### 7. **StatisticsService** (–æ–±–Ω–æ–≤–ª—ë–Ω)

- `getUserEarningsStatistics()` —Ä–∞–±–æ—Ç–∞–µ—Ç —Å `work_sessions`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `workDate` –≤–º–µ—Å—Ç–æ `completionDate`
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–∞–∫–∞–∑—ã

#### 8. **–ú–æ–¥—É–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã**

- `app.module.ts` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ `WorkSession` –≤ entities
- `calculations.module.ts` - –¥–æ–±–∞–≤–ª–µ–Ω `WorkSession` –≤ TypeORM
- `statistics.module.ts` - –¥–æ–±–∞–≤–ª–µ–Ω `WorkSession` –≤ TypeORM
- `orders.module.ts` - –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω `WorkSessionsModule`

---

### ‚úÖ Shared (DTOs)

#### **work-session.dto.ts** (`shared/dtos/`)

- `CreateWorkSessionDto` - —Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏
- `UpdateWorkSessionDto` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏
- `WorkSessionDto` - –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–∏
- `WorkSessionSummaryDto` - —Å–≤–æ–¥–∫–∞ –ø–æ —Å–µ—Å—Å–∏—è–º
- `WorkSessionStatus` - —Å—Ç–∞—Ç—É—Å—ã (completed, cancelled)

–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ –≤ `shared/index.ts`

---

### ‚úÖ Frontend

#### 1. **WorkSessionsService** (`frontend/src/app/services/`)

- –ú–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API —Ä–∞–±–æ—á–∏—Ö —Å–µ—Å—Å–∏–π
- `createWorkSession()` - —Å–æ–∑–¥–∞–Ω–∏–µ
- `getOrderWorkSessions()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ –∑–∞–∫–∞–∑—É
- `getMyWorkSessions()` - –º–æ–∏ —Å–µ—Å—Å–∏–∏
- `updateWorkSession()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- `deleteWorkSession()` - —É–¥–∞–ª–µ–Ω–∏–µ
- –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã (—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ä–∞—Å—á—ë—Ç—ã)

#### 2. **WorkSessionListComponent** (`frontend/src/app/components/work-session-list/`)

- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö —Å–µ—Å—Å–∏–π –ø–æ –∑–∞–∫–∞–∑—É
- –°–≤–æ–¥–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ —Å –æ–±—â–∏–º–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º–∏
- –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞–∂–¥–æ–π —Å–µ—Å—Å–∏–∏:
  - –î–∞—Ç–∞ —Ä–∞–±–æ—Ç—ã
  - –ß–∞—Å—ã (–æ–±—ã—á–Ω—ã–µ + –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞)
  - –û–ø–ª–∞—Ç—ã (–∑–∞ —Ä–∞–±–æ—Ç—É + –∑–∞ –º–∞—à–∏–Ω—É)
  - –ü—Ä–∏–º–µ—á–∞–Ω–∏—è
  - –°—Ç–∞—Ç—É—Å—ã
- –ö–Ω–æ–ø–∫–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è (–ø–æ –ø—Ä–∞–≤–∞–º –¥–æ—Å—Ç—É–ø–∞)

#### 3. **WorkSessionFormComponent** (`frontend/src/app/components/work-session-form/`)

- –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π —Ä–∞–±–æ—á–µ–π —Å–µ—Å—Å–∏–∏
- –ü–æ–ª—è:
  - –î–∞—Ç–∞ —Ä–∞–±–æ—Ç—ã (datepicker)
  - –û–±—ã—á–Ω—ã–µ —á–∞—Å—ã
  - –ß–∞—Å—ã –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏
  - –û–ø–ª–∞—Ç–∞ –∑–∞ –º–∞—à–∏–Ω—É
  - –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - –¢–∏–ø —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - –ü—Ä–∏–º–µ—á–∞–Ω–∏—è
  - –§–ª–∞–≥ "–û–ø–ª–∞—á–∏–≤–∞–µ–º–∞—è"
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –ø–æ–ª–µ–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Å—á—ë—Ç –æ–±—â–∏—Ö —á–∞—Å–æ–≤

#### 4. **OrderEditComponent** (–æ–±–Ω–æ–≤–ª—ë–Ω)

- –î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞ "–†–∞–±–æ—á–∏–µ —Å–µ—Å—Å–∏–∏"
- –í–∏–¥–Ω–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∑–∞–∫–∞–∑–∞
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã `WorkSessionList` –∏ `WorkSessionForm`
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π —Å–æ–∑–¥–∞–Ω–∏—è/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏–π

---

## üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –°—Ü–µ–Ω–∞—Ä–∏–π: –ó–∞–∫–∞–∑ —Å –¥–≤—É–º—è –≤—ã–µ–∑–¥–∞–º–∏ –≤ —Ä–∞–∑–Ω—ã–µ –º–µ—Å—è—Ü—ã

```typescript
// 1. –°–æ–∑–¥–∞—ë–º –∑–∞–∫–∞–∑ (—Å–µ–Ω—Ç—è–±—Ä—å)
POST /api/orders
{
  organizationId: 1,
  title: "–†–µ–º–æ–Ω—Ç –∫–æ—Ñ–µ–º–∞—à–∏–Ω—ã",
  location: "—É–ª. –õ–µ–Ω–∏–Ω–∞, 10"
}
// –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω, status: 'waiting'

// 2. –ù–∞–∑–Ω–∞—á–∞–µ–º –∏–Ω–∂–µ–Ω–µ—Ä–∞
POST /api/orders/123/assign
{ engineerId: 5 }
// –ó–∞–∫–∞–∑ status: 'assigned'

// 3. –ò–Ω–∂–µ–Ω–µ—Ä –≤—ã–µ–∑–∂–∞–µ—Ç (—Å–µ–Ω—Ç—è–±—Ä—å) - –ü–ï–†–í–´–ô –í–´–ï–ó–î
POST /api/orders/123/work-sessions
{
  workDate: "2025-09-15",
  regularHours: 4,
  overtimeHours: 0,
  carPayment: 2000,
  notes: "–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞, –Ω—É–∂–Ω—ã –∑–∞–ø—á–∞—Å—Ç–∏"
}
// ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Å–µ—Å—Å–∏—è #1
// ‚úÖ –ó–∞–∫–∞–∑ status: 'in_progress'

// 4. –†–∞—Å—á—ë—Ç –∑–∞—Ä–ø–ª–∞—Ç—ã –∑–∞ –°–ï–ù–¢–Ø–ë–†–¨
GET /api/calculations/calculate-monthly/9/2025
// ‚úÖ –°–µ—Å—Å–∏—è #1 —É—á—Ç–µ–Ω–∞ –≤ —Å–µ–Ω—Ç—è–±—Ä–µ (4—á + 2000‚ÇΩ)

// 5. –ò–Ω–∂–µ–Ω–µ—Ä –≤—ã–µ–∑–∂–∞–µ—Ç —Å–Ω–æ–≤–∞ (–æ–∫—Ç—è–±—Ä—å) - –í–¢–û–†–û–ô –í–´–ï–ó–î
POST /api/orders/123/work-sessions
{
  workDate: "2025-10-20",
  regularHours: 6,
  overtimeHours: 2,
  carPayment: 1500,
  notes: "–£—Å—Ç–∞–Ω–æ–≤–∏–ª –∑–∞–ø—á–∞—Å—Ç–∏, –≥–æ—Ç–æ–≤–æ"
}
// ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Å–µ—Å—Å–∏—è #2
// ‚úÖ –ó–∞–∫–∞–∑ status: 'in_progress'

// 6. –†–∞—Å—á—ë—Ç –∑–∞—Ä–ø–ª–∞—Ç—ã –∑–∞ –û–ö–¢–Ø–ë–†–¨
GET /api/calculations/calculate-monthly/10/2025
// ‚úÖ –°–µ—Å—Å–∏—è #2 —É—á—Ç–µ–Ω–∞ –≤ –æ–∫—Ç—è–±—Ä–µ (8—á + 1500‚ÇΩ)

// 7. –ó–∞–≤–µ—Ä—à–∞–µ–º –∑–∞–∫–∞–∑
POST /api/orders/123/complete
// ‚úÖ –ó–∞–∫–∞–∑ status: 'completed'
// ‚úÖ completionDate: "2025-10-20"
```

### –ö–ª—é—á–µ–≤–æ–µ –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º—ã:

**–°—Ç–∞—Ä–∞—è —Å–∏—Å—Ç–µ–º–∞:**

```
–ó–∞–∫–∞–∑ #123
‚îú‚îÄ‚îÄ regularHours: 12 (—Å—É–º–º–∞ –≤—Å–µ—Ö)
‚îú‚îÄ‚îÄ overtimeHours: 2 (—Å—É–º–º–∞ –≤—Å–µ—Ö)
‚îî‚îÄ‚îÄ completionDate: 2025-10-20

–†–∞—Å—á—ë—Ç –∑–∞—Ä–ø–ª–∞—Ç—ã –∑–∞ –æ–∫—Ç—è–±—Ä—å:
‚úÖ –í–°–ï 12+2 = 14 —á–∞—Å–æ–≤ –∏–¥—É—Ç –≤ –æ–∫—Ç—è–±—Ä—å
```

**–ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞:**

```
–ó–∞–∫–∞–∑ #123
‚îú‚îÄ‚îÄ WorkSession #1
‚îÇ   ‚îú‚îÄ‚îÄ workDate: 2025-09-15  ‚≠ê
‚îÇ   ‚îú‚îÄ‚îÄ regularHours: 4
‚îÇ   ‚îî‚îÄ‚îÄ overtimeHours: 0
‚îî‚îÄ‚îÄ WorkSession #2
    ‚îú‚îÄ‚îÄ workDate: 2025-10-20  ‚≠ê
    ‚îú‚îÄ‚îÄ regularHours: 6
    ‚îî‚îÄ‚îÄ overtimeHours: 2

–†–∞—Å—á—ë—Ç –∑–∞—Ä–ø–ª–∞—Ç—ã –∑–∞ —Å–µ–Ω—Ç—è–±—Ä—å:
‚úÖ –°–µ—Å—Å–∏—è #1: 4 —á–∞—Å–∞ –≤ —Å–µ–Ω—Ç—è–±—Ä–µ

–†–∞—Å—á—ë—Ç –∑–∞—Ä–ø–ª–∞—Ç—ã –∑–∞ –æ–∫—Ç—è–±—Ä—å:
‚úÖ –°–µ—Å—Å–∏—è #2: 6+2 = 8 —á–∞—Å–æ–≤ –≤ –æ–∫—Ç—è–±—Ä–µ
```

---

## üöÄ –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å backend

```bash
cd backend
npm install
npm run start:dev
```

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –Ω–æ–≤—É—é —Ç–∞–±–ª–∏—Ü—É `work_sessions` –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ (–±–ª–∞–≥–æ–¥–∞—Ä—è `synchronize: true` –¥–ª—è dev).

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å frontend

```bash
cd frontend
npm install
ng serve
```

### 3. –¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π

#### A. –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑

1. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –º–µ–Ω–µ–¥–∂–µ—Ä/–∞–¥–º–∏–Ω
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–ó–∞–∫–∞–∑—ã" ‚Üí "–°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑"
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É, —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ

#### B. –ù–∞–∑–Ω–∞—á–∏—Ç—å –∏–Ω–∂–µ–Ω–µ—Ä–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∑–∞–∫–∞–∑
2. –ù–∞–∑–Ω–∞—á—å—Ç–µ –∏–Ω–∂–µ–Ω–µ—Ä–∞

#### C. –°–æ–∑–¥–∞—Ç—å —Ä–∞–±–æ—á–∏–µ —Å–µ—Å—Å–∏–∏

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–†–∞–±–æ—á–∏–µ —Å–µ—Å—Å–∏–∏"
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –ø–µ—Ä–≤–æ–π —Å–µ—Å—Å–∏–∏:
   - –î–∞—Ç–∞: —Å–µ–≥–æ–¥–Ω—è
   - –û–±—ã—á–Ω—ã–µ —á–∞—Å—ã: 4
   - –û–ø–ª–∞—Ç–∞ –∑–∞ –º–∞—à–∏–Ω—É: 2000
   - –ü—Ä–∏–º–µ—á–∞–Ω–∏—è: "–ü–µ—Ä–≤—ã–π –≤—ã–µ–∑–¥"
3. –ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–µ—Å—Å–∏—é"
4. –°–æ–∑–¥–∞–π—Ç–µ –≤—Ç–æ—Ä—É—é —Å–µ—Å—Å–∏—é —Å –¥—Ä—É–≥–æ–π –¥–∞—Ç–æ–π

#### D. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤–æ–¥–∫—É

- –í –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ –≤–∫–ª–∞–¥–∫–∏ –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è —Å–≤–æ–¥–∫–∞
- –û–±—â–∏–µ —á–∞—Å—ã, –æ–ø–ª–∞—Ç–∞ –∏ —Ç.–¥.

#### E. –ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–∫–∞–∑

- –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –≤—Å–µ—Ö —Å–µ—Å—Å–∏–π –º–æ–∂–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–∫–∞–∑
- (–ö–Ω–æ–ø–∫–∞ –ø–æ—è–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–∞–≤–∞)

#### F. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞—Å—á—ë—Ç—ã –∑–∞—Ä–ø–ª–∞—Ç—ã

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–†–∞—Å—á—ë—Ç—ã" ‚Üí "–ó–∞—Ä–ø–ª–∞—Ç–∞"
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ä–∞—Å—á—ë—Ç –∑–∞ –º–µ—Å—è—Ü
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Å—Å–∏–∏ —É—á—Ç–µ–Ω—ã –ø–æ —Å–≤–æ–∏–º –º–µ—Å—è—Ü–∞–º

---

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ `work_sessions`

```sql
CREATE TABLE work_sessions (
  id INTEGER PRIMARY KEY,
  order_id INTEGER NOT NULL,
  engineer_id INTEGER NOT NULL,
  work_date DATE NOT NULL,  -- ‚≠ê –ö–ª—é—á–µ–≤–æ–µ –ø–æ–ª–µ!
  regular_hours DECIMAL(5,2) DEFAULT 0,
  overtime_hours DECIMAL(5,2) DEFAULT 0,
  calculated_amount DECIMAL(10,2) DEFAULT 0,
  car_usage_amount DECIMAL(10,2) DEFAULT 0,
  -- ... —Å—Ç–∞–≤–∫–∏ –∏ —Ä–∞–∑–±–∏–≤–∫–∏ –æ–ø–ª–∞—Ç ...
  status VARCHAR(20) DEFAULT 'completed',
  can_be_invoiced BOOLEAN DEFAULT true,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,

  FOREIGN KEY (order_id) REFERENCES orders(id) ON DELETE CASCADE,
  FOREIGN KEY (engineer_id) REFERENCES engineers(id) ON DELETE CASCADE
);

CREATE INDEX idx_work_date ON work_sessions(work_date);
CREATE INDEX idx_engineer_work_date ON work_sessions(engineer_id, work_date);
CREATE INDEX idx_order_id ON work_sessions(order_id);
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### Backend endpoints

```bash
# –°–æ–∑–¥–∞—Ç—å —Å–µ—Å—Å–∏—é
curl -X POST http://localhost:3000/api/orders/1/work-sessions \
  -H "Authorization: Bearer TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "workDate": "2025-10-15",
    "regularHours": 4,
    "overtimeHours": 0,
    "carPayment": 2000,
    "notes": "–¢–µ—Å—Ç"
  }'

# –ü–æ–ª—É—á–∏—Ç—å —Å–µ—Å—Å–∏–∏ –∑–∞–∫–∞–∑–∞
curl http://localhost:3000/api/orders/1/work-sessions \
  -H "Authorization: Bearer TOKEN"

# –ü–æ–ª—É—á–∏—Ç—å –º–æ–∏ —Å–µ—Å—Å–∏–∏
curl http://localhost:3000/api/work-sessions/my/sessions \
  -H "Authorization: Bearer TOKEN"
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### 1. –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- –°—Ç–∞—Ä—ã–µ –ø–æ–ª—è –≤ `Order` (`regularHours`, `overtimeHours`) **–ù–ï —É–¥–∞–ª–µ–Ω—ã**
- –û–Ω–∏ –æ—Å—Ç–∞–ª–∏—Å—å –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º
- –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç **–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ**

### 2. –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

- –î–ª—è production –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –º–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- –°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ dev

### 3. –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

- **–ò–Ω–∂–µ–Ω–µ—Ä—ã** –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–µ—Å—Å–∏–∏ –¥–ª—è —Å–≤–æ–∏—Ö –∑–∞–∫–∞–∑–æ–≤
- **–ú–µ–Ω–µ–¥–∂–µ—Ä—ã** –º–æ–≥—É—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Å—Å–∏–∏
- **–ê–¥–º–∏–Ω—ã** –º–æ–≥—É—Ç —É–¥–∞–ª—è—Ç—å —Å–µ—Å—Å–∏–∏

### 4. –í–∞–ª–∏–¥–∞—Ü–∏—è

- workDate –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞
- –ß–∞—Å—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å >= 0
- carPayment –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å >= 0

---

## üìù –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤

### Backend

- ‚úÖ `backend/src/entities/work-session.entity.ts` (–Ω–æ–≤—ã–π)
- ‚úÖ `backend/src/entities/order.entity.ts` (–æ–±–Ω–æ–≤–ª—ë–Ω)
- ‚úÖ `backend/src/modules/work-sessions/work-sessions.service.ts` (–Ω–æ–≤—ã–π)
- ‚úÖ `backend/src/modules/work-sessions/work-sessions.controller.ts` (–Ω–æ–≤—ã–π)
- ‚úÖ `backend/src/modules/work-sessions/work-sessions.module.ts` (–Ω–æ–≤—ã–π)
- ‚úÖ `backend/src/modules/orders/orders.service.ts` (–æ–±–Ω–æ–≤–ª—ë–Ω)
- ‚úÖ `backend/src/modules/orders/orders.controller.ts` (–æ–±–Ω–æ–≤–ª—ë–Ω)
- ‚úÖ `backend/src/modules/orders/orders.module.ts` (–æ–±–Ω–æ–≤–ª—ë–Ω)
- ‚úÖ `backend/src/modules/—Ä–∞—Å—á–µ—Ç—ã/salary-calculation.service.ts` (–æ–±–Ω–æ–≤–ª—ë–Ω)
- ‚úÖ `backend/src/modules/—Ä–∞—Å—á–µ—Ç—ã/calculations.module.ts` (–æ–±–Ω–æ–≤–ª—ë–Ω)
- ‚úÖ `backend/src/modules/statistics/statistics.service.ts` (–æ–±–Ω–æ–≤–ª—ë–Ω)
- ‚úÖ `backend/src/modules/statistics/statistics.module.ts` (–æ–±–Ω–æ–≤–ª—ë–Ω)
- ‚úÖ `backend/src/app.module.ts` (–æ–±–Ω–æ–≤–ª—ë–Ω)

### Shared

- ‚úÖ `shared/dtos/work-session.dto.ts` (–Ω–æ–≤—ã–π)
- ‚úÖ `shared/index.ts` (–æ–±–Ω–æ–≤–ª—ë–Ω)

### Frontend

- ‚úÖ `frontend/src/app/services/work-sessions.service.ts` (–Ω–æ–≤—ã–π)
- ‚úÖ `frontend/src/app/components/work-session-list/` (–Ω–æ–≤—ã–π)
  - work-session-list.component.ts
  - work-session-list.component.html
  - work-session-list.component.scss
- ‚úÖ `frontend/src/app/components/work-session-form/` (–Ω–æ–≤—ã–π)
  - work-session-form.component.ts
  - work-session-form.component.html
  - work-session-form.component.scss
- ‚úÖ `frontend/src/app/pages/order-edit/order-edit.component.ts` (–æ–±–Ω–æ–≤–ª—ë–Ω)
- ‚úÖ `frontend/src/app/pages/order-edit/order-edit.component.html` (–æ–±–Ω–æ–≤–ª—ë–Ω)

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- ‚úÖ `docs/WORK_SESSIONS_PROPOSAL.md` (–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ)
- ‚úÖ `docs/WORK_SESSIONS_IMPLEMENTATION_SUMMARY.md` (—ç—Ç–æ—Ç —Ñ–∞–π–ª)

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—á–∏—Ö —Å–µ—Å—Å–∏–π**

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:

1. ‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤—ã–µ–∑–¥—ã –Ω–∞ –æ–¥–∏–Ω –∑–∞–∫–∞–∑
2. ‚úÖ –£—á—ë—Ç —Ä–∞–±–æ—Ç –≤ —Ä–∞–∑–Ω—ã–µ –º–µ—Å—è—Ü—ã –ø–æ –¥–∞—Ç–µ –≤—ã–µ–∑–¥–∞
3. ‚úÖ –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—é –∫–∞–∂–¥–æ–π —Å–µ—Å—Å–∏–∏ —Å –ø–æ–ª–Ω—ã–º–∏ —Ä–∞—Å—á—ë—Ç–∞–º–∏
4. ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ä–∞—Å—á—ë—Ç –∑–∞—Ä–ø–ª–∞—Ç—ã –ø–æ –º–µ—Å—è—Ü–∞–º
5. ‚úÖ –£–¥–æ–±–Ω—ã–π UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏—è–º–∏
6. ‚úÖ –ü–æ–ª–Ω—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!** üöÄ
