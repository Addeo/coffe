# ðŸ”§ ÐšÐ°Ðº Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ SSH Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ðº VPS

## âŒ ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°:

```
user1@192.144.12.102: Permission denied (publickey)
```

Ð­Ñ‚Ð¾ Ð·Ð½Ð°Ñ‡Ð¸Ñ‚, Ñ‡Ñ‚Ð¾ VPS Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°ÐµÑ‚ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ SSH ÐºÐ»ÑŽÑ‡Ð¸, Ð° Ð¿Ð°Ñ€Ð¾Ð»ÑŒ Ð¾Ñ‚ÐºÐ»ÑŽÑ‡Ñ‘Ð½.

---

## âœ… Ð ÐµÑˆÐµÐ½Ð¸Ðµ A: Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ SSH ÐºÐ»ÑŽÑ‡ Ñ‡ÐµÑ€ÐµÐ· Ð¿Ð°Ð½ÐµÐ»ÑŒ Cloud.ru

### Ð¨Ð°Ð³ 1: Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ð²Ð°Ñˆ Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ SSH ÐºÐ»ÑŽÑ‡

Ð’Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ Ð½Ð° Ð²Ð°ÑˆÐµÐ¼ Mac:

```bash
cat ~/.ssh/id_ed25519.pub
```

**Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ð²ÑÑŽ ÑÑ‚Ñ€Ð¾ÐºÑƒ** (Ð½Ð°Ñ‡Ð¸Ð½Ð°ÐµÑ‚ÑÑ Ñ `ssh-ed25519 ...`)

### Ð¨Ð°Ð³ 2: Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ ÐºÐ»ÑŽÑ‡ Ð² Cloud.ru

1. ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ: https://cloud.ru/
2. ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ: **Ð’Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ñ‹Ðµ Ð¼Ð°ÑˆÐ¸Ð½Ñ‹** â†’ **vm-46609d42d**
3. ÐÐ°Ð¹Ð´Ð¸Ñ‚Ðµ Ñ€Ð°Ð·Ð´ÐµÐ» **"SSH ÐºÐ»ÑŽÑ‡Ð¸"** Ð¸Ð»Ð¸ **"Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ"**
4. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ **"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ SSH ÐºÐ»ÑŽÑ‡"**
5. Ð’ÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ ÑÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ ÐºÐ»ÑŽÑ‡
6. Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚Ðµ

### Ð¨Ð°Ð³ 3: ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ

```bash
ssh user1@192.144.12.102
# Ð”Ð¾Ð»Ð¶Ð½Ð¾ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒÑÑ Ð‘Ð•Ð— Ð¿Ð°Ñ€Ð¾Ð»Ñ!
```

---

## âœ… Ð ÐµÑˆÐµÐ½Ð¸Ðµ B: Ð’ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð²Ñ…Ð¾Ð´ Ð¿Ð¾ Ð¿Ð°Ñ€Ð¾Ð»ÑŽ (Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾)

Ð•ÑÐ»Ð¸ Ð½Ðµ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÐºÐ»ÑŽÑ‡ Ñ‡ÐµÑ€ÐµÐ· Ð¿Ð°Ð½ÐµÐ»ÑŒ:

### Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ 1: Ð§ÐµÑ€ÐµÐ· Cloud.ru Console

1. ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ: https://cloud.ru/
2. ÐÐ°Ð¹Ð´Ð¸Ñ‚Ðµ **vm-46609d42d**
3. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ **"ÐšÐ¾Ð½ÑÐ¾Ð»ÑŒ"** Ð¸Ð»Ð¸ **"VNC Console"**
4. Ð—Ð°Ð»Ð¾Ð³Ð¸Ð½ÑŒÑ‚ÐµÑÑŒ ÐºÐ°Ðº `user1` Ñ Ð¿Ð°Ñ€Ð¾Ð»ÐµÐ¼ `coffeAdmin123!`
5. Ð’Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ:

```bash
# Ð’ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð²Ñ…Ð¾Ð´ Ð¿Ð¾ Ð¿Ð°Ñ€Ð¾Ð»ÑŽ
sudo nano /etc/ssh/sshd_config

# ÐÐ°Ð¹Ð´Ð¸Ñ‚Ðµ Ð¸ Ð¸Ð·Ð¼ÐµÐ½Ð¸Ñ‚Ðµ:
PasswordAuthentication no
# Ð½Ð°:
PasswordAuthentication yes

# Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚Ðµ (Ctrl+O, Enter, Ctrl+X)

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ SSH:
sudo systemctl restart sshd

# Ð¢ÐµÐ¿ÐµÑ€ÑŒ Ð¿Ð¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ñ Ð²Ð°ÑˆÐµÐ³Ð¾ Mac:
ssh user1@192.144.12.102
```

### Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ 2: Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÐºÐ»ÑŽÑ‡ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ Ñ‡ÐµÑ€ÐµÐ· ÐºÐ¾Ð½ÑÐ¾Ð»ÑŒ

Ð’ ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸ Cloud.ru Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ:

```bash
# Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ Ð´Ð»Ñ ÐºÐ»ÑŽÑ‡ÐµÐ¹
mkdir -p ~/.ssh
chmod 700 ~/.ssh

# Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð²Ð°Ñˆ Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ ÐºÐ»ÑŽÑ‡
cat >> ~/.ssh/authorized_keys << 'EOF'
Ð’Ð¡Ð¢ÐÐ’Ð¬Ð¢Ð•_Ð’ÐÐ¨_ÐŸÐ£Ð‘Ð›Ð˜Ð§ÐÐ«Ð™_ÐšÐ›Ð®Ð§_Ð¡Ð®Ð”Ð
EOF

chmod 600 ~/.ssh/authorized_keys

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ
cat ~/.ssh/authorized_keys
```

**Ð’Ð°Ñˆ Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ ÐºÐ»ÑŽÑ‡ Ð´Ð»Ñ Ð²ÑÑ‚Ð°Ð²ÐºÐ¸:**

```bash
# ÐÐ° Mac Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ:
cat ~/.ssh/id_ed25519.pub
# Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ð²Ñ‹Ð²Ð¾Ð´
```

---

## ðŸ§ª ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° SSH Ð¿Ð¾ÑÐ»Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸:

```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° 1: ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ
ssh user1@192.144.12.102 "echo 'SSH works!'"

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° 2: Docker
ssh user1@192.144.12.102 "docker --version"

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° 3: Ð”Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ñ
ssh user1@192.144.12.102 "mkdir -p ~/coffe && cd ~/coffe && pwd"
```

---

## âœ… ÐŸÐ¾ÑÐ»Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ SSH:

Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸:

```bash
bash check-deployment.sh
```

Ð’Ñ‹ Ð´Ð¾Ð»Ð¶Ð½Ñ‹ ÑƒÐ²Ð¸Ð´ÐµÑ‚ÑŒ:

```
2ï¸âƒ£  ÐŸÐžÐ”ÐšÐ›Ð®Ð§Ð•ÐÐ˜Ð• Ðš VPS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SSH Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ: âœ… OK
```

---

## ðŸš€ Ð—Ð°Ñ‚ÐµÐ¼ Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶Ð°Ð¹Ñ‚Ðµ Ð´ÐµÐ¿Ð»Ð¾Ð¹:

```bash
git commit -m "Deploy to VPS"
git push origin main
```

ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð´ÐµÐ¿Ð»Ð¾Ð¹:

```
https://github.com/Addeo/coffe-deploy/actions
```
