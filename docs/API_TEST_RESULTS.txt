
> coffee-admin-backend@1.0.0 test:api
> node scripts/test-api.js

[1m
üöÄ –ù–ê–ß–ê–õ–û –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–û–ì–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø API[0m
[36müìç Base URL: http://localhost:3001/api
[0m
[36m
============================================================[0m
[1m–¢–µ—Å—Ç: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω–∞[0m
[36m============================================================[0m
[34m   –ê–¥–º–∏–Ω —Å–æ–∑–¥–∞–Ω/–ø–æ–ª—É—á–µ–Ω: undefined[0m
[32m‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω–∞ - –£–°–ü–ï–®–ù–û[0m
[36m
============================================================[0m
[1m–¢–µ—Å—Ç: –õ–æ–≥–∏–Ω –∞–¥–º–∏–Ω–∞[0m
[36m============================================================[0m
[34m   –¢–æ–∫–µ–Ω –ø–æ–ª—É—á–µ–Ω: eyJhbGciOiJIUzI1NiIs...[0m
[34m   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: admin@coffee.com[0m
[34m   –†–æ–ª—å: admin[0m
[32m‚úÖ –õ–æ–≥–∏–Ω –∞–¥–º–∏–Ω–∞ - –£–°–ü–ï–®–ù–û[0m
[36m
============================================================[0m
[1m–¢–µ—Å—Ç: –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏[0m
[36m============================================================[0m
[31m‚ùå –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ - –û–®–ò–ë–ö–ê[0m
[31m   HTTP 500: SQLITE_CONSTRAINT: UNIQUE constraint failed: organizations.name
{
  "statusCode": 500,
  "timestamp": "2025-11-19T15:37:17.659Z",
  "path": "/api/organizations",
  "method": "POST",
  "message": "SQLITE_CONSTRAINT: UNIQUE constraint failed: organizations.name",
  "error": {
    "name": "QueryFailedError",
    "message": "SQLITE_CONSTRAINT: UNIQUE constraint failed: organizations.name",
    "details": {
      "name": "QueryFailedError",
      "message": "SQLITE_CONSTRAINT: UNIQUE constraint failed: organizations.name"
    },
    "stack": "QueryFailedError: SQLITE_CONSTRAINT: UNIQUE constraint failed: organizations.name\n    at Statement.handler (/Users/sergejkosilov/WebstormProjects/new goal/coffe/node_modules/typeorm/driver/src/driver/sqlite/SqliteQueryRunner.ts:133:29)"
  }
}[0m
[33m   {[0m
[36m
============================================================[0m
[1m–¢–µ—Å—Ç: –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–∂–µ–Ω–µ—Ä–∞[0m
[36m============================================================[0m
[31m‚ùå –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–∂–µ–Ω–µ—Ä–∞ - –û–®–ò–ë–ö–ê[0m
[31m   HTTP 400: Validation failed
{
  "statusCode": 400,
  "timestamp": "2025-11-19T15:37:18.167Z",
  "path": "/api/users",
  "method": "POST",
  "message": "Validation failed",
  "error": {
    "name": "HttpException",
    "message": "Validation failed",
    "details": {
      "statusCode": 400,
      "message": "Validation failed",
      "errors": [
        {
          "property": "engineerType",
          "value": "FULL_TIME",
          "constraints": [
            "engineerType must be one of the following values: staff, contract"
          ]
        }
      ]
    }
  }
}[0m
[33m   {[0m
[36m
============================================================[0m
[1m–¢–µ—Å—Ç: –°–æ–∑–¥–∞–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞[0m
[36m============================================================[0m
[34m   –ú–µ–Ω–µ–¥–∂–µ—Ä —Å–æ–∑–¥–∞–Ω: User ID 17[0m
[34m   Email: manager-1763566638670@test.com[0m
[32m‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ - –£–°–ü–ï–®–ù–û[0m
[36m
============================================================[0m
[1m–¢–µ—Å—Ç: –õ–æ–≥–∏–Ω –º–µ–Ω–µ–¥–∂–µ—Ä–∞[0m
[36m============================================================[0m
[34m   –ú–µ–Ω–µ–¥–∂–µ—Ä –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω: manager-1763566638670@test.com[0m
[34m   –¢–æ–∫–µ–Ω –ø–æ–ª—É—á–µ–Ω: eyJhbGciOiJIUzI1NiIs...[0m
[32m‚úÖ –õ–æ–≥–∏–Ω –º–µ–Ω–µ–¥–∂–µ—Ä–∞ - –£–°–ü–ï–®–ù–û[0m
[36m
============================================================[0m
[1m–¢–µ—Å—Ç: –õ–æ–≥–∏–Ω –∏–Ω–∂–µ–Ω–µ—Ä–∞[0m
[36m============================================================[0m
[31m‚ùå –õ–æ–≥–∏–Ω –∏–Ω–∂–µ–Ω–µ—Ä–∞ - –û–®–ò–ë–ö–ê[0m
[31m   HTTP 500: SQLITE_ERROR: no such column: NaN
{
  "statusCode": 500,
  "timestamp": "2025-11-19T15:37:19.831Z",
  "path": "/api/users/null",
  "method": "GET",
  "message": "SQLITE_ERROR: no such column: NaN",
  "error": {
    "name": "QueryFailedError",
    "message": "SQLITE_ERROR: no such column: NaN",
    "details": {
      "name": "QueryFailedError",
      "message": "SQLITE_ERROR: no such column: NaN"
    },
    "stack": "QueryFailedError: SQLITE_ERROR: no such column: NaN\n    at handler (/Users/sergejkosilov/WebstormProjects/new goal/coffe/node_modules/typeorm/driver/src/driver/sqlite/SqliteQueryRunner.ts:133:29)\n    at replacement (/Users/sergejkosilov/WebstormProjects/new goal/coffe/node_modules/sqlite3/lib/trace.js:25:27)\n    at Statement.errBack (/Users/sergejkosilov/WebstormProjects/new goal/coffe/node_modules/sqlite3/lib/sqlite3.js:15:21)"
  }
}[0m
[33m   {[0m
[36m
============================================================[0m
[1m–¢–µ—Å—Ç: –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–π[0m
[36m============================================================[0m
[33m   –ü—Ä–æ–ø—É—â–µ–Ω–æ: —Å–æ–≥–ª–∞—à–µ–Ω–∏—è –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è[0m
[32m‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–π - –£–°–ü–ï–®–ù–û[0m
[36m
============================================================[0m
[1m–¢–µ—Å—Ç: –ü—Ä–∏–Ω—è—Ç–∏–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–π[0m
[36m============================================================[0m
[33m   –ü—Ä–æ–ø—É—â–µ–Ω–æ: —Å–æ–≥–ª–∞—à–µ–Ω–∏—è –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è[0m
[32m‚úÖ –ü—Ä–∏–Ω—è—Ç–∏–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–π - –£–°–ü–ï–®–ù–û[0m
[36m
============================================================[0m
[1m–¢–µ—Å—Ç: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏[0m
[36m============================================================[0m
[31m‚ùå –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏ - –û–®–ò–ë–ö–ê[0m
[31m   Organization ID –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω[0m
[33m       at test10_CreateOrder (/Users/sergejkosilov/WebstormProjects/new goal/coffe/backend/scripts/test-api.js:295:11)[0m
[36m
============================================================[0m
[1m–¢–µ—Å—Ç: –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏[0m
[36m============================================================[0m
[31m‚ùå –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏ - –û–®–ò–ë–ö–ê[0m
[31m   HTTP 400: Validation failed (numeric string is expected)
{
  "statusCode": 400,
  "timestamp": "2025-11-19T15:37:21.849Z",
  "path": "/api/orders/null",
  "method": "GET",
  "message": "Validation failed (numeric string is expected)",
  "error": {
    "name": "BadRequestException",
    "message": "Validation failed (numeric string is expected)",
    "details": {
      "message": "Validation failed (numeric string is expected)",
      "error": "Bad Request",
      "statusCode": 400
    }
  }
}[0m
[33m   {[0m
[36m
============================================================[0m
[1m–¢–µ—Å—Ç: –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏–Ω–∂–µ–Ω–µ—Ä–∞[0m
[36m============================================================[0m
[31m‚ùå –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏–Ω–∂–µ–Ω–µ—Ä–∞ - –û–®–ò–ë–ö–ê[0m
[31m   HTTP 403: Forbidden resource
{
  "statusCode": 403,
  "timestamp": "2025-11-19T15:37:22.356Z",
  "path": "/api/orders/null/assign-engineer",
  "method": "POST",
  "message": "Forbidden resource",
  "error": {
    "name": "ForbiddenException",
    "message": "Forbidden resource",
    "details": {
      "message": "Forbidden resource",
      "error": "Forbidden",
      "statusCode": 403
    }
  }
}[0m
[33m   {[0m
[36m
============================================================[0m
[1m–¢–µ—Å—Ç: –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π[0m
[36m============================================================[0m
[31m‚ùå –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π - –û–®–ò–ë–ö–ê[0m
[31m   HTTP 401: Unauthorized
{
  "statusCode": 401,
  "timestamp": "2025-11-19T15:37:22.860Z",
  "path": "/api/orders/null/assignments",
  "method": "GET",
  "message": "Unauthorized",
  "error": {
    "name": "UnauthorizedException",
    "message": "Unauthorized",
    "details": {
      "message": "Unauthorized",
      "statusCode": 401
    }
  }
}[0m
[33m   {[0m
[36m
============================================================[0m
[1m–¢–µ—Å—Ç: –ü–æ–ª—É—á–µ–Ω–∏–µ –º–æ–∏—Ö –∑–∞—è–≤–æ–∫[0m
[36m============================================================[0m
[31m‚ùå –ü–æ–ª—É—á–µ–Ω–∏–µ –º–æ–∏—Ö –∑–∞—è–≤–æ–∫ - –û–®–ò–ë–ö–ê[0m
[31m   HTTP 401: Unauthorized
{
  "statusCode": 401,
  "timestamp": "2025-11-19T15:37:23.363Z",
  "path": "/api/orders",
  "method": "GET",
  "message": "Unauthorized",
  "error": {
    "name": "UnauthorizedException",
    "message": "Unauthorized",
    "details": {
      "message": "Unauthorized",
      "statusCode": 401
    }
  }
}[0m
[33m   {[0m
[36m
============================================================[0m
[1m–¢–µ—Å—Ç: –ü—Ä–∏–Ω—è—Ç–∏–µ –∑–∞—è–≤–∫–∏ –∏–Ω–∂–µ–Ω–µ—Ä–æ–º[0m
[36m============================================================[0m
[31m‚ùå –ü—Ä–∏–Ω—è—Ç–∏–µ –∑–∞—è–≤–∫–∏ –∏–Ω–∂–µ–Ω–µ—Ä–æ–º - –û–®–ò–ë–ö–ê[0m
[31m   HTTP 401: Unauthorized
{
  "statusCode": 401,
  "timestamp": "2025-11-19T15:37:23.869Z",
  "path": "/api/orders/null/accept",
  "method": "POST",
  "message": "Unauthorized",
  "error": {
    "name": "UnauthorizedException",
    "message": "Unauthorized",
    "details": {
      "message": "Unauthorized",
      "statusCode": 401
    }
  }
}[0m
[33m   {[0m
[36m
============================================================[0m
[1m–¢–µ—Å—Ç: –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–±–æ—á–µ–π —Å–µ—Å—Å–∏–∏[0m
[36m============================================================[0m
[31m‚ùå –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–±–æ—á–µ–π —Å–µ—Å—Å–∏–∏ - –û–®–ò–ë–ö–ê[0m
[31m   HTTP 401: Unauthorized
{
  "statusCode": 401,
  "timestamp": "2025-11-19T15:37:24.379Z",
  "path": "/api/orders/null/work-sessions",
  "method": "POST",
  "message": "Unauthorized",
  "error": {
    "name": "UnauthorizedException",
    "message": "Unauthorized",
    "details": {
      "message": "Unauthorized",
      "statusCode": 401
    }
  }
}[0m
[33m   {[0m
[36m
============================================================[0m
[1m–¢–µ—Å—Ç: –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞–±–æ—á–∏—Ö —Å–µ—Å—Å–∏–π[0m
[36m============================================================[0m
[31m‚ùå –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞–±–æ—á–∏—Ö —Å–µ—Å—Å–∏–π - –û–®–ò–ë–ö–ê[0m
[31m   HTTP 401: Unauthorized
{
  "statusCode": 401,
  "timestamp": "2025-11-19T15:37:24.886Z",
  "path": "/api/orders/null/work-sessions",
  "method": "GET",
  "message": "Unauthorized",
  "error": {
    "name": "UnauthorizedException",
    "message": "Unauthorized",
    "details": {
      "message": "Unauthorized",
      "statusCode": 401
    }
  }
}[0m
[33m   {[0m
[36m
============================================================[0m
[1m–¢–µ—Å—Ç: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã[0m
[36m============================================================[0m
[31m‚ùå –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã - –û–®–ò–ë–ö–ê[0m
[31m   HTTP 401: Unauthorized
{
  "statusCode": 401,
  "timestamp": "2025-11-19T15:37:25.394Z",
  "path": "/api/orders/null/complete-work",
  "method": "POST",
  "message": "Unauthorized",
  "error": {
    "name": "UnauthorizedException",
    "message": "Unauthorized",
    "details": {
      "message": "Unauthorized",
      "statusCode": 401
    }
  }
}[0m
[33m   {[0m
[36m
============================================================[0m
[1m–¢–µ—Å—Ç: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏[0m
[36m============================================================[0m
[31m‚ùå –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏ - –û–®–ò–ë–ö–ê[0m
[31m   HTTP 403: Forbidden resource
{
  "statusCode": 403,
  "timestamp": "2025-11-19T15:37:25.898Z",
  "path": "/api/orders/null/complete",
  "method": "POST",
  "message": "Forbidden resource",
  "error": {
    "name": "ForbiddenException",
    "message": "Forbidden resource",
    "details": {
      "message": "Forbidden resource",
      "error": "Forbidden",
      "statusCode": 403
    }
  }
}[0m
[33m   {[0m
[36m
============================================================[0m
[1m–¢–µ—Å—Ç: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏[0m
[36m============================================================[0m
[33m   ‚ö†Ô∏è  –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞: HTTP 404: Cannot GET /api/statistics/engineer/null?year=2025&month=11
{
  "statusCode": 404,
  "timestamp": "2025-11-19T15:37:26.404Z",
  "path": "/api/statistics/engineer/null?year=2025&month=11",
  "method": "GET",
  "message": "Cannot GET /api/statistics/engineer/null?year=2025&month=11",
  "error": {
    "name": "NotFoundException",
    "message": "Cannot GET /api/statistics/engineer/null?year=2025&month=11",
    "details": {
      "message": "Cannot GET /api/statistics/engineer/null?year=2025&month=11",
      "error": "Not Found",
      "statusCode": 404
    }
  }
}[0m
[32m‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ - –£–°–ü–ï–®–ù–û[0m
[36m
============================================================[0m
[1m–ò–¢–û–ì–ò –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø[0m
[36m============================================================[0m
[32m‚úÖ –£—Å–ø–µ—à–Ω–æ: 7[0m
[31m‚ùå –û—à–∏–±–æ–∫: 13[0m
[34müìä –í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤: 20[0m
[33m
‚ö†Ô∏è  –ï–°–¢–¨ –û–®–ò–ë–ö–ò –í –¢–ï–°–¢–ê–•[0m
