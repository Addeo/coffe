# CORS Fix - –ü–æ–ª–Ω–æ—Å—Ç—å—é –û—Ç–∫—Ä—ã—Ç—ã–π –î–æ—Å—Ç—É–ø

## ‚úÖ –ß—Ç–æ –ò–∑–º–µ–Ω–µ–Ω–æ

**File:** `backend/src/main.ts`

### –î–æ:

```typescript
app.enableCors({
  origin: true,
  credentials: true,
  methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS', 'PATCH'],
  allowedHeaders: ['Content-Type', 'Authorization', ...],
});
```

### –ü–æ—Å–ª–µ:

```typescript
app.enableCors({
  origin: '*', // ‚úÖ –†–∞–∑—Ä–µ—à–∏—Ç—å –í–°–ï –∏—Å—Ç–æ—á–Ω–∏–∫–∏
  credentials: false, // ‚úÖ –û—Ç–∫–ª—é—á–∏—Ç—å credentials (—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –¥–ª—è *)
  methods: '*', // ‚úÖ –†–∞–∑—Ä–µ—à–∏—Ç—å –í–°–ï –º–µ—Ç–æ–¥—ã
  allowedHeaders: '*', // ‚úÖ –†–∞–∑—Ä–µ—à–∏—Ç—å –í–°–ï –∑–∞–≥–æ–ª–æ–≤–∫–∏
  exposedHeaders: '*', // ‚úÖ –≠–∫—Å–ø–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –í–°–ï –∑–∞–≥–æ–ª–æ–≤–∫–∏
  preflightContinue: false,
  optionsSuccessStatus: 204,
});
```

## üöÄ –ö–∞–∫ –ü—Ä–∏–º–µ–Ω–∏—Ç—å

### 1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Backend

**–ï—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ:**

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å (Ctrl+C)
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–Ω–æ–≤–æ:
cd backend
npm run start:dev
```

**–ï—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω —á–µ—Ä–µ–∑ PM2:**

```bash
pm2 restart coffee-backend
```

**–ï—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**

```bash
# SSH –Ω–∞ —Å–µ—Ä–≤–µ—Ä
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CORS Headers

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞:

```bash
curl -I http://localhost:3001/api/orders

# –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
# Access-Control-Allow-Origin: *
# Access-Control-Allow-Methods: *
# Access-Control-Allow-Headers: *
```

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

**–≠—Ç–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –†–ê–ó–†–ê–ë–û–¢–ö–ò!**

–î–ª—è **production** –Ω—É–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å:

```typescript
app.enableCors({
  origin: ['https://yourdomain.com', 'https://app.yourdomain.com'],
  credentials: true,
  methods: ['GET', 'POST', 'PUT', 'DELETE', 'PATCH'],
  allowedHeaders: ['Content-Type', 'Authorization'],
});
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ frontend –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. ‚úÖ –õ–æ–≥–∏–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç
2. ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–∫–∞–∑–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
3. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
4. ‚úÖ –ù–µ—Ç CORS –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–¢–µ–ø–µ—Ä—å CORS –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–ª—é—á–µ–Ω!**

Frontend –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã —Å:

- `http://localhost:4200`
- `http://localhost:4202`
- `http://127.0.0.1:*`
- –õ—é–±–æ–≥–æ –¥—Ä—É–≥–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞

**–ù–∏–∫–∞–∫–∏—Ö CORS –æ—à–∏–±–æ–∫ –Ω–µ –±—É–¥–µ—Ç!** ‚ú®
