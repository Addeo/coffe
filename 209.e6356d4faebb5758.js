"use strict";(self.webpackChunkcoffee_admin=self.webpackChunkcoffee_admin||[]).push([[209],{1209:(H,R,_)=>{_.r(R),_.d(R,{ProfileComponent:()=>Ge});var e=_(4292),O=_(9351),a=_(7199),d=_(8598),g=_(6721),F=_(3505),s=_(5320),P=_(91),I=_(4910),E=_(8497),c=_(7317),h=_(1084),Q=_(4536),J=_(1980),q=_(5822),ee=_(3501),te=_(4740),ne=_(1253),S=_(8200);function oe(n,o){1&n&&(e.j41(0,"mat-error"),e.pXf(1,12),e.k0s())}function ue(n,o){1&n&&(e.j41(0,"mat-error"),e.pXf(1,13),e.k0s())}function ie(n,o){1&n&&(e.j41(0,"mat-error"),e.pXf(1,14),e.k0s())}function re(n,o){if(1&n&&(e.j41(0,"div",62)(1,"mat-form-field",52)(2,"mat-label"),e.pXf(3,15),e.k0s(),e.nrm(4,"input",63),e.k0s()()),2&n){const t=e.XpG();e.R7$(4),e.Y8G("value",t.getRoleDisplay(t.currentUser().role))}}function _e(n,o){1&n&&(e.j41(0,"mat-icon"),e.EFF(1,"refresh"),e.k0s())}function ae(n,o){1&n&&(e.j41(0,"mat-icon"),e.EFF(1,"save"),e.k0s())}function se(n,o){if(1&n){const t=e.RV6();e.j41(0,"div",64)(1,"button",65),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.cancelEdit())}),e.j41(2,"span"),e.pXf(3,16),e.k0s()(),e.j41(4,"button",66),e.DNE(5,_e,2,0,"mat-icon",50)(6,ae,2,0,"mat-icon",50),e.EFF(7),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(),e.Y8G("disabled",t.isLoading()),e.R7$(3),e.Y8G("disabled",t.isLoading()||t.profileForm.invalid),e.R7$(),e.Y8G("ngIf",t.isLoading()),e.R7$(),e.Y8G("ngIf",!t.isLoading()),e.R7$(),e.SpI(" ",t.isLoading()?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"," ")}}function le(n,o){1&n&&(e.j41(0,"div",72),e.nrm(1,"mat-spinner",73),e.j41(2,"p"),e.EFF(3,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u0442\u0430\u0432\u043e\u043a..."),e.k0s()())}function ce(n,o){1&n&&(e.j41(0,"th",86),e.pXf(1,19),e.k0s())}function ge(n,o){if(1&n&&(e.j41(0,"td",87),e.EFF(1),e.k0s()),2&n){const t=o.$implicit;e.R7$(),e.JRh(t.organizationName)}}function Pe(n,o){1&n&&(e.j41(0,"th",86),e.pXf(1,20),e.k0s())}function fe(n,o){if(1&n&&(e.j41(0,"td",87),e.EFF(1),e.k0s()),2&n){const t=o.$implicit,u=e.XpG(3);e.R7$(),e.SpI(" ",t.customBaseRate?u.formatCurrency(t.customBaseRate):"\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e"," ")}}function de(n,o){1&n&&(e.j41(0,"th",86),e.pXf(1,21),e.k0s())}function Ee(n,o){if(1&n&&(e.j41(0,"td",87),e.EFF(1),e.k0s()),2&n){const t=o.$implicit,u=e.XpG(3);e.R7$(),e.SpI(" ",t.customOvertimeRate?u.formatCurrency(t.customOvertimeRate):"\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e"," ")}}function pe(n,o){1&n&&(e.j41(0,"th",86),e.pXf(1,22),e.k0s())}function me(n,o){if(1&n&&(e.j41(0,"td",87),e.EFF(1),e.k0s()),2&n){const t=o.$implicit,u=e.XpG(3);e.R7$(),e.SpI(" ",t.customZone1Extra?u.formatCurrency(t.customZone1Extra):"-"," ")}}function Ce(n,o){1&n&&(e.j41(0,"th",86),e.pXf(1,23),e.k0s())}function Oe(n,o){if(1&n&&(e.j41(0,"td",87),e.EFF(1),e.k0s()),2&n){const t=o.$implicit,u=e.XpG(3);e.R7$(),e.SpI(" ",t.customZone2Extra?u.formatCurrency(t.customZone2Extra):"-"," ")}}function Me(n,o){1&n&&(e.j41(0,"th",86),e.pXf(1,24),e.k0s())}function Re(n,o){if(1&n&&(e.j41(0,"td",87),e.EFF(1),e.k0s()),2&n){const t=o.$implicit,u=e.XpG(3);e.R7$(),e.SpI(" ",t.customZone3Extra?u.formatCurrency(t.customZone3Extra):"-"," ")}}function Se(n,o){1&n&&e.nrm(0,"tr",88)}function Ie(n,o){1&n&&e.nrm(0,"tr",89)}function he(n,o){if(1&n&&(e.j41(0,"div",74)(1,"table",75),e.qex(2,76),e.DNE(3,ce,2,0,"th",77)(4,ge,2,1,"td",78),e.bVm(),e.qex(5,79),e.DNE(6,Pe,2,0,"th",77)(7,fe,2,1,"td",78),e.bVm(),e.qex(8,80),e.DNE(9,de,2,0,"th",77)(10,Ee,2,1,"td",78),e.bVm(),e.qex(11,81),e.DNE(12,pe,2,0,"th",77)(13,me,2,1,"td",78),e.bVm(),e.qex(14,82),e.DNE(15,Ce,2,0,"th",77)(16,Oe,2,1,"td",78),e.bVm(),e.qex(17,83),e.DNE(18,Me,2,0,"th",77)(19,Re,2,1,"td",78),e.bVm(),e.DNE(20,Se,1,0,"tr",84)(21,Ie,1,0,"tr",85),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("dataSource",t.engineerRates()),e.R7$(19),e.Y8G("matHeaderRowDef",t.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",t.displayedColumns)}}function Fe(n,o){1&n&&(e.j41(0,"div",90)(1,"mat-icon"),e.EFF(2,"info"),e.k0s(),e.j41(3,"p"),e.pXf(4,25),e.k0s()())}function Te(n,o){if(1&n&&(e.j41(0,"mat-tab",67)(1,"div",42)(2,"mat-card",68)(3,"mat-card-header")(4,"mat-card-title"),e.pXf(5,17),e.k0s(),e.j41(6,"mat-card-subtitle"),e.pXf(7,18),e.k0s()(),e.j41(8,"mat-card-content"),e.DNE(9,le,4,0,"div",69)(10,he,22,3,"div",70)(11,Fe,5,0,"div",71),e.k0s()()()()),2&n){const t=e.XpG();e.R7$(9),e.Y8G("ngIf",t.isLoadingRates()),e.R7$(),e.Y8G("ngIf",!t.isLoadingRates()&&t.engineerRates().length>0),e.R7$(),e.Y8G("ngIf",!t.isLoadingRates()&&0===t.engineerRates().length)}}function Ae(n,o){if(1&n&&(e.j41(0,"div",99)(1,"span",100),e.EFF(2,"\u0421\u0442\u0430\u0432\u043a\u0430 \u043f\u0435\u0440\u0435\u0440\u0430\u0431\u043e\u0442\u043a\u0438:"),e.k0s(),e.j41(3,"span",101),e.EFF(4),e.k0s()()),2&n){const t=e.XpG(3);e.R7$(4),e.SpI("",t.formatCurrency(t.getEngineerData().overtimeRate),"/\u0447\u0430\u0441")}}function Ne(n,o){if(1&n&&(e.j41(0,"div",96)(1,"mat-icon"),e.EFF(2,"schedule"),e.k0s(),e.j41(3,"div",97)(4,"h4"),e.pXf(5,28),e.k0s(),e.j41(6,"div",98)(7,"div",99)(8,"span",100),e.EFF(9,"\u0411\u0430\u0437\u043e\u0432\u0430\u044f \u0441\u0442\u0430\u0432\u043a\u0430:"),e.k0s(),e.j41(10,"span",101),e.EFF(11),e.k0s()(),e.DNE(12,Ae,5,1,"div",102),e.k0s()()()),2&n){const t=e.XpG(2);e.R7$(11),e.SpI("",t.formatCurrency(t.getEngineerData().baseRate),"/\u0447\u0430\u0441"),e.R7$(),e.Y8G("ngIf",t.getEngineerData().overtimeRate)}}function Le(n,o){1&n&&(e.j41(0,"div",103)(1,"mat-icon",104),e.EFF(2,"info"),e.k0s(),e.j41(3,"h4",105),e.EFF(4,"\u0414\u0430\u043d\u043d\u044b\u0435 \u0438\u043d\u0436\u0435\u043d\u0435\u0440\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b"),e.k0s(),e.j41(5,"p",106),e.EFF(6," \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e, \u0432\u0430\u0448 \u043f\u0440\u043e\u0444\u0438\u043b\u044c \u0435\u0449\u0435 \u043d\u0435 \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d. "),e.k0s()())}function ve(n,o){if(1&n&&(e.j41(0,"div",96)(1,"mat-icon"),e.EFF(2,"directions_car"),e.k0s(),e.j41(3,"div",97)(4,"h4"),e.pXf(5,29),e.k0s(),e.j41(6,"div",98)(7,"div",99)(8,"span",100),e.EFF(9,"\u0424\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0437\u0430 \u043c\u0430\u0448\u0438\u043d\u0443:"),e.k0s(),e.j41(10,"span",101),e.EFF(11),e.k0s()()()()()),2&n){const t=e.XpG(2);e.R7$(11),e.SpI("",t.formatCurrency(t.getEngineerData().fixedCarAmount),"/\u043c\u0435\u0441")}}function $e(n,o){if(1&n&&(e.j41(0,"div",96)(1,"mat-icon"),e.EFF(2,"location_on"),e.k0s(),e.j41(3,"div",97)(4,"h4"),e.pXf(5,30),e.k0s(),e.j41(6,"div",98)(7,"div",99)(8,"span",100),e.EFF(9,"\u0424\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0437\u0430 \u0442\u0435\u0440\u0440\u0438\u0442\u043e\u0440\u0438\u044e:"),e.k0s(),e.j41(10,"span",101),e.EFF(11),e.k0s()(),e.j41(12,"div",99)(13,"span",100),e.EFF(14,"\u041f\u043b\u0430\u043d\u043e\u0432\u044b\u0435 \u0447\u0430\u0441\u044b \u0432 \u043c\u0435\u0441\u044f\u0446:"),e.k0s(),e.j41(15,"span",101),e.EFF(16),e.k0s()()()()()),2&n){const t=e.XpG(2);e.R7$(11),e.SpI("",t.formatCurrency(t.getEngineerData().homeTerritoryFixedAmount),"/\u043c\u0435\u0441"),e.R7$(5),e.SpI("",t.formatNumber(t.getEngineerData().planHoursMonth)," \u0447\u0430\u0441\u043e\u0432")}}function xe(n,o){if(1&n&&(e.j41(0,"div",96)(1,"mat-icon"),e.EFF(2,"account_balance_wallet"),e.k0s(),e.j41(3,"div",97)(4,"h4"),e.pXf(5,31),e.k0s(),e.j41(6,"div",98)(7,"div",99)(8,"span",100),e.EFF(9,"\u0424\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u0430:"),e.k0s(),e.j41(10,"span",101),e.EFF(11),e.k0s()()()()()),2&n){const t=e.XpG(2);e.R7$(11),e.SpI("",t.formatCurrency(t.getEngineerData().fixedSalary),"/\u043c\u0435\u0441")}}function De(n,o){if(1&n&&(e.j41(0,"mat-tab",91)(1,"div",42)(2,"mat-card",92)(3,"mat-card-header")(4,"mat-card-title"),e.pXf(5,26),e.k0s(),e.j41(6,"mat-card-subtitle"),e.pXf(7,27),e.k0s()(),e.j41(8,"mat-card-content")(9,"div",93),e.DNE(10,Ne,13,2,"div",94)(11,Le,7,0,"div",95)(12,ve,12,1,"div",94)(13,$e,17,2,"div",94)(14,xe,12,1,"div",94),e.k0s()()()()()),2&n){const t=e.XpG();e.R7$(10),e.Y8G("ngIf",t.getEngineerData()),e.R7$(),e.Y8G("ngIf",!t.getEngineerData()),e.R7$(),e.Y8G("ngIf",t.getEngineerData()),e.R7$(),e.Y8G("ngIf",t.getEngineerData()),e.R7$(),e.Y8G("ngIf",t.getEngineerData())}}let Ge=(()=>{class n{constructor(){this.fb=(0,e.WQX)(a.ok),this.authService=(0,e.WQX)(q.u),this.themeService=(0,e.WQX)(ee.F),this.usersService=(0,e.WQX)(te.g),this.snackBar=(0,e.WQX)(I.UG),this.engineerRatesService=(0,e.WQX)(ne.n),this.isLoading=(0,e.vPA)(!1),this.isEditing=(0,e.vPA)(!1),this.currentUser=this.authService.currentUser,this.fullUserProfile=(0,e.vPA)(null),this.selectedTabIndex=(0,e.vPA)(0),this.currentTheme=this.themeService.currentTheme,this.effectiveTheme=this.themeService.effectiveTheme,this.themes=[{value:"light",label:"\u0421\u0432\u0435\u0442\u043b\u0430\u044f",icon:"light_mode"},{value:"dark",label:"\u0422\u0435\u043c\u043d\u0430\u044f",icon:"dark_mode"},{value:"auto",label:"\u0410\u0432\u0442\u043e (\u0421\u0438\u0441\u0442\u0435\u043c\u043d\u0430\u044f)",icon:"brightness_auto"}],this.engineerRates=(0,e.vPA)([]),this.isLoadingRates=(0,e.vPA)(!1),this.displayedColumns=["organizationName","customBaseRate","customOvertimeRate","customZone1Extra","customZone2Extra","customZone3Extra"]}get isEngineer(){return this.currentUser()?.role===S.gG.USER}getCurrentThemeIcon(){return this.themes.find(u=>u.value===this.currentTheme())?.icon||"brightness_auto"}getEffectiveThemeLabel(){return"dark"===this.effectiveTheme()?"\u0442\u0435\u043c\u043d\u0430\u044f":"\u0441\u0432\u0435\u0442\u043b\u0430\u044f"}getEffectiveThemeIcon(){return"dark"===this.effectiveTheme()?"dark_mode":"light_mode"}getEffectiveThemeText(){return"dark"===this.effectiveTheme()?"\u0422\u0435\u043c\u043d\u0430\u044f \u0442\u0435\u043c\u0430 \u0430\u043a\u0442\u0438\u0432\u043d\u0430":"\u0421\u0432\u0435\u0442\u043b\u0430\u044f \u0442\u0435\u043c\u0430 \u0430\u043a\u0442\u0438\u0432\u043d\u0430"}ngOnInit(){this.initializeForm(),this.loadUserProfile(),this.isEngineer&&this.loadEngineerRates()}initializeForm(){this.profileForm=this.fb.group({firstName:["",[a.k0.required,a.k0.minLength(2)]],lastName:["",[a.k0.required,a.k0.minLength(2)]],email:["",[a.k0.required,a.k0.email]]})}loadUserProfile(){const t=this.currentUser();t&&this.profileForm.patchValue({firstName:t.firstName,lastName:t.lastName,email:t.email}),this.usersService.getUserProfile().subscribe({next:u=>{console.log("Full user profile:",u),this.fullUserProfile.set(u)},error:u=>{console.error("Error loading full user profile:",u)}})}loadEngineerRates(){const t=this.currentUser();t?.id&&(this.isLoadingRates.set(!0),this.engineerRatesService.getActiveRatesForEngineer(t.id).subscribe({next:u=>{this.engineerRates.set(u),this.isLoadingRates.set(!1)},error:u=>{console.error("Error loading engineer rates:",u),this.snackBar.open("Failed to load engineer rates","Close",{duration:3e3}),this.isLoadingRates.set(!1)}}))}toggleEditMode(){this.isEditing()?this.cancelEdit():this.isEditing.set(!0)}saveProfile(){this.profileForm.valid?(this.isLoading.set(!0),console.log("Updating profile:",this.profileForm.value),setTimeout(()=>{this.isLoading.set(!1),this.isEditing.set(!1),this.snackBar.open("Profile updated successfully","Close",{duration:3e3})},1e3)):this.markFormGroupTouched()}cancelEdit(){this.loadUserProfile(),this.isEditing.set(!1)}markFormGroupTouched(){Object.keys(this.profileForm.controls).forEach(t=>{this.profileForm.get(t)?.markAsTouched()})}getRoleDisplay(t){switch(t){case S.gG.ADMIN:return"Administrator";case S.gG.MANAGER:return"Manager";default:return"User"}}changePassword(){this.snackBar.open("Change password functionality coming soon","Close",{duration:2e3})}uploadAvatar(){this.snackBar.open("Avatar upload functionality coming soon","Close",{duration:2e3})}formatCurrency(t){return new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}).format(t)}formatNumber(t){return new Intl.NumberFormat("ru-RU").format(t)}getEngineerData(){return this.fullUserProfile()?.engineer}onThemeChange(t){this.themeService.setTheme(t),this.snackBar.open(`\u0422\u0435\u043c\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0430 \u043d\u0430: ${this.themes.find(u=>u.value===t)?.label}`,"OK",{duration:2e3})}static{this.\u0275fac=function(u){return new(u||n)}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-profile"]],standalone:!0,features:[e.aNF],decls:75,vars:17,consts:()=>{let t,u,i,l,f,p,m,C,M,T,A,N,L,v,$,x,D,G,b,y,X,k,j,B,z,U,w,Y,W,K,Z,V;return t=$localize`:@@profile.myProfile:Мой профиль`,u=$localize`:@@profile.changeAvatar:Изменить аватар`,i=$localize`:@@profile.profileInformation:Информация о профиле`,l=$localize`:@@profile.updatePersonalInfo:Обновите свою личную информацию`,f=$localize`:@@profile.firstName:Имя`,p=$localize`:@@profile.lastName:Фамилия`,m=$localize`:@@profile.email:Электронная почта`,C=$localize`:@@profile.security:Безопасность`,M=$localize`:@@profile.manageSecurity:Управление безопасностью учетной записи`,T=$localize`:@@profile.password:Пароль`,A=$localize`:@@profile.lastChanged:Последнее изменение: Недавно`,N=$localize`:@@profile.changePassword:Изменить пароль`,L=$localize`:@@profile.firstNameRequired: Имя обязательно и должно содержать минимум 2 символа `,v=$localize`:@@profile.lastNameRequired: Фамилия обязательна и должна содержать минимум 2 символа `,$=$localize`:@@profile.emailRequired: Пожалуйста, введите корректный email адрес `,x=$localize`:@@profile.role:Роль`,D=$localize`:@@profile.cancel:Отмена`,G=$localize`:@@profile.engineerRates:Мои ставки по организациям`,b=$localize`:@@profile.engineerRatesSubtitle:Индивидуальные ставки оплаты за работу в разных организациях`,y=$localize`:@@profile.organization: Организация `,X=$localize`:@@profile.baseRate: Базовая ставка `,k=$localize`:@@profile.overtimeRate: Ставка переработки `,j=$localize`:@@profile.zone1Extra:Зона 1`,B=$localize`:@@profile.zone2Extra:Зона 2`,z=$localize`:@@profile.zone3Extra:Зона 3`,U=$localize`:@@profile.noRates:У вас нет индивидуальных ставок по организациям`,w=$localize`:@@profile.vehicleData:Данные по автомобилю и работе`,Y=$localize`:@@profile.vehicleDataSubtitle:Информация о настройках автомобиля, территории и зарплате`,W=$localize`:@@profile.hourlyRates:Почасовые ставки`,K=$localize`:@@profile.vehicleSettings:Настройки автомобиля`,Z=$localize`:@@profile.territorySettings:Настройки территории`,V=$localize`:@@profile.salarySettings:Настройки зарплаты`,[t,u,i,l,f,p,m,C,M,T,A,N,L,v,$,x,D,G,b,y,X,k,j,B,z,U,w,Y,W,K,Z,V,[1,"profile-container"],[1,"header"],[1,"profile-content"],[1,"avatar-card"],[1,"avatar-section"],[1,"avatar-placeholder"],[1,"avatar-info"],["mat-raised-button","","color","primary",3,"click"],[3,"selectedIndexChange","selectedIndex"],["label","\u041e\u0431\u0449\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"],[1,"tab-content"],[1,"info-card"],[1,"card-actions"],["mat-icon-button","",3,"click","disabled"],[3,"ngSubmit","formGroup"],[1,"form-row"],["appearance","outline",1,"form-field"],["matInput","","formControlName","firstName",3,"readonly"],[4,"ngIf"],["matInput","","formControlName","lastName",3,"readonly"],["appearance","outline",1,"form-field","full-width"],["matInput","","formControlName","email","type","email",3,"readonly"],["class","role-info",4,"ngIf"],["class","form-actions",4,"ngIf"],[1,"security-card"],[1,"security-item"],[1,"security-info"],["mat-raised-button","",3,"click"],["label","\u0421\u0442\u0430\u0432\u043a\u0438 \u043f\u043e \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f\u043c",4,"ngIf"],["label","\u0414\u0430\u043d\u043d\u044b\u0435 \u043f\u043e \u043c\u0430\u0448\u0438\u043d\u0435",4,"ngIf"],[1,"role-info"],["matInput","","readonly","",3,"value"],[1,"form-actions"],["mat-button","","type","button",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["label","\u0421\u0442\u0430\u0432\u043a\u0438 \u043f\u043e \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f\u043c"],[1,"engineer-rates-card"],["class","loading-container",4,"ngIf"],["class","rates-table-container",4,"ngIf"],["class","no-rates",4,"ngIf"],[1,"loading-container"],["diameter","40"],[1,"rates-table-container"],["mat-table","",1,"mat-elevation-z2",3,"dataSource"],["matColumnDef","organizationName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","customBaseRate"],["matColumnDef","customOvertimeRate"],["matColumnDef","customZone1Extra"],["matColumnDef","customZone2Extra"],["matColumnDef","customZone3Extra"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"no-rates"],["label","\u0414\u0430\u043d\u043d\u044b\u0435 \u043f\u043e \u043c\u0430\u0448\u0438\u043d\u0435"],[1,"engineer-settings-card"],[1,"settings-grid"],["class","setting-item",4,"ngIf"],["class","no-engineer-data","style","\n                    grid-column: 1 / -1;\n                    text-align: center;\n                    padding: 40px;\n                    background: #fff3cd;\n                    border: 1px solid #ffeaa7;\n                    border-radius: 4px;\n                  ",4,"ngIf"],[1,"setting-item"],[1,"setting-content"],[1,"rate-details"],[1,"rate-item"],[1,"rate-label"],[1,"rate-value"],["class","rate-item",4,"ngIf"],[1,"no-engineer-data",2,"grid-column","1 / -1","text-align","center","padding","40px","background","#fff3cd","border","1px solid #ffeaa7","border-radius","4px"],[2,"font-size","48px","width","48px","height","48px","color","#856404","margin-bottom","16px"],[2,"color","#856404","margin","0 0 8px 0"],[2,"color","#856404","margin","0"]]},template:function(u,i){if(1&u&&(e.j41(0,"div",32)(1,"div",33)(2,"h1"),e.pXf(3,0),e.k0s()(),e.j41(4,"div",34)(5,"mat-card",35)(6,"mat-card-content")(7,"div",36)(8,"div",37)(9,"mat-icon"),e.EFF(10,"person"),e.k0s()(),e.j41(11,"div",38)(12,"h3"),e.EFF(13),e.k0s(),e.j41(14,"p"),e.EFF(15),e.k0s(),e.j41(16,"button",39),e.bIt("click",function(){return i.uploadAvatar()}),e.j41(17,"mat-icon"),e.EFF(18,"photo_camera"),e.k0s(),e.j41(19,"span"),e.pXf(20,1),e.k0s()()()()()(),e.j41(21,"mat-tab-group",40),e.mxI("selectedIndexChange",function(f){return e.DH7(i.selectedTabIndex,f)||(i.selectedTabIndex=f),f}),e.j41(22,"mat-tab",41)(23,"div",42)(24,"mat-card",43)(25,"mat-card-header")(26,"mat-card-title"),e.pXf(27,2),e.k0s(),e.j41(28,"mat-card-subtitle"),e.pXf(29,3),e.k0s(),e.j41(30,"div",44)(31,"button",45),e.bIt("click",function(){return i.toggleEditMode()}),e.j41(32,"mat-icon"),e.EFF(33),e.k0s()()()(),e.j41(34,"mat-card-content")(35,"form",46),e.bIt("ngSubmit",function(){return i.saveProfile()}),e.j41(36,"div",47)(37,"mat-form-field",48)(38,"mat-label"),e.pXf(39,4),e.k0s(),e.nrm(40,"input",49),e.DNE(41,oe,2,0,"mat-error",50),e.k0s(),e.j41(42,"mat-form-field",48)(43,"mat-label"),e.pXf(44,5),e.k0s(),e.nrm(45,"input",51),e.DNE(46,ue,2,0,"mat-error",50),e.k0s()(),e.j41(47,"mat-form-field",52)(48,"mat-label"),e.pXf(49,6),e.k0s(),e.nrm(50,"input",53),e.DNE(51,ie,2,0,"mat-error",50),e.k0s(),e.DNE(52,re,5,1,"div",54)(53,se,8,5,"div",55),e.k0s()()(),e.j41(54,"mat-card",56)(55,"mat-card-header")(56,"mat-card-title"),e.pXf(57,7),e.k0s(),e.j41(58,"mat-card-subtitle"),e.pXf(59,8),e.k0s()(),e.j41(60,"mat-card-content")(61,"div",57)(62,"div",58)(63,"mat-icon"),e.EFF(64,"lock"),e.k0s(),e.j41(65,"div")(66,"h4"),e.pXf(67,9),e.k0s(),e.j41(68,"p"),e.pXf(69,10),e.k0s()()(),e.j41(70,"button",59),e.bIt("click",function(){return i.changePassword()}),e.j41(71,"span"),e.pXf(72,11),e.k0s()()()()()()(),e.DNE(73,Te,12,3,"mat-tab",60)(74,De,15,5,"mat-tab",61),e.k0s()()()),2&u){let l,f,p,m,C,M;e.R7$(13),e.Lme("",null==(l=i.currentUser())?null:l.firstName," ",null==(l=i.currentUser())?null:l.lastName,""),e.R7$(2),e.JRh(null==(f=i.currentUser())?null:f.email),e.R7$(6),e.R50("selectedIndex",i.selectedTabIndex),e.R7$(10),e.Y8G("disabled",i.isLoading()),e.R7$(2),e.JRh(i.isEditing()?"close":"edit"),e.R7$(2),e.Y8G("formGroup",i.profileForm),e.R7$(5),e.Y8G("readonly",!i.isEditing()),e.R7$(),e.Y8G("ngIf",(null==(p=i.profileForm.get("firstName"))?null:p.invalid)&&(null==(p=i.profileForm.get("firstName"))?null:p.touched)),e.R7$(4),e.Y8G("readonly",!i.isEditing()),e.R7$(),e.Y8G("ngIf",(null==(m=i.profileForm.get("lastName"))?null:m.invalid)&&(null==(m=i.profileForm.get("lastName"))?null:m.touched)),e.R7$(4),e.Y8G("readonly",!i.isEditing()),e.R7$(),e.Y8G("ngIf",(null==(C=i.profileForm.get("email"))?null:C.invalid)&&(null==(C=i.profileForm.get("email"))?null:C.touched)),e.R7$(),e.Y8G("ngIf",null==(M=i.currentUser())?null:M.role),e.R7$(),e.Y8G("ngIf",i.isEditing()),e.R7$(20),e.Y8G("ngIf",i.isEngineer),e.R7$(),e.Y8G("ngIf",i.isEngineer)}},dependencies:[O.MD,O.bT,a.X1,a.qT,a.me,a.BC,a.cb,a.j4,a.JD,d.Hu,d.RN,d.m2,d.MM,d.Lc,d.dh,g.RG,g.rl,g.nJ,g.TL,F.fS,F.fg,s.Hl,s.$z,s.iY,P.m_,P.An,E.D6,E.LG,c.tP,c.Zl,c.tL,c.ji,c.cC,c.YV,c.iL,c.KS,c.$R,c.YZ,c.NB,h.RI,h.mq,h.T8,Q.Ve,J.mV],styles:[".profile-container[_ngcontent-%COMP%]{padding:20px;max-width:800px;margin:0 auto}.header[_ngcontent-%COMP%]{margin-bottom:24px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;color:#333}.profile-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.avatar-card[_ngcontent-%COMP%]   .avatar-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:24px}.avatar-card[_ngcontent-%COMP%]   .avatar-section[_ngcontent-%COMP%]   .avatar-placeholder[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background-color:#e0e0e0;display:flex;align-items:center;justify-content:center}.avatar-card[_ngcontent-%COMP%]   .avatar-section[_ngcontent-%COMP%]   .avatar-placeholder[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:40px;width:40px;height:40px;color:#666}.avatar-card[_ngcontent-%COMP%]   .avatar-section[_ngcontent-%COMP%]   .avatar-info[_ngcontent-%COMP%]{flex:1}.avatar-card[_ngcontent-%COMP%]   .avatar-section[_ngcontent-%COMP%]   .avatar-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#333}.avatar-card[_ngcontent-%COMP%]   .avatar-section[_ngcontent-%COMP%]   .avatar-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 16px;color:#666}.info-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]{margin-left:auto}.info-card[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:16px}.info-card[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{flex:1}.info-card[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.info-card[_ngcontent-%COMP%]   .form-field.full-width[_ngcontent-%COMP%]{width:100%}.info-card[_ngcontent-%COMP%]   .role-info[_ngcontent-%COMP%]{margin-top:16px;padding-top:16px;border-top:1px solid #e0e0e0}.info-card[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:24px;padding-top:16px;border-top:1px solid #e0e0e0}.info-card[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{padding:24px 0}.info-card[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{margin-bottom:24px}.info-card[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]:last-child{margin-bottom:0}.engineer-rates-card[_ngcontent-%COMP%]   .rates-table-container[_ngcontent-%COMP%]{overflow-x:auto;margin-top:16px}.engineer-rates-card[_ngcontent-%COMP%]   .rates-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;min-width:600px}.engineer-rates-card[_ngcontent-%COMP%]   .rates-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .engineer-rates-card[_ngcontent-%COMP%]   .rates-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left}.engineer-rates-card[_ngcontent-%COMP%]   .rates-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;background-color:#f5f5f5}.engineer-rates-card[_ngcontent-%COMP%]   .no-rates[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 0;color:#666}.engineer-rates-card[_ngcontent-%COMP%]   .no-rates[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:16px;color:#ccc}.engineer-rates-card[_ngcontent-%COMP%]   .no-rates[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;margin:0}.engineer-settings-card[_ngcontent-%COMP%]   .settings-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:24px}.engineer-settings-card[_ngcontent-%COMP%]   .settings-grid[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:16px;padding:20px;border:1px solid #e0e0e0;border-radius:8px;background-color:#fafafa}.engineer-settings-card[_ngcontent-%COMP%]   .settings-grid[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2;font-size:24px;width:24px;height:24px;margin-top:2px}.engineer-settings-card[_ngcontent-%COMP%]   .settings-grid[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   .setting-content[_ngcontent-%COMP%]{flex:1}.engineer-settings-card[_ngcontent-%COMP%]   .settings-grid[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   .setting-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;color:#333;font-size:1.1rem;font-weight:500}.engineer-settings-card[_ngcontent-%COMP%]   .settings-grid[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   .setting-content[_ngcontent-%COMP%]   .rate-details[_ngcontent-%COMP%]   .rate-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.engineer-settings-card[_ngcontent-%COMP%]   .settings-grid[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   .setting-content[_ngcontent-%COMP%]   .rate-details[_ngcontent-%COMP%]   .rate-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.engineer-settings-card[_ngcontent-%COMP%]   .settings-grid[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   .setting-content[_ngcontent-%COMP%]   .rate-details[_ngcontent-%COMP%]   .rate-item[_ngcontent-%COMP%]   .rate-label[_ngcontent-%COMP%]{color:#666;font-size:.9rem}.engineer-settings-card[_ngcontent-%COMP%]   .settings-grid[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   .setting-content[_ngcontent-%COMP%]   .rate-details[_ngcontent-%COMP%]   .rate-item[_ngcontent-%COMP%]   .rate-value[_ngcontent-%COMP%]{font-weight:600;color:#1976d2}.security-card[_ngcontent-%COMP%]   .security-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:16px 0}.security-card[_ngcontent-%COMP%]   .security-item[_ngcontent-%COMP%]   .security-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.security-card[_ngcontent-%COMP%]   .security-item[_ngcontent-%COMP%]   .security-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#666}.security-card[_ngcontent-%COMP%]   .security-item[_ngcontent-%COMP%]   .security-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;color:#333}.security-card[_ngcontent-%COMP%]   .security-item[_ngcontent-%COMP%]   .security-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:.875rem}.preferences-card[_ngcontent-%COMP%]   .preference-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:16px 0;gap:24px}.preferences-card[_ngcontent-%COMP%]   .preference-item[_ngcontent-%COMP%]   .preference-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;flex:1}.preferences-card[_ngcontent-%COMP%]   .preference-item[_ngcontent-%COMP%]   .preference-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--color-primary, #6f4e37);font-size:28px;width:28px;height:28px}.preferences-card[_ngcontent-%COMP%]   .preference-item[_ngcontent-%COMP%]   .preference-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;color:var(--text-primary, #333);font-weight:500}.preferences-card[_ngcontent-%COMP%]   .preference-item[_ngcontent-%COMP%]   .preference-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--text-secondary, #666);font-size:.875rem}.preferences-card[_ngcontent-%COMP%]   .preference-item[_ngcontent-%COMP%]   .theme-select[_ngcontent-%COMP%]{min-width:200px;margin-bottom:0}.preferences-card[_ngcontent-%COMP%]   .theme-preview[_ngcontent-%COMP%]{margin-top:16px;padding:20px;border-radius:12px;background:linear-gradient(135deg,#fafafa,#f5f5f5);border:2px solid #e0e0e0;transition:all .3s ease}.preferences-card[_ngcontent-%COMP%]   .theme-preview.dark-preview[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2a2a2a,#1e1e1e);border-color:#404040}.preferences-card[_ngcontent-%COMP%]   .theme-preview[_ngcontent-%COMP%]   .preview-box[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;justify-content:center}.preferences-card[_ngcontent-%COMP%]   .theme-preview[_ngcontent-%COMP%]   .preview-box[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;color:var(--color-accent, #1976d2)}.preferences-card[_ngcontent-%COMP%]   .theme-preview[_ngcontent-%COMP%]   .preview-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:var(--text-primary, #333)}.preferences-card[_ngcontent-%COMP%]     .mat-mdc-option .theme-option-icon{display:inline-block;vertical-align:middle;margin-right:8px;font-size:20px;width:20px;height:20px}@media (max-width: 768px){.profile-container[_ngcontent-%COMP%]{padding:16px}.avatar-card[_ngcontent-%COMP%]   .avatar-section[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:16px}.avatar-card[_ngcontent-%COMP%]   .avatar-section[_ngcontent-%COMP%]   .avatar-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .avatar-card[_ngcontent-%COMP%]   .avatar-section[_ngcontent-%COMP%]   .avatar-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:8px}.info-card[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{flex-direction:column;gap:0}.security-card[_ngcontent-%COMP%]   .security-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:16px}.security-card[_ngcontent-%COMP%]   .security-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.preferences-card[_ngcontent-%COMP%]   .preference-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:16px}.preferences-card[_ngcontent-%COMP%]   .preference-item[_ngcontent-%COMP%]   .theme-select[_ngcontent-%COMP%]{width:100%}.preferences-card[_ngcontent-%COMP%]   .theme-preview[_ngcontent-%COMP%]{padding:16px}.preferences-card[_ngcontent-%COMP%]   .theme-preview[_ngcontent-%COMP%]   .preview-box[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px}.preferences-card[_ngcontent-%COMP%]   .theme-preview[_ngcontent-%COMP%]   .preview-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem}.engineer-settings-card[_ngcontent-%COMP%]   .settings-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.engineer-settings-card[_ngcontent-%COMP%]   .settings-grid[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]{padding:16px}.engineer-rates-card[_ngcontent-%COMP%]   .rates-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{min-width:100%;font-size:.875rem}.engineer-rates-card[_ngcontent-%COMP%]   .rates-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .engineer-rates-card[_ngcontent-%COMP%]   .rates-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 12px}.tab-content[_ngcontent-%COMP%]{padding:16px 0}.tab-content[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{margin-bottom:16px}}"]})}}return n})()},4740:(H,R,_)=>{_.d(R,{g:()=>d});var e=_(4292),O=_(6e3),a=_(878);let d=(()=>{class g{constructor(){this.http=(0,e.WQX)(O.Qq)}getUsers(s){let P=new O.Nl;return s&&Object.entries(s).forEach(([I,E])=>{null!=E&&""!==E&&(P=P.set(I,E.toString()))}),this.http.get(`${a.c.apiUrl}/users`,{params:P})}getUser(s){return this.http.get(`${a.c.apiUrl}/users/${s}`)}createUser(s){return this.http.post(`${a.c.apiUrl}/users`,s)}updateUser(s,P){return this.http.patch(`${a.c.apiUrl}/users/${s}`,P)}deleteUser(s){return this.http.delete(`${a.c.apiUrl}/users/${s}`)}checkUserDeletion(s){return this.http.delete(`${a.c.apiUrl}/users/${s}`)}forceDeleteUser(s){return this.http.delete(`${a.c.apiUrl}/users/${s}/force`)}getUserProfile(){return this.http.get(`${a.c.apiUrl}/users/profile`)}updateProfile(s){return this.http.patch(`${a.c.apiUrl}/users/profile`,s)}static{this.\u0275fac=function(P){return new(P||g)}}static{this.\u0275prov=e.jDH({token:g,factory:g.\u0275fac,providedIn:"root"})}}return g})()}}]);