#!/bin/bash
# ะกะบัะธะฟั ะดะปั ะฟะตัะฒะพะฝะฐัะฐะปัะฝะพะน ะฝะฐัััะพะนะบะธ VPS

echo "๐ ะะฐัััะพะนะบะฐ VPS ะดะปั ะดะตะฟะปะพั ะฟัะธะปะพะถะตะฝะธั..."

# 1. ะะฑะฝะพะฒะปะตะฝะธะต ัะธััะตะผั
echo "๐ฆ ะะฑะฝะพะฒะปะตะฝะธะต ัะธััะตะผั..."
sudo apt update && sudo apt upgrade -y

# 2. ะฃััะฐะฝะพะฒะบะฐ Docker
echo "๐ณ ะฃััะฐะฝะพะฒะบะฐ Docker..."
sudo apt install -y docker.io docker-compose git curl

# 3. ะะพะฑะฐะฒะปะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปั ะฒ ะณััะฟะฟั docker
echo "๐ค ะะฐัััะพะนะบะฐ ะฟัะฐะฒ ะดะปั Docker..."
sudo usermod -aG docker $USER

# 4. ะกะพะทะดะฐะฝะธะต ะดะธัะตะบัะพัะธะธ ะดะปั ะฟัะพะตะบัะฐ
echo "๐ ะกะพะทะดะฐะฝะธะต ะดะธัะตะบัะพัะธะธ ะฟัะพะตะบัะฐ..."
mkdir -p ~/coffe
cd ~/coffe

# 5. ะัะพะฒะตัะบะฐ ัััะฐะฝะพะฒะบะธ
echo "โ ะัะพะฒะตัะบะฐ ัััะฐะฝะพะฒะบะธ..."
docker --version
docker-compose --version

echo ""
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "โ VPS ะณะพัะพะฒ ะบ ะดะตะฟะปะพั!"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""
echo "ะกะปะตะดัััะธะต ัะฐะณะธ:"
echo "1. ะะพะฑะฐะฒััะต ัะตะบัะตัั ะฒ GitHub (Settings โ Secrets)"
echo "2. ะกะดะตะปะฐะนัะต git push origin main"
echo "3. GitHub Actions ะฐะฒัะพะผะฐัะธัะตัะบะธ ะทะฐะดะตะฟะปะพะธั ะฟัะธะปะพะถะตะฝะธะต"
echo ""
echo "ะะพัะปะต ะดะตะฟะปะพั ะฟัะธะปะพะถะตะฝะธะต ะฑัะดะตั ะดะพัััะฟะฝะพ:"
echo "  - Frontend: http://$(curl -s ifconfig.me):4000"
echo "  - Backend:  http://$(curl -s ifconfig.me):3001"
echo ""

