# üìù –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–µ–ø–ª–æ—è –Ω–∞ VPS

## üéØ –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ:

- **VPS:** vm-46609d42d (Ubuntu 22.04, 2 vCPU, 4 GB RAM)
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** `user1`
- **–ü–∞—Ä–æ–ª—å:** `coffeAdmin123!`
- **–ü—Ä–æ–≤–∞–π–¥–µ—Ä:** Cloud.ru
- **IP –∞–¥—Ä–µ—Å:** ‚ùì –ù–£–ñ–ù–û –£–ó–ù–ê–¢–¨ –í –ü–ê–ù–ï–õ–ò CLOUD.RU

---

## üöÄ –®–ê–ì 1: –£–∑–Ω–∞—Ç—å IP –∞–¥—Ä–µ—Å VPS

### –í–∞—Ä–∏–∞–Ω—Ç A: –í –ø–∞–Ω–µ–ª–∏ Cloud.ru

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://cloud.ru/
2. –í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–∞—à–∏–Ω—ã ‚Üí vm-46609d42d
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **IP –∞–¥—Ä–µ—Å** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `185.123.45.67`)

### –í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ SSH (–µ—Å–ª–∏ —É–∂–µ –∑–Ω–∞–µ—Ç–µ IP)

```bash
ssh user1@IP_–ê–î–†–ï–°
# –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å: coffeAdmin123!

# –ù–∞ VPS –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
curl ifconfig.me
```

**üìù –ó–∞–ø–∏—à–∏—Ç–µ IP –∞–¥—Ä–µ—Å, –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–∞–ª—å—à–µ!**

---

## üê≥ –®–ê–ì 2: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å VPS (–æ–¥–∏–Ω —Ä–∞–∑)

### –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ VPS:

```bash
ssh user1@–í–ê–®_IP_–ê–î–†–ï–°
# –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å: coffeAdmin123!
```

### –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã:

```bash
# 1. –û–±–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É
sudo apt update && sudo apt upgrade -y

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Docker –∏ Docker Compose
sudo apt install -y docker.io docker-compose git curl

# 3. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É docker
sudo usermod -aG docker user1

# 4. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≥—Ä—É–ø–ø—ã
newgrp docker

# 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É
docker --version
docker-compose --version

# 6. –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞
mkdir -p ~/coffe
cd ~/coffe

# 7. –ì–æ—Ç–æ–≤–æ!
echo "‚úÖ VPS –≥–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—É!"
```

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—ã–π–¥–∏—Ç–µ –∏ –∑–∞–π–¥–∏—Ç–µ —Å–Ω–æ–≤–∞ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∞–≤ docker:

```bash
exit
ssh user1@–í–ê–®_IP_–ê–î–†–ï–°
```

---

## üîê –®–ê–ì 3: –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ GitHub

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```
https://github.com/Addeo/coffe-deploy
```

### 2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Settings ‚Üí Secrets:

```
Settings (–≤–≤–µ—Ä—Ö—É)
  ‚Üí Secrets and variables (—Å–ª–µ–≤–∞)
    ‚Üí Actions
      ‚Üí New repository secret
```

### 3. –î–æ–±–∞–≤—å—Ç–µ 12 —Å–µ–∫—Ä–µ—Ç–æ–≤:

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª **`YOUR_GITHUB_SECRETS.txt`** –∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ–∫—Ä–µ—Ç–∞:

- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **Name**
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **Value**
- –ù–∞–∂–º–∏—Ç–µ **"Add secret"**

**–°–µ–∫—Ä–µ—Ç—ã –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:**

| #   | Name                  | Value            | –û—Ç–∫—É–¥–∞ –≤–∑—è—Ç—å       |
| --- | --------------------- | ---------------- | ------------------ |
| 1   | `VPS_HOST`            | `–í–ê–®_IP_–ê–î–†–ï–°`   | –ò–∑ –®–∞–≥–∞ 1          |
| 2   | `VPS_USER`            | `user1`          | –ì–æ—Ç–æ–≤–æ ‚úÖ          |
| 3   | `VPS_SSH_KEY`         | –ò–∑ —Ñ–∞–π–ª–∞         | –ì–æ—Ç–æ–≤–æ ‚úÖ          |
| 4   | `JWT_SECRET`          | –ò–∑ —Ñ–∞–π–ª–∞         | –ì–æ—Ç–æ–≤–æ ‚úÖ          |
| 5   | `MYSQL_ROOT_PASSWORD` | –ò–∑ —Ñ–∞–π–ª–∞         | –ì–æ—Ç–æ–≤–æ ‚úÖ          |
| 6   | `MYSQL_DATABASE`      | `coffee_admin`   | –ì–æ—Ç–æ–≤–æ ‚úÖ          |
| 7   | `MYSQL_USER`          | `coffee_user`    | –ì–æ—Ç–æ–≤–æ ‚úÖ          |
| 8   | `MYSQL_PASSWORD`      | –ò–∑ —Ñ–∞–π–ª–∞         | –ì–æ—Ç–æ–≤–æ ‚úÖ          |
| 9   | `SMTP_HOST`           | `smtp.gmail.com` | –ì–æ—Ç–æ–≤–æ ‚úÖ          |
| 10  | `SMTP_PORT`           | `587`            | –ì–æ—Ç–æ–≤–æ ‚úÖ          |
| 11  | `SMTP_USER`           | –í–∞—à email        | –ù—É–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å ‚ùó |
| 12  | `SMTP_PASS`           | –ü–∞—Ä–æ–ª—å Gmail     | –ù—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å ‚ùó  |

**–î–ª—è SMTP_PASS:**

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: https://myaccount.google.com/apppasswords
2. –°–æ–∑–¥–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è "Mail"
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ 16-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥

---

## üì§ –®–ê–ì 4: –ó–∞–ø—É—à–∏—Ç—å –∫–æ–¥ –≤ GitHub

```bash
# –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –Ω–∞ –≤–∞—à–µ–º Mac:
cd /Users/sergejkosilov/WebstormProjects/new\ goal/coffe

# –î–æ–±–∞–≤–∏—Ç—å —Ñ–∞–π–ª—ã
git add .github/workflows/deploy-vps.yml
git add docs/VPS_DEPLOY_CLOUDRU.md
git add VPS_QUICK_START.md

# –ö–æ–º–º–∏—Ç
git commit -m "Setup automatic VPS deployment with GitHub Actions"

# –ü—É—à
git push origin main
```

---

## üé¨ –®–ê–ì 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–µ–ø–ª–æ–π

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ GitHub Actions:

```
https://github.com/Addeo/coffe-deploy/actions
```

### 2. –í—ã —É–≤–∏–¥–∏—Ç–µ:

```
üîÑ Deploy to VPS (Cloud.ru)
   Running...
```

### 3. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (5-10 –º–∏–Ω—É—Ç):

```
‚úÖ Deploy to VPS (Cloud.ru)
   Completed successfully
```

### 4. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

```
Frontend: http://–í–ê–®_IP:4000
Backend:  http://–í–ê–®_IP:3001/api
```

---

## üêõ –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ VPS:

```bash
ssh user1@–í–ê–®_IP
cd ~/coffe
docker-compose -f docker-compose.prod.yml logs -f
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã:

```bash
docker-compose -f docker-compose.prod.yml restart
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å:

```bash
docker-compose -f docker-compose.prod.yml ps
```

---

## üìã Checklist (–æ—Ç–º–µ—á–∞–π—Ç–µ –ø–æ —Ö–æ–¥—É):

- [ ] ‚úÖ –£–∑–Ω–∞–ª IP –∞–¥—Ä–µ—Å VPS
- [ ] ‚úÖ –ü–æ–¥–∫–ª—é—á–∏–ª—Å—è –∫ VPS –ø–æ SSH
- [ ] ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏–ª Docker –∏ Docker Compose –Ω–∞ VPS
- [ ] ‚úÖ –î–æ–±–∞–≤–∏–ª –≤—Å–µ 12 —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ GitHub
- [ ] ‚úÖ –°–¥–µ–ª–∞–ª git push –≤ main –≤–µ—Ç–∫—É
- [ ] ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏–ª GitHub Actions (workflow –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —É—Å–ø–µ—à–Ω–æ)
- [ ] ‚úÖ –û—Ç–∫—Ä—ã–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- [ ] ‚úÖ –ó–∞–ª–æ–≥–∏–Ω–∏–ª—Å—è –∫–∞–∫ admin

---

## üéØ –ò—Ç–æ–≥–æ:

**–í–∞–º –Ω—É–∂–Ω–æ:**

1. ‚è±Ô∏è **5 –º–∏–Ω—É—Ç** - —É–∑–Ω–∞—Ç—å IP –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å VPS (–®–∞–≥ 1-2)
2. ‚è±Ô∏è **5 –º–∏–Ω—É—Ç** - –¥–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ GitHub (–®–∞–≥ 3)
3. ‚è±Ô∏è **1 –º–∏–Ω—É—Ç–∞** - —Å–¥–µ–ª–∞—Ç—å git push (–®–∞–≥ 4)
4. ‚è±Ô∏è **10 –º–∏–Ω—É—Ç** - –¥–æ–∂–¥–∞—Ç—å—Å—è –¥–µ–ø–ª–æ—è (–®–∞–≥ 5)

**–í—Å–µ–≥–æ: ~20 –º–∏–Ω—É—Ç –¥–æ –≥–æ—Ç–æ–≤–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ VPS!** üöÄ

---

## üìû –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è, –ø–æ–∫–∞–∂–∏—Ç–µ –º–Ω–µ:

- –°–∫—Ä–∏–Ω—à–æ—Ç –∏–∑ GitHub Actions
- –õ–æ–≥–∏ —Å VPS (`docker-compose logs`)
- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ

–Ø –ø–æ–º–æ–≥—É —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è! üí™
